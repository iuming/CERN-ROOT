<!DOCTYPE html>
<!-- saved from url=(0062)http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="“Diving into ROOT”">
  <title>A ROOT Guide For Beginners</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script src="./A ROOT Guide For Beginners_files/MathJax.js.下载" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
  body {
    font-family: Helvetica, arial, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    padding-top: 10px;
    padding-bottom: 10px;
    background-color: white;
    padding: 30px; }
  
  body > *:first-child {
    margin-top: 0 !important; }
  body > *:last-child {
    margin-bottom: 0 !important; }
  
  a {
    text-decoration: none;
    color: #4183C4; }
  a.absent {
    color: #cc0000; }
  a.anchor {
    display: block;
    padding-left: 30px;
    margin-left: -30px;
    cursor: pointer;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0; }
  
  h1, h2, h3, h4, h5, h6 {
    margin: 20px 0 10px;
    padding: 0;
    font-weight: bold;
    -webkit-font-smoothing: antialiased;
    cursor: text;
    position: relative; }
  
  h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
    text-decoration: none; }
  
  h1 tt, h1 code {
    font-size: inherit; }
  
  h2 tt, h2 code {
    font-size: inherit; }
  
  h3 tt, h3 code {
    font-size: inherit; }
  
  h4 tt, h4 code {
    font-size: inherit; }
  
  h5 tt, h5 code {
    font-size: inherit; }
  
  h6 tt, h6 code {
    font-size: inherit; }
  
  h1 {
    font-size: 28px;
    color: black; }
  
  h2 {
    font-size: 24px;
    border-bottom: 1px solid #cccccc;
    color: black; }
  
  h3 {
    font-size: 18px; }
  
  h4 {
    font-size: 16px; }
  
  h5 {
    font-size: 14px; }
  
  h6 {
    color: #777777;
    font-size: 14px; }
  
  p, blockquote, ul, ol, dl, li, table, pre {
    margin: 15px 0; }
  
  hr {
    background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
    border: 0 none;
    color: #cccccc;
    height: 4px;
    padding: 0;
  }
  
  body > h2:first-child {
    margin-top: 0;
    padding-top: 0; }
  body > h1:first-child {
    margin-top: 0;
    padding-top: 0; }
    body > h1:first-child + h2 {
      margin-top: 0;
      padding-top: 0; }
  body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
    margin-top: 0;
    padding-top: 0; }
  
  a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
    margin-top: 0;
    padding-top: 0; }
  
  h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
    margin-top: 0; }
  
  li p.first {
    display: inline-block; }
  li {
    margin: 0; }
  ul, ol {
    padding-left: 30px; }
  
  ul :first-child, ol :first-child {
    margin-top: 0; }
  
  dl {
    padding: 0; }
    dl dt {
      font-size: 14px;
      font-weight: bold;
      font-style: italic;
      padding: 0;
      margin: 15px 0 5px; }
      dl dt:first-child {
        padding: 0; }
      dl dt > :first-child {
        margin-top: 0; }
      dl dt > :last-child {
        margin-bottom: 0; }
    dl dd {
      margin: 0 0 15px;
      padding: 0 15px; }
      dl dd > :first-child {
        margin-top: 0; }
      dl dd > :last-child {
        margin-bottom: 0; }
  
  blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777; }
    blockquote > :first-child {
      margin-top: 0; }
    blockquote > :last-child {
      margin-bottom: 0; }
  
  table {
    padding: 0;border-collapse: collapse; }
    table tr {
      border-top: 1px solid #cccccc;
      background-color: white;
      margin: 0;
      padding: 0; }
      table tr:nth-child(2n) {
        background-color: #f8f8f8; }
      table tr th {
        font-weight: bold;
        border: 1px solid #cccccc;
        margin: 0;
        padding: 6px 13px; }
      table tr td {
        border: 1px solid #cccccc;
        margin: 0;
        padding: 6px 13px; }
      table tr th :first-child, table tr td :first-child {
        margin-top: 0; }
      table tr th :last-child, table tr td :last-child {
        margin-bottom: 0; }
  
  img {
    max-width: 100%; }
  
  span.frame {
    display: block;
    overflow: hidden; }
    span.frame > span {
      border: 1px solid #dddddd;
      display: block;
      float: left;
      overflow: hidden;
      margin: 13px 0 0;
      padding: 7px;
      width: auto; }
    span.frame span img {
      display: block;
      float: left; }
    span.frame span span {
      clear: both;
      color: #333333;
      display: block;
      padding: 5px 0 0; }
  span.align-center {
    display: block;
    overflow: hidden;
    clear: both; }
    span.align-center > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: center; }
    span.align-center span img {
      margin: 0 auto;
      text-align: center; }
  span.align-right {
    display: block;
    overflow: hidden;
    clear: both; }
    span.align-right > span {
      display: block;
      overflow: hidden;
      margin: 13px 0 0;
      text-align: right; }
    span.align-right span img {
      margin: 0;
      text-align: right; }
  span.float-left {
    display: block;
    margin-right: 13px;
    overflow: hidden;
    float: left; }
    span.float-left span {
      margin: 13px 0 0; }
  span.float-right {
    display: block;
    margin-left: 13px;
    overflow: hidden;
    float: right; }
    span.float-right > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: right; }
  
  code, tt {
    margin: 0 2px;
    padding: 0 5px;
    white-space: nowrap;
    border: 1px solid #eaeaea;
    background-color: #f8f8f8;
    border-radius: 3px; }
  
  pre code {
    margin: 0;
    padding: 0;
    white-space: pre;
    border: none;
    background: transparent; }
  
  .highlight pre {
    background-color: #f8f8f8;
    border: 1px solid #cccccc;
    font-size: 13px;
    line-height: 19px;
    overflow: auto;
    padding: 6px 10px;
    border-radius: 3px; }
  
  pre {
    background-color: #f8f8f8;
    border: 1px solid #cccccc;
    font-size: 13px;
    line-height: 19px;
    overflow: auto;
    padding: 6px 10px;
    border-radius: 3px; }
    pre code, pre tt {
      background-color: transparent;
      border: none; }
  
  sup {
      font-size: 0.83em;
      vertical-align: super;
      line-height: 0;
  }
  * {
  	-webkit-print-color-adjust: exact;
  }
  @media screen and (min-width: 914px) {
      body {
          width: 854px;
          margin:0 auto;
      }
  }
  @media print {
  	table, pre {
  		page-break-inside: avoid;
  	}
  	pre {
  		word-wrap: break-word;
  	}
  }
  </style>
<style type="text/css">
.stackedit-open-button {
  position: absolute;
  width: 24px;
  height: 24px;
  background: no-repeat url("chrome-extension://ajehldoplanpchfokmeempkekhnhmoha/icon.svg");
  background-size: 24px 24px;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.5s;
}

.stackedit-open-button:focus,
.stackedit-open-button:hover {
  opacity: 1;
}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.mjx-chtml {display: inline-block; line-height: 0; text-indent: 0; text-align: left; text-transform: none; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; letter-spacing: normal; word-wrap: normal; word-spacing: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; margin: 0; padding: 1px 0}
.MJXc-display {display: block; text-align: center; margin: 1em 0; padding: 0}
.mjx-chtml[tabindex]:focus, body :focus .mjx-chtml[tabindex] {display: inline-table}
.mjx-full-width {text-align: center; display: table-cell!important; width: 10000em}
.mjx-math {display: inline-block; border-collapse: separate; border-spacing: 0}
.mjx-math * {display: inline-block; -webkit-box-sizing: content-box!important; -moz-box-sizing: content-box!important; box-sizing: content-box!important; text-align: left}
.mjx-numerator {display: block; text-align: center}
.mjx-denominator {display: block; text-align: center}
.MJXc-stacked {height: 0; position: relative}
.MJXc-stacked > * {position: absolute}
.MJXc-bevelled > * {display: inline-block}
.mjx-stack {display: inline-block}
.mjx-op {display: block}
.mjx-under {display: table-cell}
.mjx-over {display: block}
.mjx-over > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-under > * {padding-left: 0px!important; padding-right: 0px!important}
.mjx-stack > .mjx-sup {display: block}
.mjx-stack > .mjx-sub {display: block}
.mjx-prestack > .mjx-presup {display: block}
.mjx-prestack > .mjx-presub {display: block}
.mjx-delim-h > .mjx-char {display: inline-block}
.mjx-surd {vertical-align: top}
.mjx-mphantom * {visibility: hidden}
.mjx-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 2px 3px; font-style: normal; font-size: 90%}
.mjx-annotation-xml {line-height: normal}
.mjx-menclose > svg {fill: none; stroke: currentColor}
.mjx-mtr {display: table-row}
.mjx-mlabeledtr {display: table-row}
.mjx-mtd {display: table-cell; text-align: center}
.mjx-label {display: table-row}
.mjx-box {display: inline-block}
.mjx-block {display: block}
.mjx-span {display: inline}
.mjx-char {display: block; white-space: pre}
.mjx-itable {display: inline-table; width: auto}
.mjx-row {display: table-row}
.mjx-cell {display: table-cell}
.mjx-table {display: table; width: 100%}
.mjx-line {display: block; height: 0}
.mjx-strut {width: 0; padding-top: 1em}
.mjx-vsize {width: 0}
.MJXc-space1 {margin-left: .167em}
.MJXc-space2 {margin-left: .222em}
.MJXc-space3 {margin-left: .278em}
.mjx-chartest {display: block; visibility: hidden; position: absolute; top: 0; line-height: normal; font-size: 500%}
.mjx-chartest .mjx-char {display: inline}
.mjx-chartest .mjx-box {padding-top: 1000px}
.MJXc-processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MJXc-processed {display: none}
.mjx-test {display: block; font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.mjx-ex-box-test {position: absolute; overflow: hidden; width: 1px; height: 60ex}
.mjx-line-box-test {display: table!important}
.mjx-line-box-test span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
#MathJax_CHTML_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.mjx-chtml .mjx-noError {line-height: 1.2; vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
.MJXc-TeX-unknown-R {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: normal}
.MJXc-TeX-unknown-I {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: normal}
.MJXc-TeX-unknown-B {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: normal; font-weight: bold}
.MJXc-TeX-unknown-BI {font-family: STIXGeneral,'Cambria Math','Arial Unicode MS',serif; font-style: italic; font-weight: bold}
.MJXc-TeX-ams-R {font-family: MJXc-TeX-ams-R,MJXc-TeX-ams-Rw}
.MJXc-TeX-cal-B {font-family: MJXc-TeX-cal-B,MJXc-TeX-cal-Bx,MJXc-TeX-cal-Bw}
.MJXc-TeX-frak-R {font-family: MJXc-TeX-frak-R,MJXc-TeX-frak-Rw}
.MJXc-TeX-frak-B {font-family: MJXc-TeX-frak-B,MJXc-TeX-frak-Bx,MJXc-TeX-frak-Bw}
.MJXc-TeX-math-BI {font-family: MJXc-TeX-math-BI,MJXc-TeX-math-BIx,MJXc-TeX-math-BIw}
.MJXc-TeX-sans-R {font-family: MJXc-TeX-sans-R,MJXc-TeX-sans-Rw}
.MJXc-TeX-sans-B {font-family: MJXc-TeX-sans-B,MJXc-TeX-sans-Bx,MJXc-TeX-sans-Bw}
.MJXc-TeX-sans-I {font-family: MJXc-TeX-sans-I,MJXc-TeX-sans-Ix,MJXc-TeX-sans-Iw}
.MJXc-TeX-script-R {font-family: MJXc-TeX-script-R,MJXc-TeX-script-Rw}
.MJXc-TeX-type-R {font-family: MJXc-TeX-type-R,MJXc-TeX-type-Rw}
.MJXc-TeX-cal-R {font-family: MJXc-TeX-cal-R,MJXc-TeX-cal-Rw}
.MJXc-TeX-main-B {font-family: MJXc-TeX-main-B,MJXc-TeX-main-Bx,MJXc-TeX-main-Bw}
.MJXc-TeX-main-I {font-family: MJXc-TeX-main-I,MJXc-TeX-main-Ix,MJXc-TeX-main-Iw}
.MJXc-TeX-main-R {font-family: MJXc-TeX-main-R,MJXc-TeX-main-Rw}
.MJXc-TeX-math-I {font-family: MJXc-TeX-math-I,MJXc-TeX-math-Ix,MJXc-TeX-math-Iw}
.MJXc-TeX-size1-R {font-family: MJXc-TeX-size1-R,MJXc-TeX-size1-Rw}
.MJXc-TeX-size2-R {font-family: MJXc-TeX-size2-R,MJXc-TeX-size2-Rw}
.MJXc-TeX-size3-R {font-family: MJXc-TeX-size3-R,MJXc-TeX-size3-Rw}
.MJXc-TeX-size4-R {font-family: MJXc-TeX-size4-R,MJXc-TeX-size4-Rw}
.MJXc-TeX-vec-R {font-family: MJXc-TeX-vec-R,MJXc-TeX-vec-Rw}
.MJXc-TeX-vec-B {font-family: MJXc-TeX-vec-B,MJXc-TeX-vec-Bx,MJXc-TeX-vec-Bw}
@font-face {font-family: MJXc-TeX-ams-R; src: local('MathJax_AMS'), local('MathJax_AMS-Regular')}
@font-face {font-family: MJXc-TeX-ams-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_AMS-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-B; src: local('MathJax_Caligraphic Bold'), local('MathJax_Caligraphic-Bold')}
@font-face {font-family: MJXc-TeX-cal-Bx; src: local('MathJax_Caligraphic'); font-weight: bold}
@font-face {font-family: MJXc-TeX-cal-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-R; src: local('MathJax_Fraktur'), local('MathJax_Fraktur-Regular')}
@font-face {font-family: MJXc-TeX-frak-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-frak-B; src: local('MathJax_Fraktur Bold'), local('MathJax_Fraktur-Bold')}
@font-face {font-family: MJXc-TeX-frak-Bx; src: local('MathJax_Fraktur'); font-weight: bold}
@font-face {font-family: MJXc-TeX-frak-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Fraktur-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Fraktur-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-BI; src: local('MathJax_Math BoldItalic'), local('MathJax_Math-BoldItalic')}
@font-face {font-family: MJXc-TeX-math-BIx; src: local('MathJax_Math'); font-weight: bold; font-style: italic}
@font-face {font-family: MJXc-TeX-math-BIw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Math-BoldItalic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Math-BoldItalic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Math-BoldItalic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-R; src: local('MathJax_SansSerif'), local('MathJax_SansSerif-Regular')}
@font-face {font-family: MJXc-TeX-sans-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-B; src: local('MathJax_SansSerif Bold'), local('MathJax_SansSerif-Bold')}
@font-face {font-family: MJXc-TeX-sans-Bx; src: local('MathJax_SansSerif'); font-weight: bold}
@font-face {font-family: MJXc-TeX-sans-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-sans-I; src: local('MathJax_SansSerif Italic'), local('MathJax_SansSerif-Italic')}
@font-face {font-family: MJXc-TeX-sans-Ix; src: local('MathJax_SansSerif'); font-style: italic}
@font-face {font-family: MJXc-TeX-sans-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_SansSerif-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-script-R; src: local('MathJax_Script'), local('MathJax_Script-Regular')}
@font-face {font-family: MJXc-TeX-script-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Script-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Script-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-type-R; src: local('MathJax_Typewriter'), local('MathJax_Typewriter-Regular')}
@font-face {font-family: MJXc-TeX-type-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Typewriter-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-cal-R; src: local('MathJax_Caligraphic'), local('MathJax_Caligraphic-Regular')}
@font-face {font-family: MJXc-TeX-cal-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Caligraphic-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-B; src: local('MathJax_Main Bold'), local('MathJax_Main-Bold')}
@font-face {font-family: MJXc-TeX-main-Bx; src: local('MathJax_Main'); font-weight: bold}
@font-face {font-family: MJXc-TeX-main-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-I; src: local('MathJax_Main Italic'), local('MathJax_Main-Italic')}
@font-face {font-family: MJXc-TeX-main-Ix; src: local('MathJax_Main'); font-style: italic}
@font-face {font-family: MJXc-TeX-main-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-main-R; src: local('MathJax_Main'), local('MathJax_Main-Regular')}
@font-face {font-family: MJXc-TeX-main-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Main-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-math-I; src: local('MathJax_Math Italic'), local('MathJax_Math-Italic')}
@font-face {font-family: MJXc-TeX-math-Ix; src: local('MathJax_Math'); font-style: italic}
@font-face {font-family: MJXc-TeX-math-Iw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Math-Italic.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size1-R; src: local('MathJax_Size1'), local('MathJax_Size1-Regular')}
@font-face {font-family: MJXc-TeX-size1-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size1-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size2-R; src: local('MathJax_Size2'), local('MathJax_Size2-Regular')}
@font-face {font-family: MJXc-TeX-size2-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size2-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size3-R; src: local('MathJax_Size3'), local('MathJax_Size3-Regular')}
@font-face {font-family: MJXc-TeX-size3-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size3-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-size4-R; src: local('MathJax_Size4'), local('MathJax_Size4-Regular')}
@font-face {font-family: MJXc-TeX-size4-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Size4-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-R; src: local('MathJax_Vector'), local('MathJax_Vector-Regular')}
@font-face {font-family: MJXc-TeX-vec-Rw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Regular.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Regular.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Regular.otf') format('opentype')}
@font-face {font-family: MJXc-TeX-vec-B; src: local('MathJax_Vector Bold'), local('MathJax_Vector-Bold')}
@font-face {font-family: MJXc-TeX-vec-Bx; src: local('MathJax_Vector'); font-weight: bold}
@font-face {font-family: MJXc-TeX-vec-Bw; src /*1*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/eot/MathJax_Vector-Bold.eot'); src /*2*/: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/woff/MathJax_Vector-Bold.woff') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/fonts/HTML-CSS/TeX/otf/MathJax_Vector-Bold.otf') format('opentype')}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<header>
<h1 class="title">A ROOT Guide For Beginners</h1>
<p class="author">“Diving into ROOT”</p>
</header>
<nav id="TOC">
<ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#motivation-and-introduction"><span class="toc-section-number">1</span> Motivation and Introduction</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-basics"><span class="toc-section-number">2</span> ROOT Basics</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-as-calculator"><span class="toc-section-number">2.1</span> ROOT as calculator</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#learn-c-at-the-root-prompt"><span class="toc-section-number">2.2</span> Learn C++ at the ROOT prompt</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-as-function-plotter"><span class="toc-section-number">2.3</span> ROOT as function plotter</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#controlling-root"><span class="toc-section-number">2.4</span> Controlling ROOT</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#plotting-measurements"><span class="toc-section-number">2.5</span> Plotting Measurements</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#histograms-in-root"><span class="toc-section-number">2.6</span> Histograms in ROOT</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#interactive-root"><span class="toc-section-number">2.7</span> Interactive ROOT</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-beginners-faq"><span class="toc-section-number">2.8</span> ROOT Beginners’ FAQ</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-macros"><span class="toc-section-number">3</span> ROOT Macros</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#general-remarks-on-root-macros"><span class="toc-section-number">3.1</span> General Remarks on ROOT macros</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#a-more-complete-example"><span class="toc-section-number">3.2</span> A more complete example</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#summary-of-visual-effects"><span class="toc-section-number">3.3</span> Summary of Visual effects</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#interpretation-and-compilation"><span class="toc-section-number">3.4</span> Interpretation and Compilation</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#graphs"><span class="toc-section-number">4</span> Graphs</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#read-graph-points-from-file"><span class="toc-section-number">4.1</span> Read Graph Points from File</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#polar-graphs"><span class="toc-section-number">4.2</span> Polar Graphs</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#d-graphs"><span class="toc-section-number">4.3</span> 2D Graphs</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#multiple-graphs"><span class="toc-section-number">4.4</span> Multiple graphs</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#histograms"><span class="toc-section-number">5</span> Histograms</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#your-first-histogram"><span class="toc-section-number">5.1</span> Your First Histogram</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#add-and-divide-histograms"><span class="toc-section-number">5.2</span> Add and Divide Histograms</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#two-dimensional-histograms"><span class="toc-section-number">5.3</span> Two-dimensional Histograms</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#multiple-histograms"><span class="toc-section-number">5.4</span> Multiple histograms</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#functions-and-parameter-estimation"><span class="toc-section-number">6</span> Functions and Parameter Estimation</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fitting-functions-to-pseudo-data"><span class="toc-section-number">6.1</span> Fitting Functions to Pseudo Data</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#toy-monte-carlo-experiments"><span class="toc-section-number">6.2</span> Toy Monte Carlo Experiments</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#file-io-and-parallel-analysis"><span class="toc-section-number">7</span> File I/O and Parallel Analysis</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#storing-root-objects"><span class="toc-section-number">7.1</span> Storing ROOT Objects</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#n-tuples-in-root"><span class="toc-section-number">7.2</span> N-tuples in ROOT</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#root-in-python"><span class="toc-section-number">8</span> ROOT in Python</a><ul>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#pyroot"><span class="toc-section-number">8.1</span> PyROOT</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#custom-code-from-c-to-python"><span class="toc-section-number">8.2</span> Custom code: from C++ to Python</a></li>
</ul></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#concluding-remarks"><span class="toc-section-number">9</span> Concluding Remarks</a></li>
<li><a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#references">References</a></li>
</ul>
</nav>
<hr>
<p><strong>Abstract</strong></p>
<p>ROOT is a software framework for data analysis and I/O: a powerful tool to cope with the demanding tasks typical of state of the art scientific data analysis. Among its prominent features are an advanced graphical user interface, ideal for interactive analysis, an interpreter for the C++ programming language, for rapid and efficient prototyping and a persistency mechanism for C++ objects, used also to write every year petabytes of data recorded by the Large Hadron Collider experiments. This introductory guide illustrates the main features of ROOT which are relevant for the typical problems of data analysis: input and plotting of data from measurements and fitting of analytical functions.</p>
<p><em>Original Authors</em> - D. Piparo - G. Quast - M. Zeise</p>
<h1 id="motivation-and-introduction"><span class="header-section-number">1</span> Motivation and Introduction</h1>
<p><strong><em>Welcome to data analysis!</em></strong></p>
<p>Comparison of measurements to theoretical models is one of the standard tasks in experimental physics. In the most simple case, a “model” is just a function providing predictions of measured data. Very often, the model depends on parameters. Such a model may simply state “the current <em>I</em> is proportional to the voltage <em>U</em>”, and the task of the experimentalist consists of determining the resistance, <em>R</em>, from a set of measurements.</p>
<p>As a first step, a visualisation of the data is needed. Next, some manipulations typically have to be applied, e.g.&nbsp;corrections or parameter transformations. Quite often, these manipulations are complex ones, and a powerful library of mathematical functions and procedures should be provided - think for example of an integral or peak-search or a Fourier transformation applied to an input spectrum to obtain the actual measurement described by the model.</p>
<p>One specialty of experimental physics are the inevitable uncertainties affecting each measurement, and visualisation tools have to include these. In subsequent analysis, the statistical nature of the errors must be handled properly.</p>
<p>As the last step, measurements are compared to models, and free model parameters need to be determined in this process. See Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f11">1.1</a> for an example of a function (model) fit to data points. Several standard methods are available, and a data analysis tool should provide easy access to more than one of them. Means to quantify the level of agreement between measurements and model must also be available. <!--
[f11]: figures/examplefit.png "f11"
<a name="f11"></a>

![Measured data points with error bars and fitted quadratic
function.\label{f11}][f11]--></p>
<p>Quite often, the data volume to be analyzed is large - think of fine-granular measurements accumulated with the aid of computers. A usable tool therefore must contain easy-to-use and efficient methods for storing and handling data.</p>
<p>In Quantum mechanics, models typically only predict the probability density function (“pdf”) of measurements depending on a number of parameters, and the aim of the experimental analysis is to extract the parameters from the observed distribution of frequencies at which certain values of the measurement are observed. Measurements of this kind require means to generate and visualize frequency distributions, so-called histograms, and stringent statistical treatment to extract the model parameters from purely statistical distributions.</p>
<p>Simulation of expected data is another important aspect in data analysis. By repeated generation of “pseudo-data”, which are analysed in the same manner as intended for the real data, analysis procedures can be validated or compared. In many cases, the distribution of the measurement errors is not precisely known, and simulation offers the possibility to test the effects of different assumptions.</p>
<p>A powerful software framework addressing all of the above requirements is ROOT, an open source project coordinated by the European Organisation for Nuclear Research, CERN in Geneva.</p>
<p>ROOT is very flexible and provides both a programming interface to use in own applications and a graphical user interface for interactive data analysis. The purpose of this document is to serve as a beginners guide and provides extendable examples for your own use cases, based on typical problems addressed in student labs. This guide will hopefully lay the ground for more complex applications in your future scientific work building on a modern, state-of the art tool for data analysis.</p>
<p>This guide in form of a tutorial is intended to introduce you quickly to the ROOT package. This goal will be accomplished using concrete examples, according to the “learning by doing” principle. Also because of this reason, this guide cannot cover all the complexity of the ROOT package. Nevertheless, once you feel confident with the concepts presented in the following chapters, you will be able to appreciate the ROOT Users Guide <span class="citation" data-cites="ROOT_Users_Guide">(<em>The Root Users Guide</em> 2015)</span> and navigate through the Class Reference <span class="citation" data-cites="ROOT_Class_Reference">(<em>The Root Reference Guide</em> 2013)</span> to find all the details you might be interested in. You can even look at the code itself, since ROOT is a free, open-source product. Use these documents in parallel to this tutorial!</p>
<p>The ROOT Data Analysis Framework itself is written in and heavily relies on the <code>C++</code> programming language: some knowledge about <code>C++</code> is required. Jus take advantage from the immense available literature about <code>C++</code> if you do not have any idea of what this language is about.</p>
<p>ROOT is available for many platforms (Linux, Mac OS X, Windows…), but in this guide we will implicitly assume that you are using Linux. The first thing you need to do with ROOT is install it, don’t you ? Obtaining the latest ROOT version is straightforward. Just seek the “Pro” version on this webpage <a href="http://root.cern.ch/downloading-root" class="uri">http://root.cern.ch/downloading-root</a>. You will find precompiled versions for the different architectures, or the ROOT source code to compile yourself. Just pick up the flavour you need and follow the installation instructions.</p>
<p><strong>Let’s dive into ROOT!</strong></p>
<h1 id="root-basics"><span class="header-section-number">2</span> ROOT Basics</h1>
<p>Now that you have installed ROOT, what’s this interactive shell thing you’re running ? It’s like this: ROOT leads a double life. It has an interpreter for macros (Cling <span class="citation" data-cites="Cling">(“What is Cling” 2015)</span>) that you can run from the command line or run like applications. But it is also an interactive shell that can evaluate arbitrary statements and expressions. This is extremely useful for debugging, quick hacking and testing. Let us first have a look at some very simple examples.</p>
<h2 id="root-as-calculator"><span class="header-section-number">2.1</span> ROOT as calculator</h2>
<p>You can even use the ROOT interactive shell in lieu of a calculator! Launch the ROOT interactive shell with the command</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb1-1" data-line-number="1"> &gt; root</a></code></pre></div>
<p>on your Linux box. The prompt should appear shortly:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb2-1" data-line-number="1"> root [<span class="dv">0</span>]</a></code></pre></div>
<p>and let’s dive in with the steps shown here:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb3-1" data-line-number="1">root [<span class="dv">0</span>] <span class="dv">1+1</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">(<span class="dt">int</span>) <span class="dv">2</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">root [<span class="dv">1</span>] <span class="dv">2</span>*(<span class="dv">4+2</span>)/<span class="fl">12.</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">(<span class="dt">double</span>) <span class="fl">1.000000</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">root [<span class="dv">2</span>] sqrt(<span class="fl">3.</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">(<span class="dt">double</span>) <span class="fl">1.732051</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">root [<span class="dv">3</span>] <span class="dv">1</span> &gt; <span class="dv">2</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">(<span class="dt">bool</span>) <span class="kw">false</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">root [<span class="dv">4</span>] TMath::Pi()</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">(<span class="dt">double</span>) <span class="fl">3.141593</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">root [<span class="dv">5</span>] TMath::Erf(.<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">(<span class="dt">double</span>) <span class="fl">0.222703</span></a></code></pre></div>
<p>Not bad. You can see that ROOT offers you the possibility not only to type in <code>C++</code> statements, but also advanced mathematical functions, which live in the <code>TMath</code> namespace.</p>
<p>Now let’s do something more elaborated. A numerical example with the well known geometrical series:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb4-1" data-line-number="1">root [<span class="dv">6</span>] <span class="dt">double</span> x=.<span class="dv">5</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">(<span class="dt">double</span>) <span class="fl">0.500000</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">root [<span class="dv">7</span>] <span class="dt">int</span> N=<span class="dv">30</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">(<span class="dt">int</span>) <span class="dv">30</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">root [<span class="dv">8</span>] <span class="dt">double</span> geom_series=<span class="dv">0</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">(<span class="dt">double</span>) <span class="fl">0.000000</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">root [<span class="dv">9</span>] <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;N;++i)geom_series+=TMath::Power(x,i)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">root [<span class="dv">10</span>]  cout &lt;&lt; TMath::Abs(geom_series - (<span class="dv">1</span>-TMath::Power(x,N<span class="dv">-1</span>))/(<span class="dv">1</span>-x)) &lt;&lt;endl;</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="fl">1.86265e-09</span></a></code></pre></div>
<p>Here we made a step forward. We even declared variables and used a <em>for</em> control structure. Note that there are some subtle differences between Cling and the standard <code>C++</code> language. You do not need the “;” at the end of line in interactive mode – try the difference e.g.&nbsp;using the command at line <code>root [6]</code>.</p>
<h2 id="learn-c-at-the-root-prompt"><span class="header-section-number">2.2</span> Learn C++ at the ROOT prompt</h2>
<p>Behind the ROOT prompt there is an interpreter based on a real compiler toolkit: LLVM. It is therefore possible to exercise many features of <code>C++</code> and the standard library. For example in the following snippet we define a lambda function, a vector and we sort it in different ways:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb5-1" data-line-number="1">root [<span class="dv">0</span>] <span class="kw">using</span> doubles = <span class="bu">std::</span>vector&lt;<span class="dt">double</span>&gt;;</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">root [<span class="dv">1</span>] <span class="kw">auto</span> pVec = [](<span class="at">const</span> doubles&amp; v){<span class="cf">for</span> (<span class="kw">auto</span>&amp;&amp; x:v) cout &lt;&lt; x &lt;&lt; endl;};</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">root [<span class="dv">2</span>] doubles v{<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">2</span>};</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">root [<span class="dv">3</span>] pVec(v);</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="dv">3</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="dv">5</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="dv">4</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="dv">1</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="dv">2</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">root [<span class="dv">4</span>] <span class="bu">std::</span>sort(v.begin(),v.end());</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">root [<span class="dv">5</span>] pVec(v);</a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="dv">1</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="dv">2</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="dv">3</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="dv">4</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="dv">5</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19">root [<span class="dv">6</span>] <span class="bu">std::</span>sort(v.begin(),v.end(),[](<span class="dt">double</span> a, <span class="dt">double</span> b){<span class="cf">return</span> a&gt;b;});</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">root [<span class="dv">7</span>] pVec(v);</a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="dv">5</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="dv">4</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="dv">3</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="dv">2</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="dv">1</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="dv">0</span></a></code></pre></div>
<p>Or, if you prefer random number generation:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb6-1" data-line-number="1">root [<span class="dv">0</span>] <span class="bu">std::</span>default_random_engine generator;</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">root [<span class="dv">1</span>] <span class="bu">std::</span>normal_distribution&lt;<span class="dt">double</span>&gt; distribution(<span class="fl">0.</span>,<span class="fl">1.</span>);</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">root [<span class="dv">2</span>] distribution(generator)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">(<span class="bu">std::</span>normal_distribution&lt;<span class="dt">double</span>&gt;::<span class="dt">result_type</span>) <span class="fl">-1.219658e-01</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">root [<span class="dv">3</span>] distribution(generator)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">(<span class="bu">std::</span>normal_distribution&lt;<span class="dt">double</span>&gt;::<span class="dt">result_type</span>) <span class="fl">-1.086818e+00</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">root [<span class="dv">4</span>] distribution(generator)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">(<span class="bu">std::</span>normal_distribution&lt;<span class="dt">double</span>&gt;::<span class="dt">result_type</span>) <span class="fl">6.842899e-01</span></a></code></pre></div>
<p>Impressive isn’t it?</p>
<h2 id="root-as-function-plotter"><span class="header-section-number">2.3</span> ROOT as function plotter</h2>
<p>Using one of ROOT’s powerful classes, here <code>TF1</code>,<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> will allow us to display a function of one variable, <em>x</em>. Try the following:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb7-1" data-line-number="1">root [<span class="dv">11</span>] TF1 f1(<span class="st">"f1"</span>,<span class="st">"sin(x)/x"</span>,<span class="fl">0.</span>,<span class="fl">10.</span>);</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">root [<span class="dv">12</span>] f1.Draw();</a></code></pre></div>
<p><code>f1</code> is an instance of a TF1 class, the arguments are used in the constructor; the first one of type string is a name to be entered in the internal ROOT memory management system, the second string type parameter defines the function, here <code>sin(x)/x</code>, and the two parameters of type double define the range of the variable <em>x</em>. The <code>Draw()</code> method, here without any parameters, displays the function in a window which should pop up after you typed the above two lines.</p>
<p>A slightly extended version of this example is the definition of a function with parameters, called <code>[0]</code>, <code>[1]</code> and so on in the ROOT formula syntax. We now need a way to assign values to these parameters; this is achieved with the method <code>SetParameter(&lt;parameter_number&gt;,&lt;parameter_value&gt;)</code> of class <code>TF1</code>. Here is an example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb8-1" data-line-number="1">root [<span class="dv">13</span>] TF1 f2(<span class="st">"f2"</span>,<span class="st">"[0]*sin([1]*x)/x"</span>,<span class="fl">0.</span>,<span class="fl">10.</span>);</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">root [<span class="dv">14</span>] f2.SetParameter(<span class="dv">0</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">root [<span class="dv">15</span>] f2.SetParameter(<span class="dv">1</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">root [<span class="dv">16</span>] f2.Draw();</a></code></pre></div>
<p>Of course, this version shows the same results as the initial one. Try playing with the parameters and plot the function again. The class <code>TF1</code> has a large number of very useful methods, including integration and differentiation. To make full use of this and other ROOT classes, visit the documentation on the Internet under <a href="http://root.cern.ch/drupal/content/reference-guide" class="uri">http://root.cern.ch/drupal/content/reference-guide</a>. Formulae in ROOT are evaluated using the class <code>TFormula</code>, so also look up the relevant class documentation for examples, implemented functions and syntax.</p>
<p>You should definitely download this guide to your own system to have it at you disposal whenever you need it.</p>
<p>To extend a little bit on the above example, consider a more complex function you would like to define. You can also do this using standard <code>C</code> or <code>C++</code> code.</p>
<p>Consider the example below, which calculates and displays the interference pattern produced by light falling on a multiple slit. Please do not type in the example below at the ROOT command line, there is a much simpler way: Make sure you have the file <code>slits.C</code> on disk, and type <code>root slits.C</code> in the shell. This will start root and make it read the “macro” <code>slits.C</code>, i.e.&nbsp;all the lines in the file will be executed one after the other.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">// Example drawing the interference pattern of light</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">// falling on a grid with n slits and ratio r of slit</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">// width over distance between slits.</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">auto</span> pi = TMath::Pi();</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">// function code in C</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="dt">double</span> single(<span class="dt">double</span> *x, <span class="dt">double</span> *par) {</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">  <span class="cf">return</span> pow(sin(pi*par[<span class="dv">0</span>]*x[<span class="dv">0</span>])/(pi*par[<span class="dv">0</span>]*x[<span class="dv">0</span>]),<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="dt">double</span> nslit0(<span class="dt">double</span> *x,<span class="dt">double</span> *par){</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  <span class="cf">return</span> pow(sin(pi*par[<span class="dv">1</span>]*x[<span class="dv">0</span>])/sin(pi*x[<span class="dv">0</span>]),<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb9-15" data-line-number="15"></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="dt">double</span> nslit(<span class="dt">double</span> *x, <span class="dt">double</span> *par){</a>
<a class="sourceLine" id="cb9-17" data-line-number="17">  <span class="cf">return</span> single(x,par) * nslit0(x,par);</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb9-19" data-line-number="19"></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">// This is the main program</span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="dt">void</span> slits() {</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">  <span class="dt">float</span> r,ns;</a>
<a class="sourceLine" id="cb9-23" data-line-number="23"></a>
<a class="sourceLine" id="cb9-24" data-line-number="24">  <span class="co">// request user input</span></a>
<a class="sourceLine" id="cb9-25" data-line-number="25">  cout &lt;&lt; <span class="st">"slit width / g ? "</span>;</a>
<a class="sourceLine" id="cb9-26" data-line-number="26">  scanf(<span class="st">"</span><span class="sc">%f</span><span class="st">"</span>,&amp;r);</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">  cout &lt;&lt; <span class="st">"# of slits? "</span>;</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">  scanf(<span class="st">"</span><span class="sc">%f</span><span class="st">"</span>,&amp;ns);</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">  cout &lt;&lt;<span class="st">"interference pattern for "</span>&lt;&lt; ns</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">       &lt;&lt;<span class="st">" slits, width/distance: "</span>&lt;&lt;r&lt;&lt;endl;</a>
<a class="sourceLine" id="cb9-31" data-line-number="31"></a>
<a class="sourceLine" id="cb9-32" data-line-number="32">  <span class="co">// define function and set options</span></a>
<a class="sourceLine" id="cb9-33" data-line-number="33">  TF1 *Fnslit  = <span class="kw">new</span> TF1(<span class="st">"Fnslit"</span>,nslit,<span class="dv">-5</span><span class="fl">.001</span>,<span class="fl">5.</span>,<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">  Fnslit-&gt;SetNpx(<span class="dv">500</span>);</a>
<a class="sourceLine" id="cb9-35" data-line-number="35"></a>
<a class="sourceLine" id="cb9-36" data-line-number="36">  <span class="co">// set parameters, as read in above</span></a>
<a class="sourceLine" id="cb9-37" data-line-number="37">  Fnslit-&gt;SetParameter(<span class="dv">0</span>,r);</a>
<a class="sourceLine" id="cb9-38" data-line-number="38">  Fnslit-&gt;SetParameter(<span class="dv">1</span>,ns);</a>
<a class="sourceLine" id="cb9-39" data-line-number="39"></a>
<a class="sourceLine" id="cb9-40" data-line-number="40">  <span class="co">// draw the interference pattern for a grid with n slits</span></a>
<a class="sourceLine" id="cb9-41" data-line-number="41">  Fnslit-&gt;Draw();</a>
<a class="sourceLine" id="cb9-42" data-line-number="42">}</a></code></pre></div>
<p><a name="f21"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/TF1_DoubleSlit.png" title="f21" alt="Output of slits.C with parameters 0.2 and 2."><figcaption>Output of slits.C with parameters 0.2 and 2.</figcaption>
</figure>
<p>The example first asks for user input, namely the ratio of slit width over slit distance, and the number of slits. After entering this information, you should see the graphical output as is shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f21">2.1</a>.</p>
<p>This is a more complicated example than the ones we have seen before, so spend some time analysing it carefully, you should have understood it before continuing. Let us go through it in detail:</p>
<p>Lines <em>7-18</em> define the necessary functions in <code>C++</code> code, split into three separate functions, as suggested by the problem considered. The full interference pattern is given by the product of a function depending on the ratio of the width and distance of the slits, and a second one depending on the number of slits. More important for us here is the definition of the interface of these functions to make them usable for the ROOT class <code>TF1</code>: the first argument is the pointer to <em>x</em>, the second one points to the array of parameters.</p>
<p>The main program starts at line 21 with the definition of a function <code>slits()</code> of type <code>void</code>. After asking for user input, a ROOT function is defined using the C-type function given in the beginning. We can now use all methods of the <code>TF1</code> class to control the behaviour of our function – nice, isn’t it ?</p>
<p>If you like, you can easily extend the example to also plot the interference pattern of a single slit, using function <code>double single</code>, or of a grid with narrow slits, function <code>double nslit0</code>, in <code>TF1</code> instances.</p>
<p>Here, we used a macro, some sort of lightweight program, that the interpreter distributed with ROOT, Cling, is able to execute. This is a rather extraordinary situation, since <code>C++</code> is not natively an interpreted language! There is much more to say: chapter is indeed dedicated to macros.</p>
<h2 id="controlling-root"><span class="header-section-number">2.4</span> Controlling ROOT</h2>
<p>One more remark at this point: as every command you type into ROOT is usually interpreted by Cling, an “escape character” is needed to pass commands to ROOT directly. This character is the dot at the beginning of a line:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb10-1" data-line-number="1">root [<span class="dv">1</span>] .&lt;command&gt;</a></code></pre></div>
<p>This is a selection of the most common commands.</p>
<ul>
<li><p><strong>quit root</strong>, simply type <code>.q</code></p></li>
<li><p>obtain a <strong>list of commands</strong>, use <code>.?</code></p></li>
<li><p><strong>access the shell</strong> of the operating system, type <code>.!&lt;OS_command&gt;</code>; try, e.g. <code>.!ls</code> or <code>.!pwd</code></p></li>
<li><p><strong>execute a macro</strong>, enter <code>.x &lt;file_name&gt;</code>; in the above example, you might have used <code>.x slits.C</code> at the ROOT prompt</p></li>
<li><p><strong>load a macro</strong>, type <code>.L &lt;file_name&gt;</code>; in the above example, you might instead have used the command <code>.L slits.C</code> followed by the function call <code>slits();</code>. Note that after loading a macro all functions and procedures defined therein are available at the ROOT prompt.</p></li>
<li><p><strong>compile a macro</strong>, type <code>.L &lt;file_name&gt;+</code>; ROOT is able to manage for you the <code>C++</code> compiler behind the scenes and to produce machine code starting from your macro. One could decide to compile a macro in order to obtain better performance or to get nearer to the production environment.</p></li>
</ul>
<p>Use <code>.help</code> at the prompt to inspect the full list.</p>
<h2 id="plotting-measurements"><span class="header-section-number">2.5</span> Plotting Measurements</h2>
<p>To display measurements in ROOT, including errors, there exists a powerful class <code>TGraphErrors</code> with different types of constructors. In the example here, we use data from the file <code>ExampleData.txt</code> in text format:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb11-1" data-line-number="1">root [<span class="dv">0</span>] TGraphErrors gr(<span class="st">"ExampleData.txt"</span>);</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">root [<span class="dv">1</span>] gr.Draw(<span class="st">"AP"</span>);</a></code></pre></div>
<p>You should see the output shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f22">2.2</a>.</p>
<p><a name="f22"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/TGraphErrors_Example.png" title="f22" alt="Visualisation of data points with errors using the class TGraphErrors. "><figcaption>Visualisation of data points with errors using the class TGraphErrors. </figcaption>
</figure>
<p>Make sure the file <code>ExampleData.txt</code> is available in the directory from which you started ROOT. Inspect this file now with your favourite editor, or use the command <code>less ExampleData.txt</code> to inspect the file, you will see that the format is very simple and easy to understand. Lines beginning with <code>#</code> are ignored. It is very convenient to add some comments about the type of data. The data itself consist of lines with four real numbers each, representing the x- and y- coordinates and their errors of each data point.</p>
<p>The argument of the method <code>Draw("AP")</code> is important here. Behind the scenes, it tells the <code>TGraphPainter</code> class to show the axes and to plot markers at the <em>x</em> and <em>y</em> positions of the specified data points. Note that this simple example relies on the default settings of ROOT, concerning the size of the canvas holding the plot, the marker type and the line colours and thickness used and so on. In a well-written, complete example, all this would need to be specified explicitly in order to obtain nice and well readable results. A full chapter on graphs will explain many more of the features of the class <code>TGraphErrors</code> and its relation to other ROOT classes in much more detail.</p>
<h2 id="histograms-in-root"><span class="header-section-number">2.6</span> Histograms in ROOT</h2>
<p>Frequency distributions in ROOT are handled by a set of classes derived from the histogram class <code>TH1</code>, in our case <code>TH1F</code>. The letter <code>F</code> stands for “float”, meaning that the data type <code>float</code> is used to store the entries in one histogram bin.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb12-1" data-line-number="1">root [<span class="dv">0</span>] TF1 efunc(<span class="st">"efunc"</span>,<span class="st">"exp([0]+[1]*x)"</span>,<span class="fl">0.</span>,<span class="fl">5.</span>);</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">root [<span class="dv">1</span>] efunc.SetParameter(<span class="dv">0</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">root [<span class="dv">2</span>] efunc.SetParameter(<span class="dv">1</span>,<span class="dv">-1</span>);</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">root [<span class="dv">3</span>] TH1F h(<span class="st">"h"</span>,<span class="st">"example histogram"</span>,<span class="dv">100</span>,<span class="fl">0.</span>,<span class="fl">5.</span>);</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">root [<span class="dv">4</span>] <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;<span class="dv">1000</span>;i++) {h.Fill(efunc.GetRandom());}</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">root [<span class="dv">5</span>] h.Draw();</a></code></pre></div>
<p>The first three lines of this example define a function, an exponential in this case, and set its parameters. In line <em>3</em> a histogram is instantiated, with a name, a title, a certain number of bins (100 of them, equidistant, equally sized) in the range from 0 to 5.</p>
<p><a name="f23"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/TH1F_Example.png" title="f23" alt="Visualisation of a histogram filled with exponentially distributed, random numbers. "><figcaption>Visualisation of a histogram filled with exponentially distributed, random numbers. </figcaption>
</figure>
<p>We use yet another new feature of ROOT to fill this histogram with data, namely pseudo-random numbers generated with the method <code>TF1::GetRandom</code>, which in turn uses an instance of the ROOT class <code>TRandom</code> created when ROOT is started. Data is entered in the histogram at line <em>4</em> using the method <code>TH1F::Fill</code> in a loop construct. As a result, the histogram is filled with 1000 random numbers distributed according to the defined function. The histogram is displayed using the method <code>TH1F::Draw()</code>. You may think of this example as repeated measurements of the life time of a quantum mechanical state, which are entered into the histogram, thus giving a visual impression of the probability density distribution. The plot is shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f23">2.3</a>.</p>
<p>Note that you will not obtain an identical plot when executing the lines above, depending on how the random number generator is initialised.</p>
<p>The class <code>TH1F</code> does not contain a convenient input format from plain text files. The following lines of <code>C++</code> code do the job. One number per line stored in the text file “expo.dat” is read in via an input stream and filled in the histogram until end of file is reached.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb13-1" data-line-number="1">root [<span class="dv">1</span>] TH1F h(<span class="st">"h"</span>,<span class="st">"example histogram"</span>,<span class="dv">100</span>,<span class="fl">0.</span>,<span class="fl">5.</span>);</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">root [<span class="dv">2</span>] ifstream inp; <span class="dt">double</span> x;</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">root [<span class="dv">3</span>] inp.open(<span class="st">"expo.dat"</span>);</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">root [<span class="dv">4</span>] <span class="cf">while</span> (inp &gt;&gt; x) { h.Fill(x); }</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">root [<span class="dv">5</span>] h.Draw();</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">root [<span class="dv">6</span>] inp.close();</a></code></pre></div>
<p>Histograms and random numbers are very important tools in statistical data analysis, a whole chapter will be dedicated to this topic.</p>
<h2 id="interactive-root"><span class="header-section-number">2.7</span> Interactive ROOT</h2>
<p>Look at one of your plots again and move the mouse across. You will notice that this is much more than a static picture, as the mouse pointer changes its shape when touching objects on the plot. When the mouse is over an object, a right-click opens a pull-down menu displaying in the top line the name of the ROOT class you are dealing with, e.g. <code>TCanvas</code> for the display window itself, <code>TFrame</code> for the frame of the plot, <code>TAxis</code> for the axes, <code>TPaveText</code> for the plot name. Depending on which plot you are investigating, menus for the ROOT classes <code>TF1</code>, <code>TGraphErrors</code> or <code>TH1F</code> will show up when a right-click is performed on the respective graphical representations. The menu items allow direct access to the members of the various classes, and you can even modify them, e.g.&nbsp;change colour and size of the axis ticks or labels, the function lines, marker types and so on. Try it!</p>
<p><a name="f24"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/ROOTPanel_SetParameters.png" title="f24" alt="Interactive ROOT panel for setting function parameters."><figcaption>Interactive ROOT panel for setting function parameters.</figcaption>
</figure>
<p>You will probably like the following: in the output produced by the example <code>slits.C</code>, right-click on the function line and select “SetLineAttributes”, then left-click on “Set Parameters”. This gives access to a panel allowing you to interactively change the parameters of the function, as shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f24">2.4</a>. Change the slit width, or go from one to two and then three or more slits, just as you like. When clicking on “Apply”, the function plot is updated to reflect the actual value of the parameters you have set.</p>
<p><a name="f25"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/ROOTPanel_FitPanel.png" title="f25" alt="Fit Panel. "><figcaption>Fit Panel. </figcaption>
</figure>
<p>Another very useful interactive tool is the <code>FitPanel</code>, available for the classes <code>TGraphErrors</code> and <code>TH1F</code>. Predefined fit functions can be selected from a pull-down menu, including “<code>gaus</code>”, “<code>expo</code>” and “<code>pol0</code>” - “<code>pol9</code>” for Gaussian and exponential functions or polynomials of degree 0 to 9, respectively. In addition, user-defined functions using the same syntax as for functions with parameters are possible.</p>
<p>After setting the initial parameters, a fit of the selected function to the data of a graph or histogram can be performed and the result displayed on the plot. The fit panel is shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f25">2.5</a>. The fit panel has a number of control options to select the fit method, fix or release individual parameters in the fit, to steer the level of output printed on the console, or to extract and display additional information like contour lines showing parameter correlations. As function fitting is of prime importance in any kind of data analysis, this topic will again show up later.</p>
<p>If you are satisfied with your plot, you probably want to save it. Just close all selector boxes you opened previously and select the menu item <code>Save as...</code> from the menu line of the window. It will pop up a file selector box to allow you to choose the format, file name and target directory to store the image. There is one very noticeable feature here: you can store a plot as a root macro! In this macro, you find the C++ representation of all methods and classes involved in generating the plot. This is a valuable source of information for your own macros, which you will hopefully write after having worked through this tutorial.</p>
<p>Using ROOT’s interactive capabilities is useful for a first exploration of possibilities. Other ROOT classes you will encounter in this tutorial have such graphical interfaces. We will not comment further on this, just be aware of the existence of ROOT’s interactive features and use them if you find them convenient. Some trial-and-error is certainly necessary to find your way through the huge number of menus and parameter settings.</p>
<h2 id="root-beginners-faq"><span class="header-section-number">2.8</span> ROOT Beginners’ FAQ</h2>
<p>At this point of the guide, some basic questions could have already come to your mind. We will try to clarify some of them with further explanations in the following.</p>
<h3 id="root-type-declarations-for-basic-data-types"><span class="header-section-number">2.8.1</span> ROOT type declarations for basic data types</h3>
<p>In the official ROOT documentation, you find special data types replacing the normal ones, e.g. <code>Double_t</code>, <code>Float_t</code> or <code>Int_t</code> replacing the standard <code>double</code>, <code>float</code> or <code>int</code> types. Using the ROOT types makes it easier to port code between platforms (64/32 bit) or operating systems (windows/Linux), as these types are mapped to suitable ones in the ROOT header files. If you want adaptive code of this type, use the ROOT type declarations. However, usually you do not need such adaptive code, and you can safely use the standard C type declarations for your private code, as we did and will do throughout this guide. If you intend to become a ROOT developer, however, you better stick to the official coding rules!</p>
<h3 id="configure-root-at-start-up"><span class="header-section-number">2.8.2</span> Configure ROOT at start-up</h3>
<p>The behaviour of a ROOT session can be tailored with the options in the <code>.rootrc</code> file. Examples of the tunable parameters are the ones related to the operating and window system, to the fonts to be used, to the location of start-up files. At start-up, ROOT looks for a <code>.rootrc</code> file in the following order:</p>
<ul>
<li><p><code>./.rootrc //local directory</code></p></li>
<li><p><code>$HOME/.rootrc //user directory</code></p></li>
<li><p><code>$ROOTSYS/etc/system.rootrc //global ROOT directory</code></p></li>
</ul>
<p>If more than one <code>.rootrc</code> files are found in the search paths above, the options are merged, with precedence local, user, global. The parsing and interpretation of this file is handled by the ROOT class <code>TEnv</code>. Have a look to its documentation if you need such rather advanced features. The file <code>.rootrc</code> defines the location of two rather important files inspected at start-up: <code>rootalias.C</code> and <code>rootlogon.C</code>. They can contain code that needs to be loaded and executed at ROOT startup. <code>rootalias.C</code> is only loaded and best used to define some often used functions. <code>rootlogon.C</code> contains code that will be executed at startup: this file is extremely useful for example to pre-load a custom style for the plots created with ROOT. This is done most easily by creating a new <code>TStyle</code> object with your preferred settings, as described in the class reference guide, and then use the command <code>gROOT-&gt;SetStyle("MyStyleName");</code> to make this new style definition the default one. As an example, have a look in the file <code>rootlogon.C</code> coming with this tutorial. Another relevant file is <code>rootlogoff.C</code> that it called when the session is finished.</p>
<h3 id="root-command-history"><span class="header-section-number">2.8.3</span> ROOT command history</h3>
<p>Every command typed at the ROOT prompt is stored in a file <code>.root_hist</code> in your home directory. ROOT uses this file to allow for navigation in the command history with the up-arrow and down-arrow keys. It is also convenient to extract successful ROOT commands with the help of a text editor for use in your own macros.</p>
<h3 id="root-global-pointers"><span class="header-section-number">2.8.4</span> ROOT Global Pointers</h3>
<p>All global pointers in ROOT begin with a small “g”. Some of them were already implicitly introduced (for example in the section <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#configure-root-at-start-up">Configure ROOT at start-up</a>). The most important among them are presented in the following:</p>
<ul>
<li><p><strong><a href="http://root.cern.ch/root/htmldoc/TROOT.html">gROOT</a></strong>: the <code>gROOT</code> variable is the entry point to the ROOT system. Technically it is an instance of the <code>TROOT</code> class. Using the <code>gROOT</code> pointer one has access to basically every object created in a ROOT based program. The <code>TROOT</code> object is essentially a container of several lists pointing to the main <code>ROOT</code> objects.</p></li>
<li><p><strong><a href="http://root.cern.ch/root/htmldoc/TStyle.html">gStyle</a></strong>: By default ROOT creates a default style that can be accessed via the <code>gStyle</code> pointer. This class includes functions to set some of the following object attributes.</p>
<ul>
<li>Canvas</li>
<li>Pad</li>
<li>Histogram axis</li>
<li>Lines</li>
<li>Fill areas</li>
<li>Text</li>
<li>Markers</li>
<li>Functions</li>
<li>Histogram Statistics and Titles</li>
<li>etc …</li>
</ul></li>
<li><p><strong><a href="http://root.cern.ch/root/htmldoc/TSystem.html">gSystem</a></strong>: An instance of a base class defining a generic interface to the underlying Operating System, in our case <code>TUnixSystem</code>.</p></li>
<li><p><strong><a href="http://root.cern.ch/htmldoc/html/TInterpreter.html">gInterpreter</a></strong>: The entry point for the ROOT interpreter. Technically an abstraction level over a singleton instance of <code>TCling</code>.</p></li>
</ul>
<p>At this point you have already learnt quite a bit about some basic features of ROOT.</p>
<p><strong><em>Please move on to become an expert!</em></strong></p>
<h1 id="root-macros"><span class="header-section-number">3</span> ROOT Macros</h1>
<p>You know how other books go on and on about programming fundamentals and finally work up to building a complete, working program ? Let’s skip all that. In this guide, we will describe macros executed by the ROOT C++ interpreter Cling.</p>
<p>It is relatively easy to compile a macro, either as a pre-compiled library to load into ROOT, or as a stand-alone application, by adding some include statements for header file or some “dressing code” to any macro.</p>
<h2 id="general-remarks-on-root-macros"><span class="header-section-number">3.1</span> General Remarks on ROOT macros</h2>
<p>If you have a number of lines which you were able to execute at the ROOT prompt, they can be turned into a ROOT macro by giving them a name which corresponds to the file name without extension. The general structure for a macro stored in file <code>MacroName.C</code> is</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="dt">void</span> MacroName() {</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">        &lt;          ...</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">          your lines of C++ code</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">                   ...             &gt;</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">}</a></code></pre></div>
<p>The macro is executed by typing</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb15-1" data-line-number="1"> &gt; root MacroName.C</a></code></pre></div>
<p>at the system prompt, or executed using <code>.x</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb16-1" data-line-number="1"> &gt; root</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"> root [<span class="dv">0</span>] .x MacroName.C</a></code></pre></div>
<p>at the ROOT prompt. or it can be loaded into a ROOT session and then be executed by typing</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb17-1" data-line-number="1">root [<span class="dv">0</span>].L MacroName.C</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">root [<span class="dv">1</span>] MacroName();</a></code></pre></div>
<p>at the ROOT prompt. Note that more than one macro can be loaded this way, as each macro has a unique name in the ROOT name space. A small set of options can help making your plot nicer.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb18-1" data-line-number="1">gROOT-&gt;SetStyle(<span class="st">"Plain"</span>);   <span class="co">// set plain TStyle</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">gStyle-&gt;SetOptStat(<span class="dv">111111</span>); <span class="co">// draw statistics on plots,</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">                            <span class="co">// (0) for no output</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4">gStyle-&gt;SetOptFit(<span class="dv">1111</span>);    <span class="co">// draw fit results on plot,</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5">                            <span class="co">// (0) for no ouput</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">gStyle-&gt;SetPalette(<span class="dv">57</span>);     <span class="co">// set color map</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7">gStyle-&gt;SetOptTitle(<span class="dv">0</span>);     <span class="co">// suppress title box</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8">   ...</a></code></pre></div>
<p>Next, you should create a canvas for graphical output, with size, subdivisions and format suitable to your needs, see documentation of class <code>TCanvas</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb19-1" data-line-number="1">TCanvas c1(<span class="st">"c1"</span>,<span class="st">"&lt;Title&gt;"</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">400</span>,<span class="dv">300</span>); <span class="co">// create a canvas, specify position and size in pixels</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">c1.Divide(<span class="dv">2</span>,<span class="dv">2</span>); <span class="co">//set subdivisions, called pads</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3">c1.cd(<span class="dv">1</span>); <span class="co">//change to pad 1 of canvas c1</span></a></code></pre></div>
<p>These parts of a well-written macro are pretty standard, and you should remember to include pieces of code like in the examples above to make sure your plots always look as you had intended.</p>
<p>Below, in section <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#interpretation-and-compilation">Interpretation and Compilation</a>, some more code fragments will be shown, allowing you to use the system compiler to compile macros for more efficient execution, or turn macros into stand-alone applications linked against the ROOT libraries.</p>
<h2 id="a-more-complete-example"><span class="header-section-number">3.2</span> A more complete example</h2>
<p>Let us now look at a rather complete example of a typical task in data analysis, a macro that constructs a graph with errors, fits a (linear) model to it and saves it as an image. To run this macro, simply type in the shell:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb20-1" data-line-number="1"> &gt; root macro1.C</a></code></pre></div>
<p>The code is built around the ROOT class <code>TGraphErrors</code>, which was already introduced previously. Have a look at it in the class reference guide, where you will also find further examples. The macro shown below uses additional classes, <code>TF1</code> to define a function, <code>TCanvas</code> to define size and properties of the window used for our plot, and <code>TLegend</code> to add a nice legend. For the moment, ignore the commented include statements for header files, they will only become important at the end in section <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#interpretation-and-compilation">Interpretation and Compilation</a>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">// Builds a graph with errors, displays it and saves it as</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">// image. First, include some header files</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="co">// (not necessary for Cling)</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="pp">#include </span><span class="im">"TCanvas.h"</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="pp">#include </span><span class="im">"TROOT.h"</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="pp">#include </span><span class="im">"TGraphErrors.h"</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="pp">#include </span><span class="im">"TF1.h"</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="pp">#include </span><span class="im">"TLegend.h"</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="pp">#include </span><span class="im">"TArrow.h"</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="pp">#include </span><span class="im">"TLatex.h"</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12"></a>
<a class="sourceLine" id="cb21-13" data-line-number="13"><span class="dt">void</span> macro1(){</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">    <span class="co">// The values and the errors on the Y axis</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15">    <span class="at">const</span> <span class="dt">int</span> n_points=<span class="dv">10</span>;</a>
<a class="sourceLine" id="cb21-16" data-line-number="16">    <span class="dt">double</span> x_vals[n_points]=</a>
<a class="sourceLine" id="cb21-17" data-line-number="17">            {<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>};</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">    <span class="dt">double</span> y_vals[n_points]=</a>
<a class="sourceLine" id="cb21-19" data-line-number="19">            {<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">14</span>,<span class="dv">20</span>,<span class="dv">22</span>,<span class="dv">24</span>,<span class="dv">35</span>,<span class="dv">45</span>,<span class="dv">44</span>,<span class="dv">53</span>};</a>
<a class="sourceLine" id="cb21-20" data-line-number="20">    <span class="dt">double</span> y_errs[n_points]=</a>
<a class="sourceLine" id="cb21-21" data-line-number="21">            {<span class="dv">5</span>,<span class="dv">5</span>,<span class="fl">4.7</span>,<span class="fl">4.5</span>,<span class="fl">4.2</span>,<span class="fl">5.1</span>,<span class="fl">2.9</span>,<span class="fl">4.1</span>,<span class="fl">4.8</span>,<span class="fl">5.43</span>};</a>
<a class="sourceLine" id="cb21-22" data-line-number="22"></a>
<a class="sourceLine" id="cb21-23" data-line-number="23">    <span class="co">// Instance of the graph</span></a>
<a class="sourceLine" id="cb21-24" data-line-number="24">    TGraphErrors graph(n_points,x_vals,y_vals,<span class="kw">nullptr</span>,y_errs);</a>
<a class="sourceLine" id="cb21-25" data-line-number="25">    graph.SetTitle(<span class="st">"Measurement XYZ;lenght [cm];Arb.Units"</span>);</a>
<a class="sourceLine" id="cb21-26" data-line-number="26"></a>
<a class="sourceLine" id="cb21-27" data-line-number="27">    <span class="co">// Make the plot estetically better</span></a>
<a class="sourceLine" id="cb21-28" data-line-number="28">    graph.SetMarkerStyle(kOpenCircle);</a>
<a class="sourceLine" id="cb21-29" data-line-number="29">    graph.SetMarkerColor(kBlue);</a>
<a class="sourceLine" id="cb21-30" data-line-number="30">    graph.SetLineColor(kBlue);</a>
<a class="sourceLine" id="cb21-31" data-line-number="31"></a>
<a class="sourceLine" id="cb21-32" data-line-number="32">    <span class="co">// The canvas on which we'll draw the graph</span></a>
<a class="sourceLine" id="cb21-33" data-line-number="33">    <span class="kw">auto</span>  mycanvas = <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb21-34" data-line-number="34"></a>
<a class="sourceLine" id="cb21-35" data-line-number="35">    <span class="co">// Draw the graph !</span></a>
<a class="sourceLine" id="cb21-36" data-line-number="36">    graph.DrawClone(<span class="st">"APE"</span>);</a>
<a class="sourceLine" id="cb21-37" data-line-number="37"></a>
<a class="sourceLine" id="cb21-38" data-line-number="38">    <span class="co">// Define a linear function</span></a>
<a class="sourceLine" id="cb21-39" data-line-number="39">    TF1 f(<span class="st">"Linear law"</span>,<span class="st">"[0]+x*[1]"</span>,.<span class="dv">5</span>,<span class="fl">10.5</span>);</a>
<a class="sourceLine" id="cb21-40" data-line-number="40">    <span class="co">// Let's make the function line nicer</span></a>
<a class="sourceLine" id="cb21-41" data-line-number="41">    f.SetLineColor(kRed); f.SetLineStyle(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb21-42" data-line-number="42">    <span class="co">// Fit it to the graph and draw it</span></a>
<a class="sourceLine" id="cb21-43" data-line-number="43">    graph.Fit(&amp;f);</a>
<a class="sourceLine" id="cb21-44" data-line-number="44">    f.DrawClone(<span class="st">"Same"</span>);</a>
<a class="sourceLine" id="cb21-45" data-line-number="45"></a>
<a class="sourceLine" id="cb21-46" data-line-number="46">    <span class="co">// Build and Draw a legend</span></a>
<a class="sourceLine" id="cb21-47" data-line-number="47">    TLegend leg(.<span class="dv">1</span>,.<span class="dv">7</span>,.<span class="dv">3</span>,.<span class="dv">9</span>,<span class="st">"Lab. Lesson 1"</span>);</a>
<a class="sourceLine" id="cb21-48" data-line-number="48">    leg.SetFillColor(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb21-49" data-line-number="49">    graph.SetFillColor(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb21-50" data-line-number="50">    leg.AddEntry(&amp;graph,<span class="st">"Exp. Points"</span>);</a>
<a class="sourceLine" id="cb21-51" data-line-number="51">    leg.AddEntry(&amp;f,<span class="st">"Th. Law"</span>);</a>
<a class="sourceLine" id="cb21-52" data-line-number="52">    leg.DrawClone(<span class="st">"Same"</span>);</a>
<a class="sourceLine" id="cb21-53" data-line-number="53"></a>
<a class="sourceLine" id="cb21-54" data-line-number="54">    <span class="co">// Draw an arrow on the canvas</span></a>
<a class="sourceLine" id="cb21-55" data-line-number="55">    TArrow arrow(<span class="dv">8</span>,<span class="dv">8</span>,<span class="fl">6.2</span>,<span class="dv">23</span>,<span class="fl">0.02</span>,<span class="st">"|&gt;"</span>);</a>
<a class="sourceLine" id="cb21-56" data-line-number="56">    arrow.SetLineWidth(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb21-57" data-line-number="57">    arrow.DrawClone();</a>
<a class="sourceLine" id="cb21-58" data-line-number="58"></a>
<a class="sourceLine" id="cb21-59" data-line-number="59">    <span class="co">// Add some text to the plot</span></a>
<a class="sourceLine" id="cb21-60" data-line-number="60">    TLatex text(<span class="fl">8.2</span>,<span class="fl">7.5</span>,<span class="st">"#splitline{Maximum}{Deviation}"</span>);</a>
<a class="sourceLine" id="cb21-61" data-line-number="61">    text.DrawClone();</a>
<a class="sourceLine" id="cb21-62" data-line-number="62"></a>
<a class="sourceLine" id="cb21-63" data-line-number="63">    mycanvas-&gt;Print(<span class="st">"graph_with_law.pdf"</span>);</a>
<a class="sourceLine" id="cb21-64" data-line-number="64">}</a>
<a class="sourceLine" id="cb21-65" data-line-number="65"></a>
<a class="sourceLine" id="cb21-66" data-line-number="66"><span class="dt">int</span> main(){</a>
<a class="sourceLine" id="cb21-67" data-line-number="67">    macro1();</a>
<a class="sourceLine" id="cb21-68" data-line-number="68">    }</a></code></pre></div>
<p>Let’s comment it in detail:</p>
<ul>
<li><p>Line <em>13</em>: the name of the principal function (it plays the role of the “main” function in compiled programs) in the macro file. It has to be the same as the file name without extension.</p></li>
<li><p>Line <em>24-25</em>: instance of the <code>TGraphErrors</code> class. The constructor takes the number of points and the pointers to the arrays of x values, y values, x errors (in this case none, represented by the NULL pointer) and y errors. The second line defines in one shot the title of the graph and the titles of the two axes, separated by a “;”.</p></li>
<li><p>Line <em>28-30</em>: These three lines are rather intuitive right ? To understand better the enumerators for colours and styles see the reference for the <code>TColor</code> and <code>TMarker</code> classes.</p></li>
<li><p>Line <em>33</em>: the canvas object that will host the drawn objects. The “memory leak” is intentional, to make the object existing also out of the macro1 scope.</p></li>
<li><p>Line <em>36</em>: the method <em>DrawClone</em> draws a clone of the object on the canvas. It <em>has to be</em> a clone, to survive after the scope of <code>macro1</code>, and be displayed on screen after the end of the macro execution. The string option “APE” stands for:</p>
<ul>
<li><p><em>A</em> imposes the drawing of the Axes.</p></li>
<li><p><em>P</em> imposes the drawing of the graph’s markers.</p></li>
<li><p><em>E</em> imposes the drawing of the graph’s error bars.</p></li>
</ul></li>
<li><p>Line <em>39</em>: define a mathematical function. There are several ways to accomplish this, but in this case the constructor accepts the name of the function, the formula, and the function range.</p></li>
<li><p>Line <em>41</em>: maquillage. Try to give a look to the line styles at your disposal visiting the documentation of the <code>TLine</code> class.</p></li>
<li><p>Line <em>43</em>: fits the <em>f</em> function to the graph, observe that the pointer is passed. It is more interesting to look at the output on the screen to see the parameters values and other crucial information that we will learn to read at the end of this guide.</p></li>
<li><p>Line <em>44</em>: again draws the clone of the object on the canvas. The “Same” option avoids the cancellation of the already drawn objects, in our case, the graph. The function <em>f</em> will be drawn using the <em>same</em> axis system defined by the previously drawn graph.</p></li>
<li><p>Line <em>47-52</em>: completes the plot with a legend, represented by a <code>TLegend</code> instance. The constructor takes as parameters the lower left and upper right corners coordinates with respect to the total size of the canvas, assumed to be 1, and the legend header string. You can add to the legend the objects, previously drawn or not drawn, through the <code>addEntry</code> method. Observe how the legend is drawn at the end: looks familiar now, right ?</p></li>
<li><p>Line <em>55-57</em>: defines an arrow with a triangle on the right hand side, a thickness of 2 and draws it.</p></li>
<li><p>Line <em>60-61</em>: interpret a Latex string which hast its lower left corner located in the specified coordinate. The <code>#splitline{}{}</code> construct allows to store multiple lines in the same <code>TLatex</code> object.</p></li>
<li><p>Line <em>63</em>: save the canvas as image. The format is automatically inferred from the file extension (it could have been eps, gif, …).</p></li>
</ul>
<p>Let’s give a look to the obtained plot in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f31">3.1</a>. Beautiful outcome for such a small bunch of lines, isn’t it ?</p>
<p><a name="f31"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/graf_with_law.png" title="f31" alt="Your first plot with data points, a fit of an analytical function, a legend and some additional information in the form of graphics primitives and text. A well formatted plot, clear for the reader is crucial to communicate the relevance of your results to the reader."><figcaption>Your first plot with data points, a fit of an analytical function, a legend and some additional information in the form of graphics primitives and text. A well formatted plot, clear for the reader is crucial to communicate the relevance of your results to the reader.</figcaption>
</figure>
<h2 id="summary-of-visual-effects"><span class="header-section-number">3.3</span> Summary of Visual effects</h2>
<h3 id="colours-and-graph-markers"><span class="header-section-number">3.3.1</span> Colours and Graph Markers</h3>
<p>We have seen that to specify a colour, some identifiers like kWhite, kRed or kBlue can be specified for markers, lines, arrows etc. The complete summary of colours is represented by the ROOT “<a href="http://root.cern.ch/root/htmldoc/TColor.html#C02">colour wheel</a>”. To know more about the full story, refer to the online documentation of <code>TColor</code>.</p>
<p>ROOT provides several <a href="http://root.cern.ch/root/htmldoc/TAttMarker.html#M2">graphics markers</a> types. Select the most suited symbols for your plot among dots, triangles, crosses or stars. An alternative set of names for the markers is available.</p>
<h3 id="arrows-and-lines"><span class="header-section-number">3.3.2</span> Arrows and Lines</h3>
<p>The macro line <em>55</em> shows how to define an arrow and draw it. The class representing arrows is <code>TArrow</code>, which inherits from <code>TLine</code>. The constructors of lines and arrows always contain the coordinates of the endpoints. Arrows also foresee parameters to <a href="http://root.cern.ch/root/htmldoc/TArrow.html">specify their</a> shapes. Do not underestimate the role of lines and arrows in your plots. Since each plot should contain a message, it is convenient to stress it with additional graphics primitives.</p>
<h3 id="text"><span class="header-section-number">3.3.3</span> Text</h3>
<p>Also text plays a fundamental role in making the plots self-explanatory. A possibility to add text in your plot is provided by the <code>TLatex</code> class. The objects of this class are constructed with the coordinates of the bottom-left corner of the text and a string which contains the text itself. The real twist is that ordinary <a href="http://root.cern.ch/root/htmldoc/TLatex.html#L5">Latex mathematical symbols</a> are automatically interpreted, you just need to replace the “\” by a “#”.</p>
<p>If <a href="http://root.cern.ch/root/htmldoc/TLatex.html#L14">“\” is used as control character</a> , then the <a href="http://root.cern.ch/root/htmldoc/TMathText.html">TMathText interface</a> is invoked. It provides the plain TeX syntax and allow to access character’s set like Russian and Japanese.</p>
<h2 id="interpretation-and-compilation"><span class="header-section-number">3.4</span> Interpretation and Compilation</h2>
<p>As you observed, up to now we heavily exploited the capabilities of ROOT for interpreting our code, more than compiling and then executing. This is sufficient for a wide range of applications, but you might have already asked yourself “how can this code be compiled ?”. There are two answers.</p>
<h3 id="compile-a-macro-with-aclic"><span class="header-section-number">3.4.1</span> Compile a Macro with ACLiC</h3>
<p>ACLiC will create for you a compiled dynamic library for your macro, without any effort from your side, except the insertion of the appropriate header files in lines <em>5–11</em>. In this example, they are already included. To generate an object library from the macro code, from inside the interpreter type (please note the “+”):</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb22-1" data-line-number="1"> root [<span class="dv">1</span>] .L macro1.C+</a></code></pre></div>
<p>Once this operation is accomplished, the macro symbols will be available in memory and you will be able to execute it simply by calling from inside the interpreter:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb23-1" data-line-number="1"> root [<span class="dv">2</span>] macro1()</a></code></pre></div>
<h3 id="compile-a-macro-with-the-compiler"><span class="header-section-number">3.4.2</span> Compile a Macro with the Compiler</h3>
<p>A plethora of excellent compilers are available, both free and commercial. We will refer to the <code>GCC</code> compiler in the following. In this case, you have to include the appropriate headers in the code and then exploit the <em>root-config</em> tool for the automatic settings of all the compiler flags. <em>root-config</em> is a script that comes with ROOT; it prints all flags and libraries needed to compile code and link it with the ROOT libraries. In order to make the code executable stand-alone, an entry point for the operating system is needed, in C++ this is the procedure <code>int main();</code>. The easiest way to turn a ROOT macro code into a stand-alone application is to add the following “dressing code” at the end of the macro file. This defines the procedure main, the only purpose of which is to call your macro:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="dt">int</span> main() {</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">  ExampleMacro();</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">  <span class="cf">return</span> <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">}</a></code></pre></div>
<p>To create a stand-alone program from a macro called <code>ExampleMacro.C</code>, simply type</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb25-1" data-line-number="1"> &gt; g++ -o ExampleMacro ExampleMacro.C <span class="er">`</span>root-config --cflags --libs<span class="er">`</span></a></code></pre></div>
<p>and execute it by typing</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb26-1" data-line-number="1">&gt; ./ExampleMacro</a></code></pre></div>
<p>This procedure will, however, not give access to the ROOT graphics, as neither control of mouse or keyboard events nor access to the graphics windows of ROOT is available. If you want your stand-alone application have display graphics output and respond to mouse and keyboard, a slightly more complex piece of code can be used. In the example below, a macro <code>ExampleMacro_GUI</code> is executed by the ROOT class <code>TApplication</code>. As a additional feature, this code example offers access to parameters eventually passed to the program when started from the command line. Here is the code fragment:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="dt">void</span> StandaloneApplication(<span class="dt">int</span> argc, <span class="dt">char</span>** argv) {</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">  <span class="co">// eventually, evaluate the application parameters argc, argv</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">  <span class="co">// ==&gt;&gt; here the ROOT macro is called</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4">  ExampleMacro_GUI();</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">  <span class="co">// This is the standard "main" of C++ starting</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7">  <span class="co">// a ROOT application</span></a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span>** argv) {</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">   TApplication app(<span class="st">"ROOT Application"</span>, &amp;argc, argv);</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">   StandaloneApplication(app.Argc(), app.Argv());</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">   app.Run();</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">   <span class="cf">return</span> <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">}</a></code></pre></div>
<p>Compile the code with</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb28-1" data-line-number="1"> &gt; g++ -o ExampleMacro_GUI ExampleMacro_GUI <span class="er">`</span>root-config --cflags --libs<span class="er">`</span></a></code></pre></div>
<p>and execute the program with</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb29-1" data-line-number="1">&gt; ./ExampleMacro_GUI</a></code></pre></div>
<h1 id="graphs"><span class="header-section-number">4</span> Graphs</h1>
<p>In this Chapter we will learn how to exploit some of the functionalities ROOT provides to display data exploiting the class <code>TGraphErrors</code>, which you already got to know previously.</p>
<h2 id="read-graph-points-from-file"><span class="header-section-number">4.1</span> Read Graph Points from File</h2>
<p>The fastest way in which you can fill a graph with experimental data is to use the constructor which reads data points and their errors from an ASCII file (i.e.&nbsp;standard text) format:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb30-1" data-line-number="1">TGraphErrors(<span class="at">const</span> <span class="dt">char</span> *filename,</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="at">const</span> <span class="dt">char</span> *format=<span class="st">"</span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st">"</span>, <span class="dt">Option_t</span> *option=<span class="st">""</span>);</a></code></pre></div>
<p>The format string can be:</p>
<ul>
<li><p><code>"%lg %lg"</code> read only 2 first columns into X,Y</p></li>
<li><p><code>"%lg %lg %lg"</code> read only 3 first columns into X,Y and EY</p></li>
<li><p><code>"%lg %lg %lg %lg"</code> read only 4 first columns into X,Y,EX,EY</p></li>
</ul>
<p>This approach has the nice feature of allowing the user to reuse the macro for many different data sets. Here is an example of an input file. The nice graphic result shown is produced by the macro below, which reads two such input files and uses different options to display the data points.</p>
<pre><code># Measurement of Friday 26 March
# Experiment 2 Physics Lab

1   6   5
2   12  5
3   14  4.7
4   20  4.5
5   22  4.2
6   24  5.1
7   35  2.9
8   45  4.1
9   44  4.8
10  53  5.43</code></pre>

<p><img src="./A ROOT Guide For Beginners_files/graph_with_expectation.png"></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="co">// Reads the points from a file and produces a simple graph.</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="dt">int</span> macro2(){</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">    <span class="kw">auto</span> c=<span class="kw">new</span> TCanvas();c-&gt;SetGrid();</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">    </a>
<a class="sourceLine" id="cb32-5" data-line-number="5">    TGraphErrors graph_expected(<span class="st">"./macro2_input_expected.txt"</span>,</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">                                <span class="st">"</span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st">"</span>);</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">    graph_expected.SetTitle(</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">       <span class="st">"Measurement XYZ and Expectation;"</span></a>
<a class="sourceLine" id="cb32-9" data-line-number="9">       <span class="st">"lenght [cm];"</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10">       <span class="st">"Arb.Units"</span>);</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">    graph_expected.SetFillColor(kYellow);</a>
<a class="sourceLine" id="cb32-12" data-line-number="12">    graph_expected.DrawClone(<span class="st">"E3AL"</span>); <span class="co">// E3 draws the band</span></a>
<a class="sourceLine" id="cb32-13" data-line-number="13"></a>
<a class="sourceLine" id="cb32-14" data-line-number="14">    TGraphErrors graph(<span class="st">"./macro2_input.txt"</span>,<span class="st">"</span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st"> </span><span class="sc">%lg</span><span class="st">"</span>);</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">    graph.SetMarkerStyle(kCircle);</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">    graph.SetFillColor(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">    graph.DrawClone(<span class="st">"PESame"</span>);</a>
<a class="sourceLine" id="cb32-18" data-line-number="18"></a>
<a class="sourceLine" id="cb32-19" data-line-number="19">    <span class="co">// Draw the Legend</span></a>
<a class="sourceLine" id="cb32-20" data-line-number="20">    TLegend leg(.<span class="dv">1</span>,.<span class="dv">7</span>,.<span class="dv">3</span>,.<span class="dv">9</span>,<span class="st">"Lab. Lesson 2"</span>);</a>
<a class="sourceLine" id="cb32-21" data-line-number="21">    leg.SetFillColor(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb32-22" data-line-number="22">    leg.AddEntry(&amp;graph_expected,<span class="st">"Expected Points"</span>);</a>
<a class="sourceLine" id="cb32-23" data-line-number="23">    leg.AddEntry(&amp;graph,<span class="st">"Measured Points"</span>);</a>
<a class="sourceLine" id="cb32-24" data-line-number="24">    leg.DrawClone(<span class="st">"Same"</span>);</a>
<a class="sourceLine" id="cb32-25" data-line-number="25"></a>
<a class="sourceLine" id="cb32-26" data-line-number="26">    graph.Print();</a>
<a class="sourceLine" id="cb32-27" data-line-number="27">    <span class="cf">return</span> <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb32-28" data-line-number="28">}</a></code></pre></div>
<p>In addition to the inspection of the plot, you can check the actual contents of the graph with the <code>TGraph::Print()</code> method at any time, obtaining a printout of the coordinates of data points on screen. The macro also shows us how to print a coloured band around a graph instead of error bars, quite useful for example to represent the errors of a theoretical prediction.</p>
<h2 id="polar-graphs"><span class="header-section-number">4.2</span> Polar Graphs</h2>
<p>With ROOT you can profit from rather advanced plotting routines, like the ones implemented in the <code>TPolarGraph</code>, a class to draw graphs in polar coordinates. You can see the example macro in the following and the resulting Figure is <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f42">4.2</a>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co">// Builds a polar graph in a square Canvas.</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="dt">void</span> macro3(){</a>
<a class="sourceLine" id="cb33-4" data-line-number="4">    <span class="kw">auto</span> c = <span class="kw">new</span> TCanvas(<span class="st">"myCanvas"</span>,<span class="st">"myCanvas"</span>,<span class="dv">600</span>,<span class="dv">600</span>);</a>
<a class="sourceLine" id="cb33-5" data-line-number="5">    <span class="dt">Double_t</span> rmin=<span class="fl">0.</span>;</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">    <span class="dt">Double_t</span> rmax=TMath::Pi()*<span class="fl">6.</span>;</a>
<a class="sourceLine" id="cb33-7" data-line-number="7">    <span class="at">const</span> <span class="dt">Int_t</span> npoints=<span class="dv">1000</span>;</a>
<a class="sourceLine" id="cb33-8" data-line-number="8">    <span class="dt">Double_t</span> r[npoints];</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">    <span class="dt">Double_t</span> theta[npoints];</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">    <span class="cf">for</span> (<span class="dt">Int_t</span> ipt = <span class="dv">0</span>; ipt &lt; npoints; ipt++) {</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">        r[ipt] = ipt*(rmax-rmin)/npoints+rmin;</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">        theta[ipt] = TMath::Sin(r[ipt]);</a>
<a class="sourceLine" id="cb33-13" data-line-number="13">    }</a>
<a class="sourceLine" id="cb33-14" data-line-number="14">    TGraphPolar grP1 (npoints,r,theta);</a>
<a class="sourceLine" id="cb33-15" data-line-number="15">    grP1.SetTitle(<span class="st">"A Fan"</span>);</a>
<a class="sourceLine" id="cb33-16" data-line-number="16">    grP1.SetLineWidth(<span class="dv">3</span>);</a>
<a class="sourceLine" id="cb33-17" data-line-number="17">    grP1.SetLineColor(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb33-18" data-line-number="18">    grP1.DrawClone(<span class="st">"L"</span>);</a>
<a class="sourceLine" id="cb33-19" data-line-number="19">}</a></code></pre></div>
<p>A new element was added on line 4, the size of the canvas: it is sometimes optically better to show plots in specific canvas sizes.</p>
<p><a name="f42"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/polar_graph.png" title="f42" alt="The graph of a fan obtained with ROOT."><figcaption>The graph of a fan obtained with ROOT.</figcaption>
</figure>
<h2 id="d-graphs"><span class="header-section-number">4.3</span> 2D Graphs</h2>
<p>Under specific circumstances, it might be useful to plot some quantities versus two variables, therefore creating a bi-dimensional graph. Of course ROOT can help you in this task, with the <code>TGraph2DErrors</code> class. The following macro produces a bi-dimensional graph representing a hypothetical measurement, fits a bi-dimensional function to it and draws it together with its x and y projections. Some points of the code will be explained in detail. This time, the graph is populated with data points using random numbers, introducing a new and very important ingredient, the ROOT <code>TRandom3</code> random number generator using the Mersenne Twister algorithm <span class="citation" data-cites="MersenneTwister">(Matsumoto 1997)</span>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="co">// Create, Draw and fit a TGraph2DErrors</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="dt">void</span> macro4(){</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">   gStyle-&gt;SetPalette(kBird);</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">   <span class="at">const</span> <span class="dt">double</span> e = <span class="fl">0.3</span>;</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">   <span class="at">const</span> <span class="dt">int</span> nd = <span class="dv">500</span>;</a>
<a class="sourceLine" id="cb34-6" data-line-number="6"></a>
<a class="sourceLine" id="cb34-7" data-line-number="7">   TRandom3 my_random_generator;</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">   TF2 f2(<span class="st">"f2"</span>,</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">          <span class="st">"1000*(([0]*sin(x)/x)*([1]*sin(y)/y))+200"</span>,</a>
<a class="sourceLine" id="cb34-10" data-line-number="10">          <span class="dv">-6</span>,<span class="dv">6</span>,<span class="dv">-6</span>,<span class="dv">6</span>);</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">   f2.SetParameters(<span class="dv">1</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">   TGraph2DErrors dte(nd);</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">   <span class="co">// Fill the 2D graph</span></a>
<a class="sourceLine" id="cb34-14" data-line-number="14">   <span class="dt">double</span> rnd, x, y, z, ex, ey, ez;</a>
<a class="sourceLine" id="cb34-15" data-line-number="15">   <span class="cf">for</span> (<span class="dt">Int_t</span> i=<span class="dv">0</span>; i&lt;nd; i++) {</a>
<a class="sourceLine" id="cb34-16" data-line-number="16">      f2.GetRandom2(x,y);</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">      <span class="co">// A random number in [-e,e]</span></a>
<a class="sourceLine" id="cb34-18" data-line-number="18">      rnd = my_random_generator.Uniform(-e,e);</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">      z = f2.Eval(x,y)*(<span class="dv">1</span>+rnd);</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">      dte.SetPoint(i,x,y,z);</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">      ex = <span class="fl">0.05</span>*my_random_generator.Uniform();</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">      ey = <span class="fl">0.05</span>*my_random_generator.Uniform();</a>
<a class="sourceLine" id="cb34-23" data-line-number="23">      ez = fabs(z*rnd);</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">      dte.SetPointError(i,ex,ey,ez);</a>
<a class="sourceLine" id="cb34-25" data-line-number="25">   }</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">   <span class="co">// Fit function to generated data</span></a>
<a class="sourceLine" id="cb34-27" data-line-number="27">   f2.SetParameters(<span class="fl">0.7</span>,<span class="fl">1.5</span>);  <span class="co">// set initial values for fit</span></a>
<a class="sourceLine" id="cb34-28" data-line-number="28">   f2.SetTitle(<span class="st">"Fitted 2D function"</span>);</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">   dte.Fit(&amp;f2);</a>
<a class="sourceLine" id="cb34-30" data-line-number="30">   <span class="co">// Plot the result</span></a>
<a class="sourceLine" id="cb34-31" data-line-number="31">   <span class="kw">auto</span> c1 = <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb34-32" data-line-number="32">   f2.SetLineWidth(<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb34-33" data-line-number="33">   f2.SetLineColor(kBlue<span class="dv">-5</span>);</a>
<a class="sourceLine" id="cb34-34" data-line-number="34">   TF2   *f2c = (TF2*)f2.DrawClone(<span class="st">"Surf1"</span>);</a>
<a class="sourceLine" id="cb34-35" data-line-number="35">   TAxis *Xaxis = f2c-&gt;GetXaxis();</a>
<a class="sourceLine" id="cb34-36" data-line-number="36">   TAxis *Yaxis = f2c-&gt;GetYaxis();</a>
<a class="sourceLine" id="cb34-37" data-line-number="37">   TAxis *Zaxis = f2c-&gt;GetZaxis();</a>
<a class="sourceLine" id="cb34-38" data-line-number="38">   Xaxis-&gt;SetTitle(<span class="st">"X Title"</span>); Xaxis-&gt;SetTitleOffset(<span class="fl">1.5</span>);</a>
<a class="sourceLine" id="cb34-39" data-line-number="39">   Yaxis-&gt;SetTitle(<span class="st">"Y Title"</span>); Yaxis-&gt;SetTitleOffset(<span class="fl">1.5</span>);</a>
<a class="sourceLine" id="cb34-40" data-line-number="40">   Zaxis-&gt;SetTitle(<span class="st">"Z Title"</span>); Zaxis-&gt;SetTitleOffset(<span class="fl">1.5</span>);</a>
<a class="sourceLine" id="cb34-41" data-line-number="41">   dte.DrawClone(<span class="st">"P0 Same"</span>);</a>
<a class="sourceLine" id="cb34-42" data-line-number="42">   <span class="co">// Make the x and y projections</span></a>
<a class="sourceLine" id="cb34-43" data-line-number="43">   <span class="kw">auto</span> c_p= <span class="kw">new</span> TCanvas(<span class="st">"ProjCan"</span>,</a>
<a class="sourceLine" id="cb34-44" data-line-number="44">                         <span class="st">"The Projections"</span>,<span class="dv">1000</span>,<span class="dv">400</span>);</a>
<a class="sourceLine" id="cb34-45" data-line-number="45">   c_p-&gt;Divide(<span class="dv">2</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb34-46" data-line-number="46">   c_p-&gt;cd(<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb34-47" data-line-number="47">   dte.Project(<span class="st">"x"</span>)-&gt;Draw();</a>
<a class="sourceLine" id="cb34-48" data-line-number="48">   c_p-&gt;cd(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb34-49" data-line-number="49">   dte.Project(<span class="st">"y"</span>)-&gt;Draw();</a>
<a class="sourceLine" id="cb34-50" data-line-number="50">}</a></code></pre></div>
<p>Let’s go through the code, step by step to understand what is going on:</p>
<ul>
<li><p>Line <em>3</em>: This sets the palette colour code to a much nicer one than the default. Comment this line to give it a try. <a href="https://root.cern.ch/drupal/content/rainbow-color-map">This article</a> gives more details about colour map choice.</p></li>
<li><p>Line <em>7</em>: The instance of the random generator. You can then draw out of this instance random numbers distributed according to different probability density functions, like the Uniform one at lines <em>27-29</em>. See the on-line documentation to appreciate the full power of this ROOT feature.</p></li>
<li><p>Line <em>8</em>: You are already familiar with the <code>TF1</code> class. This is its two-dimensional version. At line <em>16</em> two random numbers distributed according to the <code>TF2</code> formula are drawn with the method <code>TF2::GetRandom2(double&amp; a, double&amp;b)</code>.</p></li>
<li><p>Line <em>27-29</em>: Fitting a 2-dimensional function just works like in the one-dimensional case, i.e.&nbsp;initialisation of parameters and calling of the <code>Fit()</code> method.</p></li>
<li><p>Line <em>34</em>: The <em>Surf1</em> option draws the <code>TF2</code> objects (but also bi-dimensional histograms) as coloured surfaces with a wire-frame on three-dimensional canvases. See Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f43">4.3</a>.</p></li>
<li><p>Line <em>35-40</em>: Retrieve the axis pointer and define the axis titles.</p></li>
<li><p>Line <em>41</em>: Draw the cloud of points on top of the coloured surface.</p></li>
<li><p>Line <em>43-49</em>: Here you learn how to create a canvas, partition it in two sub-pads and access them. It is very handy to show multiple plots in the same window or image.</p></li>
</ul>
<p><a name="f43"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/fitted2dFunction.png" title="f43" alt="A dataset fitted with a bidimensional function visualised as a colored surface."><figcaption>A dataset fitted with a bidimensional function visualised as a colored surface.</figcaption>
</figure>

<h2 id="multiple-graphs"><span class="header-section-number">4.4</span> Multiple graphs</h2>
<p>The class <code>TMultigraph</code> allows to manipulate a set of graphs as a single entity. It is a collection of <code>TGraph</code> (or derived) objects. When drawn, the X and Y axis ranges are automatically computed such as all the graphs will be visible.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="co">// Manage several graphs as a single entity.</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="dt">void</span> multigraph(){</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">   TCanvas *c1 = <span class="kw">new</span> TCanvas(<span class="st">"c1"</span>,<span class="st">"multigraph"</span>,<span class="dv">700</span>,<span class="dv">500</span>);</a>
<a class="sourceLine" id="cb35-4" data-line-number="4">   c1-&gt;SetGrid();</a>
<a class="sourceLine" id="cb35-5" data-line-number="5"></a>
<a class="sourceLine" id="cb35-6" data-line-number="6">   TMultiGraph *mg = <span class="kw">new</span> TMultiGraph();</a>
<a class="sourceLine" id="cb35-7" data-line-number="7"></a>
<a class="sourceLine" id="cb35-8" data-line-number="8">   <span class="co">// create first graph</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9">   <span class="at">const</span> <span class="dt">Int_t</span> n1 = <span class="dv">10</span>;</a>
<a class="sourceLine" id="cb35-10" data-line-number="10">   <span class="dt">Double_t</span> px1[] = {<span class="dv">-0</span><span class="fl">.1</span>, <span class="fl">0.05</span>, <span class="fl">0.25</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.61</span>,<span class="fl">0.7</span>,<span class="fl">0.85</span>,<span class="fl">0.89</span>,<span class="fl">0.95</span>};</a>
<a class="sourceLine" id="cb35-11" data-line-number="11">   <span class="dt">Double_t</span> py1[] = {<span class="dv">-1</span>,<span class="fl">2.9</span>,<span class="fl">5.6</span>,<span class="fl">7.4</span>,<span class="dv">9</span>,<span class="fl">9.6</span>,<span class="fl">8.7</span>,<span class="fl">6.3</span>,<span class="fl">4.5</span>,<span class="dv">1</span>};</a>
<a class="sourceLine" id="cb35-12" data-line-number="12">   <span class="dt">Double_t</span> ex1[] = {.<span class="bn">05</span>,.<span class="dv">1</span>,.<span class="bn">07</span>,.<span class="bn">07</span>,.<span class="bn">04</span>,.<span class="bn">05</span>,.<span class="bn">06</span>,.<span class="bn">07</span>,.<span class="er">08</span>,.<span class="bn">05</span>};</a>
<a class="sourceLine" id="cb35-13" data-line-number="13">   <span class="dt">Double_t</span> ey1[] = {.<span class="dv">8</span>,.<span class="dv">7</span>,.<span class="dv">6</span>,.<span class="dv">5</span>,.<span class="dv">4</span>,.<span class="dv">4</span>,.<span class="dv">5</span>,.<span class="dv">6</span>,.<span class="dv">7</span>,.<span class="dv">8</span>};</a>
<a class="sourceLine" id="cb35-14" data-line-number="14">   TGraphErrors *gr1 = <span class="kw">new</span> TGraphErrors(n1,px1,py1,ex1,ey1);</a>
<a class="sourceLine" id="cb35-15" data-line-number="15">   gr1-&gt;SetMarkerColor(kBlue);</a>
<a class="sourceLine" id="cb35-16" data-line-number="16">   gr1-&gt;SetMarkerStyle(<span class="dv">21</span>);</a>
<a class="sourceLine" id="cb35-17" data-line-number="17">   mg-&gt;Add(gr1);</a>
<a class="sourceLine" id="cb35-18" data-line-number="18"></a>
<a class="sourceLine" id="cb35-19" data-line-number="19">   <span class="co">// create second graph</span></a>
<a class="sourceLine" id="cb35-20" data-line-number="20">   <span class="at">const</span> <span class="dt">Int_t</span> n2 = <span class="dv">10</span>;</a>
<a class="sourceLine" id="cb35-21" data-line-number="21">   <span class="dt">Float_t</span> x2[]  = {<span class="dv">-0</span><span class="fl">.28</span>, <span class="fl">0.005</span>, <span class="fl">0.19</span>, <span class="fl">0.29</span>, <span class="fl">0.45</span>, <span class="fl">0.56</span>,<span class="fl">0.65</span>,<span class="fl">0.80</span>,<span class="fl">0.90</span>,<span class="fl">1.01</span>};</a>
<a class="sourceLine" id="cb35-22" data-line-number="22">   <span class="dt">Float_t</span> y2[]  = {<span class="fl">2.1</span>,<span class="fl">3.86</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="fl">10.55</span>,<span class="fl">9.64</span>,<span class="fl">7.26</span>,<span class="fl">5.42</span>,<span class="dv">2</span>};</a>
<a class="sourceLine" id="cb35-23" data-line-number="23">   <span class="dt">Float_t</span> ex2[] = {.<span class="bn">04</span>,.<span class="dv">12</span>,.<span class="er">08</span>,.<span class="bn">06</span>,.<span class="bn">05</span>,.<span class="bn">04</span>,.<span class="bn">07</span>,.<span class="bn">06</span>,.<span class="er">08</span>,.<span class="bn">04</span>};</a>
<a class="sourceLine" id="cb35-24" data-line-number="24">   <span class="dt">Float_t</span> ey2[] = {.<span class="dv">6</span>,.<span class="dv">8</span>,.<span class="dv">7</span>,.<span class="dv">4</span>,.<span class="dv">3</span>,.<span class="dv">3</span>,.<span class="dv">4</span>,.<span class="dv">5</span>,.<span class="dv">6</span>,.<span class="dv">7</span>};</a>
<a class="sourceLine" id="cb35-25" data-line-number="25">   TGraphErrors *gr2 = <span class="kw">new</span> TGraphErrors(n2,x2,y2,ex2,ey2);</a>
<a class="sourceLine" id="cb35-26" data-line-number="26">   gr2-&gt;SetMarkerColor(kRed);</a>
<a class="sourceLine" id="cb35-27" data-line-number="27">   gr2-&gt;SetMarkerStyle(<span class="dv">20</span>);</a>
<a class="sourceLine" id="cb35-28" data-line-number="28">   mg-&gt;Add(gr2);</a>
<a class="sourceLine" id="cb35-29" data-line-number="29"></a>
<a class="sourceLine" id="cb35-30" data-line-number="30">   mg-&gt;Draw(<span class="st">"apl"</span>);</a>
<a class="sourceLine" id="cb35-31" data-line-number="31">   mg-&gt;GetXaxis()-&gt;SetTitle(<span class="st">"X values"</span>);</a>
<a class="sourceLine" id="cb35-32" data-line-number="32">   mg-&gt;GetYaxis()-&gt;SetTitle(<span class="st">"Y values"</span>);</a>
<a class="sourceLine" id="cb35-33" data-line-number="33"></a>
<a class="sourceLine" id="cb35-34" data-line-number="34">   gPad-&gt;Update();</a>
<a class="sourceLine" id="cb35-35" data-line-number="35">   gPad-&gt;Modified();</a>
<a class="sourceLine" id="cb35-36" data-line-number="36">}</a></code></pre></div>
<ul>
<li><p>Line <em>6</em> creates the multigraph.</p></li>
<li><p>Line <em>9-28</em>: create two graphs with errors and add them in the multigraph.</p></li>
<li><p>Line <em>30-32</em>: draw the multigraph. The axis limits are computed automatically to make sure all the graphs’ points will be in range.</p></li>
</ul>
<p><a name="f44"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/multigraph.png" title="f44" alt="A set of graphs grouped in a multigraph."><figcaption>A set of graphs grouped in a multigraph.</figcaption>
</figure>
<p>[^3] https://root.cern.ch/drupal/content/rainbow-color-map</p>
<h1 id="histograms"><span class="header-section-number">5</span> Histograms</h1>
<p>Histograms play a fundamental role in any type of physics analysis, not only to visualise measurements but being a powerful form of data reduction. ROOT offers many classes that represent histograms, all inheriting from the <code>TH1</code> class. We will focus in this chapter on uni- and bi- dimensional histograms the bin contents of which are represented by floating point numbers,<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> the <code>TH1F</code> and <code>TH2F</code> classes respectively.</p>
<h2 id="your-first-histogram"><span class="header-section-number">5.1</span> Your First Histogram</h2>
<p>Let’s suppose you want to measure the counts of a Geiger detector located in proximity of a radioactive source in a given time interval. This would give you an idea of the activity of your source. The count distribution in this case is a Poisson distribution. Let’s see how operatively you can fill and draw a histogram with the following example macro.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co">// Create, Fill and draw an Histogram which reproduces the</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="co">// counts of a scaler linked to a Geiger counter.</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="dt">void</span> macro5(){</a>
<a class="sourceLine" id="cb36-5" data-line-number="5">    <span class="kw">auto</span> cnt_r_h=<span class="kw">new</span> TH1F(<span class="st">"count_rate"</span>,</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">                <span class="st">"Count Rate;N_{Counts};# occurencies"</span>,</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">                <span class="dv">100</span>, <span class="co">// Number of Bins</span></a>
<a class="sourceLine" id="cb36-8" data-line-number="8">                <span class="fl">-0.5</span>, <span class="co">// Lower X Boundary</span></a>
<a class="sourceLine" id="cb36-9" data-line-number="9">                <span class="fl">15.5</span>); <span class="co">// Upper X Boundary</span></a>
<a class="sourceLine" id="cb36-10" data-line-number="10"></a>
<a class="sourceLine" id="cb36-11" data-line-number="11">    <span class="kw">auto</span> mean_count=<span class="fl">3.6f</span>;</a>
<a class="sourceLine" id="cb36-12" data-line-number="12">    TRandom3 rndgen;</a>
<a class="sourceLine" id="cb36-13" data-line-number="13">    <span class="co">// simulate the measurements</span></a>
<a class="sourceLine" id="cb36-14" data-line-number="14">    <span class="cf">for</span> (<span class="dt">int</span> imeas=<span class="dv">0</span>;imeas&lt;<span class="dv">400</span>;imeas++)</a>
<a class="sourceLine" id="cb36-15" data-line-number="15">        cnt_r_h-&gt;Fill(rndgen.Poisson(mean_count));</a>
<a class="sourceLine" id="cb36-16" data-line-number="16"></a>
<a class="sourceLine" id="cb36-17" data-line-number="17">    <span class="kw">auto</span> c= <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb36-18" data-line-number="18">    cnt_r_h-&gt;Draw();</a>
<a class="sourceLine" id="cb36-19" data-line-number="19"></a>
<a class="sourceLine" id="cb36-20" data-line-number="20">    <span class="kw">auto</span> c_norm= <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb36-21" data-line-number="21">    cnt_r_h-&gt;DrawNormalized();</a>
<a class="sourceLine" id="cb36-22" data-line-number="22"></a>
<a class="sourceLine" id="cb36-23" data-line-number="23">    <span class="co">// Print summary</span></a>
<a class="sourceLine" id="cb36-24" data-line-number="24">    cout &lt;&lt; <span class="st">"Moments of Distribution:</span><span class="sc">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb36-25" data-line-number="25">         &lt;&lt; <span class="st">" - Mean     = "</span> &lt;&lt; cnt_r_h-&gt;GetMean() &lt;&lt; <span class="st">" +- "</span></a>
<a class="sourceLine" id="cb36-26" data-line-number="26">                             &lt;&lt; cnt_r_h-&gt;GetMeanError() &lt;&lt; <span class="st">"</span><span class="sc">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb36-27" data-line-number="27">         &lt;&lt; <span class="st">" - Std Dev  = "</span> &lt;&lt; cnt_r_h-&gt;GetStdDev() &lt;&lt; <span class="st">" +- "</span></a>
<a class="sourceLine" id="cb36-28" data-line-number="28">                             &lt;&lt; cnt_r_h-&gt;GetStdDevError() &lt;&lt; <span class="st">"</span><span class="sc">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb36-29" data-line-number="29">         &lt;&lt; <span class="st">" - Skewness = "</span> &lt;&lt; cnt_r_h-&gt;GetSkewness() &lt;&lt; <span class="st">"</span><span class="sc">\n</span><span class="st">"</span></a>
<a class="sourceLine" id="cb36-30" data-line-number="30">         &lt;&lt; <span class="st">" - Kurtosis = "</span> &lt;&lt; cnt_r_h-&gt;GetKurtosis() &lt;&lt; <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>;</a>
<a class="sourceLine" id="cb36-31" data-line-number="31">}</a></code></pre></div>
<p>Which gives you the following plot (Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f51">5.1</a>):</p>
<p><a name="f51"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/poisson.png" title="f51" alt="The result of a counting (pseudo) experiment. Only bins corresponding to integer values are filled given the discrete nature of the poissonian distribution. "><figcaption>The result of a counting (pseudo) experiment. Only bins corresponding to integer values are filled given the discrete nature of the poissonian distribution. </figcaption>
</figure>
<p>Using histograms is rather simple. The main differences with respect to graphs that emerge from the example are:</p>
<ul>
<li><p>line <em>5</em>: The histograms have a name and a title right from the start, no predefined number of entries but a number of bins and a lower-upper range.</p></li>
<li><p>line <em>15</em>: An entry is stored in the histogram through the <code>TH1F::Fill</code> method.</p></li>
<li><p>line <em>18</em> and <em>21</em>: The histogram can be drawn also normalised, ROOT automatically takes cares of the necessary rescaling.</p></li>
<li><p>line <em>24</em> to <em>30</em>: This small snippet shows how easy it is to access the moments and associated errors of a histogram.</p></li>
</ul>
<h2 id="add-and-divide-histograms"><span class="header-section-number">5.2</span> Add and Divide Histograms</h2>
<p>Quite a large number of operations can be carried out with histograms. The most useful are addition and division. In the following macro we will learn how to manage these procedures within ROOT.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="co">// Divide and add 1D Histograms</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="dt">void</span> format_h(TH1F* h, <span class="dt">int</span> linecolor){</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">    h-&gt;SetLineWidth(<span class="dv">3</span>);</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">    h-&gt;SetLineColor(linecolor);</a>
<a class="sourceLine" id="cb37-6" data-line-number="6">    }</a>
<a class="sourceLine" id="cb37-7" data-line-number="7"></a>
<a class="sourceLine" id="cb37-8" data-line-number="8"><span class="dt">void</span> macro6(){</a>
<a class="sourceLine" id="cb37-9" data-line-number="9"></a>
<a class="sourceLine" id="cb37-10" data-line-number="10">    <span class="kw">auto</span> sig_h=<span class="kw">new</span> TH1F(<span class="st">"sig_h"</span>,<span class="st">"Signal Histo"</span>,<span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">10</span>);</a>
<a class="sourceLine" id="cb37-11" data-line-number="11">    <span class="kw">auto</span> gaus_h1=<span class="kw">new</span> TH1F(<span class="st">"gaus_h1"</span>,<span class="st">"Gauss Histo 1"</span>,<span class="dv">30</span>,<span class="dv">0</span>,<span class="dv">10</span>);</a>
<a class="sourceLine" id="cb37-12" data-line-number="12">    <span class="kw">auto</span> gaus_h2=<span class="kw">new</span> TH1F(<span class="st">"gaus_h2"</span>,<span class="st">"Gauss Histo 2"</span>,<span class="dv">30</span>,<span class="dv">0</span>,<span class="dv">10</span>);</a>
<a class="sourceLine" id="cb37-13" data-line-number="13">    <span class="kw">auto</span> bkg_h=<span class="kw">new</span> TH1F(<span class="st">"exp_h"</span>,<span class="st">"Exponential Histo"</span>,<span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">10</span>);</a>
<a class="sourceLine" id="cb37-14" data-line-number="14"></a>
<a class="sourceLine" id="cb37-15" data-line-number="15">    <span class="co">// simulate the measurements</span></a>
<a class="sourceLine" id="cb37-16" data-line-number="16">    TRandom3 rndgen;</a>
<a class="sourceLine" id="cb37-17" data-line-number="17">    <span class="cf">for</span> (<span class="dt">int</span> imeas=<span class="dv">0</span>;imeas&lt;<span class="dv">4000</span>;imeas++){</a>
<a class="sourceLine" id="cb37-18" data-line-number="18">        bkg_h-&gt;Fill(rndgen.Exp(<span class="dv">4</span>));</a>
<a class="sourceLine" id="cb37-19" data-line-number="19">        <span class="cf">if</span> (imeas%<span class="dv">4</span>==<span class="dv">0</span>) gaus_h1-&gt;Fill(rndgen.Gaus(<span class="dv">5</span>,<span class="dv">2</span>));</a>
<a class="sourceLine" id="cb37-20" data-line-number="20">        <span class="cf">if</span> (imeas%<span class="dv">4</span>==<span class="dv">0</span>) gaus_h2-&gt;Fill(rndgen.Gaus(<span class="dv">5</span>,<span class="dv">2</span>));</a>
<a class="sourceLine" id="cb37-21" data-line-number="21">        <span class="cf">if</span> (imeas%<span class="dv">10</span>==<span class="dv">0</span>)sig_h-&gt;Fill(rndgen.Gaus(<span class="dv">5</span>,.<span class="dv">5</span>));}</a>
<a class="sourceLine" id="cb37-22" data-line-number="22"></a>
<a class="sourceLine" id="cb37-23" data-line-number="23">    <span class="co">// Format Histograms</span></a>
<a class="sourceLine" id="cb37-24" data-line-number="24">    <span class="dt">int</span> i=<span class="dv">0</span>;</a>
<a class="sourceLine" id="cb37-25" data-line-number="25">    <span class="cf">for</span> (<span class="kw">auto</span> hist : {sig_h,bkg_h,gaus_h1,gaus_h2})</a>
<a class="sourceLine" id="cb37-26" data-line-number="26">        format_h(hist,<span class="dv">1</span>+i++);</a>
<a class="sourceLine" id="cb37-27" data-line-number="27"></a>
<a class="sourceLine" id="cb37-28" data-line-number="28">    <span class="co">// Sum</span></a>
<a class="sourceLine" id="cb37-29" data-line-number="29">    <span class="kw">auto</span> sum_h= <span class="kw">new</span> TH1F(*bkg_h);</a>
<a class="sourceLine" id="cb37-30" data-line-number="30">    sum_h-&gt;Add(sig_h,<span class="fl">1.</span>);</a>
<a class="sourceLine" id="cb37-31" data-line-number="31">    sum_h-&gt;SetTitle(<span class="st">"Exponential + Gaussian;X variable;Y variable"</span>);</a>
<a class="sourceLine" id="cb37-32" data-line-number="32">    format_h(sum_h,kBlue);</a>
<a class="sourceLine" id="cb37-33" data-line-number="33"></a>
<a class="sourceLine" id="cb37-34" data-line-number="34">    <span class="kw">auto</span> c_sum= <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb37-35" data-line-number="35">    sum_h-&gt;Draw(<span class="st">"hist"</span>);</a>
<a class="sourceLine" id="cb37-36" data-line-number="36">    bkg_h-&gt;Draw(<span class="st">"SameHist"</span>);</a>
<a class="sourceLine" id="cb37-37" data-line-number="37">    sig_h-&gt;Draw(<span class="st">"SameHist"</span>);</a>
<a class="sourceLine" id="cb37-38" data-line-number="38"></a>
<a class="sourceLine" id="cb37-39" data-line-number="39">    <span class="co">// Divide</span></a>
<a class="sourceLine" id="cb37-40" data-line-number="40">    <span class="kw">auto</span> dividend=<span class="kw">new</span> TH1F(*gaus_h1);</a>
<a class="sourceLine" id="cb37-41" data-line-number="41">    dividend-&gt;Divide(gaus_h2);</a>
<a class="sourceLine" id="cb37-42" data-line-number="42"></a>
<a class="sourceLine" id="cb37-43" data-line-number="43">    <span class="co">// Graphical Maquillage</span></a>
<a class="sourceLine" id="cb37-44" data-line-number="44">    dividend-&gt;SetTitle(<span class="st">";X axis;Gaus Histo 1 / Gaus Histo 2"</span>);</a>
<a class="sourceLine" id="cb37-45" data-line-number="45">    format_h(dividend,kOrange);</a>
<a class="sourceLine" id="cb37-46" data-line-number="46">    gaus_h1-&gt;SetTitle(<span class="st">";;Gaus Histo 1 and Gaus Histo 2"</span>);</a>
<a class="sourceLine" id="cb37-47" data-line-number="47">    gStyle-&gt;SetOptStat(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb37-48" data-line-number="48"></a>
<a class="sourceLine" id="cb37-49" data-line-number="49">    TCanvas* c_divide= <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb37-50" data-line-number="50">    c_divide-&gt;Divide(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb37-51" data-line-number="51">    c_divide-&gt;cd(<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb37-52" data-line-number="52">    c_divide-&gt;GetPad(<span class="dv">1</span>)-&gt;SetRightMargin(.<span class="bn">01</span>);</a>
<a class="sourceLine" id="cb37-53" data-line-number="53">    gaus_h1-&gt;DrawNormalized(<span class="st">"Hist"</span>);</a>
<a class="sourceLine" id="cb37-54" data-line-number="54">    gaus_h2-&gt;DrawNormalized(<span class="st">"HistSame"</span>);</a>
<a class="sourceLine" id="cb37-55" data-line-number="55"></a>
<a class="sourceLine" id="cb37-56" data-line-number="56">    c_divide-&gt;cd(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb37-57" data-line-number="57">    dividend-&gt;GetYaxis()-&gt;SetRangeUser(<span class="dv">0</span>,<span class="fl">2.49</span>);</a>
<a class="sourceLine" id="cb37-58" data-line-number="58">    c_divide-&gt;GetPad(<span class="dv">2</span>)-&gt;SetGridy();</a>
<a class="sourceLine" id="cb37-59" data-line-number="59">    c_divide-&gt;GetPad(<span class="dv">2</span>)-&gt;SetRightMargin(.<span class="bn">01</span>);</a>
<a class="sourceLine" id="cb37-60" data-line-number="60">    dividend-&gt;Draw();</a>
<a class="sourceLine" id="cb37-61" data-line-number="61">}</a></code></pre></div>
<p>The plots that you will obtain are shown in Figures <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f52">5.2</a> and <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f53">5.3</a>.</p>
<p><a name="f52"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/histo_sum.png" title="f52" alt="The sum of two histograms."><figcaption>The sum of two histograms.</figcaption>
</figure>
<p><a name="f53"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/histo_ratio.png" title="f53" alt="The ratio of two histograms."><figcaption>The ratio of two histograms.</figcaption>
</figure>
<p>Some lines now need a bit of clarification:</p>
<ul>
<li><p>line <em>3</em>: Cling, as we know, is also able to interpret more than one function per file. In this case the function simply sets up some parameters to conveniently set the line of histograms.</p></li>
<li><p>line <em>19</em> to <em>21</em>: Some <code>C++</code> syntax for conditional statements is used to fill the histograms with different numbers of entries inside the loop.</p></li>
<li><p>line <em>30</em>: The sum of two histograms. A weight, which can be negative, can be assigned to the added histogram.</p></li>
<li><p>line <em>41</em>: The division of two histograms is rather straightforward.</p></li>
<li><p>line <em>44</em> to <em>62</em>: When you draw two quantities and their ratios, it is much better if all the information is condensed in one single plot. These lines provide a skeleton to perform this operation.</p></li>
</ul>
<h2 id="two-dimensional-histograms"><span class="header-section-number">5.3</span> Two-dimensional Histograms</h2>
<p>Two-dimensional histograms are a very useful tool, for example to inspect correlations between variables. You can exploit the bi-dimensional histogram classes provided by ROOT in a simple way. Let’s see how in this macro:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="co">// Draw a Bidimensional Histogram in many ways</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="co">// together with its profiles and projections</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="dt">void</span> macro7(){</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">   gStyle-&gt;SetPalette(kBird);</a>
<a class="sourceLine" id="cb38-6" data-line-number="6">   gStyle-&gt;SetOptStat(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb38-7" data-line-number="7">   gStyle-&gt;SetOptTitle(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb38-8" data-line-number="8"></a>
<a class="sourceLine" id="cb38-9" data-line-number="9">   <span class="kw">auto</span> bidi_h = <span class="kw">new</span> TH2F(<span class="st">"bidi_h"</span>,<span class="st">"2D Histo;Gaussian Vals;Exp. Vals"</span>,</a>
<a class="sourceLine" id="cb38-10" data-line-number="10">                          <span class="dv">30</span>,<span class="dv">-5</span>,<span class="dv">5</span>,  <span class="co">// X axis</span></a>
<a class="sourceLine" id="cb38-11" data-line-number="11">                          <span class="dv">30</span>,<span class="dv">0</span>,<span class="dv">10</span>); <span class="co">// Y axis</span></a>
<a class="sourceLine" id="cb38-12" data-line-number="12"></a>
<a class="sourceLine" id="cb38-13" data-line-number="13">   TRandom3 rgen;</a>
<a class="sourceLine" id="cb38-14" data-line-number="14">   <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;<span class="dv">500000</span>;i++) {</a>
<a class="sourceLine" id="cb38-15" data-line-number="15">      bidi_h-&gt;Fill(rgen.Gaus(<span class="dv">0</span>,<span class="dv">2</span>),<span class="dv">10</span>-rgen.Exp(<span class="dv">4</span>),.<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb38-16" data-line-number="16">   }</a>
<a class="sourceLine" id="cb38-17" data-line-number="17"></a>
<a class="sourceLine" id="cb38-18" data-line-number="18">   <span class="kw">auto</span> c=<span class="kw">new</span> TCanvas(<span class="st">"Canvas"</span>,<span class="st">"Canvas"</span>,<span class="dv">800</span>,<span class="dv">800</span>);</a>
<a class="sourceLine" id="cb38-19" data-line-number="19">   c-&gt;Divide(<span class="dv">2</span>,<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb38-20" data-line-number="20">   c-&gt;cd(<span class="dv">1</span>); bidi_h-&gt;Draw(<span class="st">"Cont1"</span>);</a>
<a class="sourceLine" id="cb38-21" data-line-number="21">   c-&gt;cd(<span class="dv">2</span>); bidi_h-&gt;Draw(<span class="st">"Colz"</span>);</a>
<a class="sourceLine" id="cb38-22" data-line-number="22">   c-&gt;cd(<span class="dv">3</span>); bidi_h-&gt;Draw(<span class="st">"Lego2"</span>);</a>
<a class="sourceLine" id="cb38-23" data-line-number="23">   c-&gt;cd(<span class="dv">4</span>); bidi_h-&gt;Draw(<span class="st">"Surf3"</span>);</a>
<a class="sourceLine" id="cb38-24" data-line-number="24"></a>
<a class="sourceLine" id="cb38-25" data-line-number="25">   <span class="co">// Profiles and Projections</span></a>
<a class="sourceLine" id="cb38-26" data-line-number="26">   <span class="kw">auto</span> c2=<span class="kw">new</span> TCanvas(<span class="st">"Canvas2"</span>,<span class="st">"Canvas2"</span>,<span class="dv">800</span>,<span class="dv">800</span>);</a>
<a class="sourceLine" id="cb38-27" data-line-number="27">   c2-&gt;Divide(<span class="dv">2</span>,<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb38-28" data-line-number="28">   c2-&gt;cd(<span class="dv">1</span>); bidi_h-&gt;ProjectionX()-&gt;Draw();</a>
<a class="sourceLine" id="cb38-29" data-line-number="29">   c2-&gt;cd(<span class="dv">2</span>); bidi_h-&gt;ProjectionY()-&gt;Draw();</a>
<a class="sourceLine" id="cb38-30" data-line-number="30">   c2-&gt;cd(<span class="dv">3</span>); bidi_h-&gt;ProfileX()-&gt;Draw();</a>
<a class="sourceLine" id="cb38-31" data-line-number="31">   c2-&gt;cd(<span class="dv">4</span>); bidi_h-&gt;ProfileY()-&gt;Draw();</a>
<a class="sourceLine" id="cb38-32" data-line-number="32">}</a></code></pre></div>
<p>Two kinds of plots are provided within the code, the first one containing three-dimensional representations (Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f54">5.4</a>) and the second one projections and profiles (Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f55">5.5</a>) of the bi-dimensional histogram.</p>
<p><a name="f54"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/th2f.png" title="f54" alt="Different ways of representing bi-dimensional histograms."><figcaption>Different ways of representing bi-dimensional histograms.</figcaption>
</figure>
<p><a name="f55"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/proj_and_prof.png" title="f55" alt="The projections and profiles of bi-dimensional histograms."><figcaption>The projections and profiles of bi-dimensional histograms.</figcaption>
</figure>
<p>When a projection is performed along the x (y) direction, for every bin along the x (y) axis, all bin contents along the y (x) axis are summed up (upper the plots of Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f55">5.5</a>). When a profile is performed along the x (y) direction, for every bin along the x (y) axis, the average of all the bin contents along the y (x) is calculated together with their RMS and displayed as a symbol with error bar (lower two plots of Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f55">5.5</a>).</p>
<p>Correlations between the variables are quantified by the methods <code>Double_t GetCovariance()</code> and <code>Double_t GetCorrelationFactor()</code>.</p>

<h2 id="multiple-histograms"><span class="header-section-number">5.4</span> Multiple histograms</h2>
<p>The class <code>THStack</code> allows to manipulate a set of histograms as a single entity. It is a collection of <code>TH1</code> (or derived) objects. When drawn, the X and Y axis ranges are automatically computed such as all the histograms will be visible. Several drawing option are available for both 1D and 2D histograms. The next macros shows how it looks for 2D histograms:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="co">// Example of stacked histograms using the class THStack</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="dt">void</span> hstack(){</a>
<a class="sourceLine" id="cb39-4" data-line-number="4">   THStack *a = <span class="kw">new</span> THStack(<span class="st">"a"</span>,<span class="st">"Stacked 2D histograms"</span>);</a>
<a class="sourceLine" id="cb39-5" data-line-number="5"></a>
<a class="sourceLine" id="cb39-6" data-line-number="6">   TF2 *f1 = <span class="kw">new</span> TF2(<span class="st">"f1"</span>,<span class="st">"xygaus + xygaus(5) + xylandau(10)"</span>,<span class="dv">-4</span>,<span class="dv">4</span>,<span class="dv">-4</span>,<span class="dv">4</span>);</a>
<a class="sourceLine" id="cb39-7" data-line-number="7">   <span class="dt">Double_t</span> params1[] = {<span class="dv">130</span>,<span class="dv">-1</span><span class="fl">.4</span>,<span class="fl">1.8</span>,<span class="fl">1.5</span>,<span class="dv">1</span>, <span class="dv">150</span>,<span class="dv">2</span>,<span class="fl">0.5</span>,<span class="dv">-2</span>,<span class="fl">0.5</span>, <span class="dv">3600</span>,<span class="dv">-2</span>,<span class="fl">0.7</span>,<span class="dv">-3</span>,<span class="fl">0.3</span>};</a>
<a class="sourceLine" id="cb39-8" data-line-number="8">   f1-&gt;SetParameters(params1);</a>
<a class="sourceLine" id="cb39-9" data-line-number="9">   TH2F *h2sta = <span class="kw">new</span> TH2F(<span class="st">"h2sta"</span>,<span class="st">"h2sta"</span>,<span class="dv">20</span>,<span class="dv">-4</span>,<span class="dv">4</span>,<span class="dv">20</span>,<span class="dv">-4</span>,<span class="dv">4</span>);</a>
<a class="sourceLine" id="cb39-10" data-line-number="10">   h2sta-&gt;SetFillColor(<span class="dv">38</span>);</a>
<a class="sourceLine" id="cb39-11" data-line-number="11">   h2sta-&gt;FillRandom(<span class="st">"f1"</span>,<span class="dv">4000</span>);</a>
<a class="sourceLine" id="cb39-12" data-line-number="12"></a>
<a class="sourceLine" id="cb39-13" data-line-number="13">   TF2 *f2 = <span class="kw">new</span> TF2(<span class="st">"f2"</span>,<span class="st">"xygaus + xygaus(5)"</span>,<span class="dv">-4</span>,<span class="dv">4</span>,<span class="dv">-4</span>,<span class="dv">4</span>);</a>
<a class="sourceLine" id="cb39-14" data-line-number="14">   <span class="dt">Double_t</span> params2[] = {<span class="dv">100</span>,<span class="dv">-1</span><span class="fl">.4</span>,<span class="fl">1.9</span>,<span class="fl">1.1</span>,<span class="dv">2</span>, <span class="dv">80</span>,<span class="dv">2</span>,<span class="fl">0.7</span>,<span class="dv">-2</span>,<span class="fl">0.5</span>};</a>
<a class="sourceLine" id="cb39-15" data-line-number="15">   f2-&gt;SetParameters(params2);</a>
<a class="sourceLine" id="cb39-16" data-line-number="16">   TH2F *h2stb = <span class="kw">new</span> TH2F(<span class="st">"h2stb"</span>,<span class="st">"h2stb"</span>,<span class="dv">20</span>,<span class="dv">-4</span>,<span class="dv">4</span>,<span class="dv">20</span>,<span class="dv">-4</span>,<span class="dv">4</span>);</a>
<a class="sourceLine" id="cb39-17" data-line-number="17">   h2stb-&gt;SetFillColor(<span class="dv">46</span>);</a>
<a class="sourceLine" id="cb39-18" data-line-number="18">   h2stb-&gt;FillRandom(<span class="st">"f2"</span>,<span class="dv">3000</span>);</a>
<a class="sourceLine" id="cb39-19" data-line-number="19"></a>
<a class="sourceLine" id="cb39-20" data-line-number="20">   a-&gt;Add(h2sta);</a>
<a class="sourceLine" id="cb39-21" data-line-number="21">   a-&gt;Add(h2stb);</a>
<a class="sourceLine" id="cb39-22" data-line-number="22"></a>
<a class="sourceLine" id="cb39-23" data-line-number="23">   a-&gt;Draw();</a>
<a class="sourceLine" id="cb39-24" data-line-number="24">}</a></code></pre></div>
<ul>
<li><p>Line <em>4</em>: creates the stack.</p></li>
<li><p>Lines <em>4-18</em>: create two histograms to be added in the stack.</p></li>
<li><p>Lines <em>20-21</em>: add the histograms in the stack.</p></li>
<li><p>Line <em>23</em>: draws the stack as a lego plot. The colour distinguish the two histograms <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f56">5.6</a>.</p></li>
</ul>
<p><a name="f56"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/hstack.png" title="f56" alt="Two 2D histograms stack on top of each other."><figcaption>Two 2D histograms stack on top of each other.</figcaption>
</figure>
<h1 id="functions-and-parameter-estimation"><span class="header-section-number">6</span> Functions and Parameter Estimation</h1>
<p>After going through the previous chapters, you already know how to use analytical functions (class <code>TF1</code>), and you got some insight into the graph (<code>TGraphErrors</code>) and histogram classes (<code>TH1F</code>) for data visualisation. In this chapter we will add more detail to the previous approximate explanations to face the fundamental topic of parameter estimation by fitting functions to data. For graphs and histograms, ROOT offers an easy-to-use interface to perform fits - either the fit panel of the graphical interface, or the <code>Fit</code> method. The class <code>TFitResult</code> allows access to the detailed results.</p>
<p>Very often it is necessary to study the statistical properties of analysis procedures. This is most easily achieved by applying the analysis to many sets of simulated data (or “pseudo data”), each representing one possible version of the true experiment. If the simulation only deals with the final distributions observed in data, and does not perform a full simulation of the underlying physics and the experimental apparatus, the name “Toy Monte Carlo” is frequently used.<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Since the true values of all parameters are known in the pseudo-data, the differences between the parameter estimates from the analysis procedure w.r.t. the true values can be determined, and it is also possible to check that the analysis procedure provides correct error estimates.</p>
<h2 id="fitting-functions-to-pseudo-data"><span class="header-section-number">6.1</span> Fitting Functions to Pseudo Data</h2>
<p>In the example below, a pseudo-data set is produced and a model fitted to it.</p>
<p>ROOT offers various minimisation algorithms to minimise a chi2 or a negative log-likelihood function. The default minimiser is MINUIT, a package originally implemented in the FORTRAN programming language. A C++ version is also available, MINUIT2, as well as Fumili <span class="citation" data-cites="Fumili">(Silin 1983)</span> an algorithm optimised for fitting. The minimisation algorithms can be selected using the static functions of the <code>ROOT::Math::MinimizerOptions</code> class. Steering options for the minimiser, such as the convergence tolerance or the maximum number of function calls, can also be set using the methods of this class. All currently implemented minimisers are documented in the reference documentation of ROOT: have a look for example to the <code>ROOT::Math::Minimizer</code> class documentation.  The complication level of the code below is intentionally a little higher than in the previous examples. The graphical output of the macro is shown in Figure <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#f61">6.1</a>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="dt">void</span> format_line(TAttLine* line,<span class="dt">int</span> col,<span class="dt">int</span> sty){</a>
<a class="sourceLine" id="cb40-2" data-line-number="2">    line-&gt;SetLineWidth(<span class="dv">5</span>); line-&gt;SetLineColor(col);</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">    line-&gt;SetLineStyle(sty);}</a>
<a class="sourceLine" id="cb40-4" data-line-number="4"></a>
<a class="sourceLine" id="cb40-5" data-line-number="5"><span class="dt">double</span> the_gausppar(<span class="dt">double</span>* vars, <span class="dt">double</span>* pars){</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">    <span class="cf">return</span> pars[<span class="dv">0</span>]*TMath::Gaus(vars[<span class="dv">0</span>],pars[<span class="dv">1</span>],pars[<span class="dv">2</span>])+</a>
<a class="sourceLine" id="cb40-7" data-line-number="7">        pars[<span class="dv">3</span>]+pars[<span class="dv">4</span>]*vars[<span class="dv">0</span>]+pars[<span class="dv">5</span>]*vars[<span class="dv">0</span>]*vars[<span class="dv">0</span>];}</a>
<a class="sourceLine" id="cb40-8" data-line-number="8"></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="dt">int</span> macro8(){</a>
<a class="sourceLine" id="cb40-10" data-line-number="10">    gStyle-&gt;SetOptTitle(<span class="dv">0</span>); gStyle-&gt;SetOptStat(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb40-11" data-line-number="11">    gStyle-&gt;SetOptFit(<span class="dv">1111</span>); gStyle-&gt;SetStatBorderSize(<span class="dv">0</span>);</a>
<a class="sourceLine" id="cb40-12" data-line-number="12">    gStyle-&gt;SetStatX(.<span class="dv">89</span>); gStyle-&gt;SetStatY(.<span class="dv">89</span>);</a>
<a class="sourceLine" id="cb40-13" data-line-number="13"></a>
<a class="sourceLine" id="cb40-14" data-line-number="14">    TF1 parabola(<span class="st">"parabola"</span>,<span class="st">"[0]+[1]*x+[2]*x**2"</span>,<span class="dv">0</span>,<span class="dv">20</span>);</a>
<a class="sourceLine" id="cb40-15" data-line-number="15">    format_line(&amp;parabola,kBlue,<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb40-16" data-line-number="16"></a>
<a class="sourceLine" id="cb40-17" data-line-number="17">    TF1 gaussian(<span class="st">"gaussian"</span>,<span class="st">"[0]*TMath::Gaus(x,[1],[2])"</span>,<span class="dv">0</span>,<span class="dv">20</span>);</a>
<a class="sourceLine" id="cb40-18" data-line-number="18">    format_line(&amp;gaussian,kRed,<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb40-19" data-line-number="19"></a>
<a class="sourceLine" id="cb40-20" data-line-number="20">    TF1 gausppar(<span class="st">"gausppar"</span>,the_gausppar,<span class="dv">-0</span>,<span class="dv">20</span>,<span class="dv">6</span>);</a>
<a class="sourceLine" id="cb40-21" data-line-number="21">    <span class="dt">double</span> a=<span class="dv">15</span>; <span class="dt">double</span> b=<span class="dv">-1</span><span class="fl">.2</span>; <span class="dt">double</span> c=.<span class="bn">03</span>;</a>
<a class="sourceLine" id="cb40-22" data-line-number="22">    <span class="dt">double</span> norm=<span class="dv">4</span>; <span class="dt">double</span> mean=<span class="dv">7</span>; <span class="dt">double</span> sigma=<span class="dv">1</span>;</a>
<a class="sourceLine" id="cb40-23" data-line-number="23">    gausppar.SetParameters(norm,mean,sigma,a,b,c);</a>
<a class="sourceLine" id="cb40-24" data-line-number="24">    gausppar.SetParNames(<span class="st">"Norm"</span>,<span class="st">"Mean"</span>,<span class="st">"Sigma"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>);</a>
<a class="sourceLine" id="cb40-25" data-line-number="25">    format_line(&amp;gausppar,kBlue,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb40-26" data-line-number="26"></a>
<a class="sourceLine" id="cb40-27" data-line-number="27">    TH1F histo(<span class="st">"histo"</span>,<span class="st">"Signal plus background;X vals;Y Vals"</span>,<span class="dv">50</span>,<span class="dv">0</span>,<span class="dv">20</span>);</a>
<a class="sourceLine" id="cb40-28" data-line-number="28">    histo.SetMarkerStyle(<span class="dv">8</span>);</a>
<a class="sourceLine" id="cb40-29" data-line-number="29"></a>
<a class="sourceLine" id="cb40-30" data-line-number="30">    <span class="co">// Fake the data</span></a>
<a class="sourceLine" id="cb40-31" data-line-number="31">    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">1</span>;i&lt;=<span class="dv">5000</span>;++i) histo.Fill(gausppar.GetRandom());</a>
<a class="sourceLine" id="cb40-32" data-line-number="32"></a>
<a class="sourceLine" id="cb40-33" data-line-number="33">    <span class="co">// Reset the parameters before the fit and set</span></a>
<a class="sourceLine" id="cb40-34" data-line-number="34">    <span class="co">// by eye a peak at 6 with an area of more or less 50</span></a>
<a class="sourceLine" id="cb40-35" data-line-number="35">    gausppar.SetParameter(<span class="dv">0</span>,<span class="dv">50</span>);</a>
<a class="sourceLine" id="cb40-36" data-line-number="36">    gausppar.SetParameter(<span class="dv">1</span>,<span class="dv">6</span>);</a>
<a class="sourceLine" id="cb40-37" data-line-number="37">    <span class="dt">int</span> npar=gausppar.GetNpar();</a>
<a class="sourceLine" id="cb40-38" data-line-number="38">    <span class="cf">for</span> (<span class="dt">int</span> ipar=<span class="dv">2</span>;ipar&lt;npar;++ipar) gausppar.SetParameter(ipar,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb40-39" data-line-number="39"></a>
<a class="sourceLine" id="cb40-40" data-line-number="40">    <span class="co">// perform fit ...</span></a>
<a class="sourceLine" id="cb40-41" data-line-number="41">    <span class="kw">auto</span> fitResPtr = histo.Fit(&amp;gausppar, <span class="st">"S"</span>);</a>
<a class="sourceLine" id="cb40-42" data-line-number="42">    <span class="co">// ... and retrieve fit results</span></a>
<a class="sourceLine" id="cb40-43" data-line-number="43">    fitResPtr-&gt;Print(); <span class="co">// print fit results</span></a>
<a class="sourceLine" id="cb40-44" data-line-number="44">    <span class="co">// get covariance Matrix an print it</span></a>
<a class="sourceLine" id="cb40-45" data-line-number="45">    TMatrixDSym covMatrix (fitResPtr-&gt;GetCovarianceMatrix());</a>
<a class="sourceLine" id="cb40-46" data-line-number="46">    covMatrix.Print();</a>
<a class="sourceLine" id="cb40-47" data-line-number="47"></a>
<a class="sourceLine" id="cb40-48" data-line-number="48">    <span class="co">// Set the values of the gaussian and parabola</span></a>
<a class="sourceLine" id="cb40-49" data-line-number="49">    <span class="cf">for</span> (<span class="dt">int</span> ipar=<span class="dv">0</span>;ipar&lt;<span class="dv">3</span>;ipar++){</a>
<a class="sourceLine" id="cb40-50" data-line-number="50">        gaussian.SetParameter(ipar,gausppar.GetParameter(ipar));</a>
<a class="sourceLine" id="cb40-51" data-line-number="51">        parabola.SetParameter(ipar,gausppar.GetParameter(ipar<span class="dv">+3</span>));</a>
<a class="sourceLine" id="cb40-52" data-line-number="52">    }</a>
<a class="sourceLine" id="cb40-53" data-line-number="53"></a>
<a class="sourceLine" id="cb40-54" data-line-number="54">    histo.GetYaxis()-&gt;SetRangeUser(<span class="dv">0</span>,<span class="dv">250</span>);</a>
<a class="sourceLine" id="cb40-55" data-line-number="55">    histo.DrawClone(<span class="st">"PE"</span>);</a>
<a class="sourceLine" id="cb40-56" data-line-number="56">    parabola.DrawClone(<span class="st">"Same"</span>); gaussian.DrawClone(<span class="st">"Same"</span>);</a>
<a class="sourceLine" id="cb40-57" data-line-number="57">    TLatex latex(<span class="dv">2</span>,<span class="dv">220</span>,<span class="st">"#splitline{Signal Peak over}{background}"</span>);</a>
<a class="sourceLine" id="cb40-58" data-line-number="58">    latex.DrawClone(<span class="st">"Same"</span>);</a>
<a class="sourceLine" id="cb40-59" data-line-number="59">    <span class="cf">return</span> <span class="dv">0</span>;</a>
<a class="sourceLine" id="cb40-60" data-line-number="60">}</a></code></pre></div>
<p>Some step by step explanation is at this point necessary:</p>
<ul>
<li><p>Lines <em>1-3</em>: A simple function to ease the make-up of lines. Remember that the class <code>TF1</code> inherits from <code>TAttLine</code>.</p></li>
<li><p>Lines <em>5-7</em> : Definition of a customised function, namely a Gaussian (the “signal”) plus a parabolic function, the “background”.</p></li>
<li><p>Lines <em>10-12</em>: Some make-up for the Canvas. In particular we want that the parameters of the fit appear very clearly and nicely on the plot.</p></li>
<li><p>Lines <em>20-25</em>: Define and initialise an instance of <code>TF1</code>.</p></li>
<li><p>Lines <em>27-31</em>: Define and fill a histogram.</p></li>
<li><p>Lines <em>33-38</em>: For convenience, the same function as for the generation of the pseudo-data is used in the fit; hence, we need to reset the function parameters. This part of the code is very important for each fit procedure, as it sets the initial values of the fit.</p></li>
<li><p>Line <em>41</em>: A very simple command, well known by now: fit the function to the histogram.</p></li>
<li><p>Lines <em>42-46</em>: Retrieve the output from the fit. Here, we simply print the fit result and access and print the covariance matrix of the parameters.</p></li>
<li><p>Lines <em>54-end</em>: Plot the pseudo-data, the fitted function and the signal and background components at the best-fit values.</p></li>
</ul>
<p><a name="f61"></a></p>
<figure>
<img src="./A ROOT Guide For Beginners_files/functions.png" title="f61" alt="Fit of pseudo data: a signal shape over a background trend. This plot is another example of how making a plot “self-explanatory” can help you better displaying your results. "><figcaption>Fit of pseudo data: a signal shape over a background trend. This plot is another example of how making a plot “self-explanatory” can help you better displaying your results. </figcaption>
</figure>
<h2 id="toy-monte-carlo-experiments"><span class="header-section-number">6.2</span> Toy Monte Carlo Experiments</h2>
<p>Let us look at a simple example of a toy experiment comparing two methods to fit a function to a histogram, the <span class="math inline">\(\chi^{2}\)</span></p>
<p>method and a method called “binned log-likelihood fit”, both available in ROOT.</p>
<p>As a very simple yet powerful quantity to check the quality of the fit results, we construct for each pseudo-data set the so-called “pull”, the difference of the estimated and the true value of a parameter, normalised to the estimated error on the parameter, <span class="math inline">\(\frac{(p_{estim} - p_{true})}{\sigma_{p}}\)</span>. If everything is OK, the distribution of the pull values is a standard normal distribution, i.e.&nbsp;a Gaussian distribution centred around zero with a standard deviation of one.</p>
<p>The macro performs a rather big number of toy experiments, where a histogram is repeatedly filled with Gaussian distributed numbers, representing the pseudo-data in this example. Each time, a fit is performed according to the selected method, and the pull is calculated and filled into a histogram. Here is the code:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="co">// Toy Monte Carlo example.</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="co">// Check pull distribution to compare chi2 and binned</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="co">// log-likelihood methods.</span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"></a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="dt">void</span> pull( <span class="dt">int</span> n_toys = <span class="dv">10000</span>,</a>
<a class="sourceLine" id="cb41-6" data-line-number="6">      <span class="dt">int</span> n_tot_entries = <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb41-7" data-line-number="7">      <span class="dt">int</span> nbins = <span class="dv">40</span>,</a>
<a class="sourceLine" id="cb41-8" data-line-number="8">      <span class="dt">bool</span> do_chi2=<span class="kw">true</span> ){</a>
<a class="sourceLine" id="cb41-9" data-line-number="9"></a>
<a class="sourceLine" id="cb41-10" data-line-number="10">    TString method_prefix(<span class="st">"Log-Likelihood "</span>);</a>
<a class="sourceLine" id="cb41-11" data-line-number="11">    <span class="cf">if</span> (do_chi2)</a>
<a class="sourceLine" id="cb41-12" data-line-number="12">        method_prefix=<span class="st">"#chi^{2} "</span>;</a>
<a class="sourceLine" id="cb41-13" data-line-number="13"></a>
<a class="sourceLine" id="cb41-14" data-line-number="14">    <span class="co">// Create histo</span></a>
<a class="sourceLine" id="cb41-15" data-line-number="15">    TH1F h4(method_prefix+<span class="st">"h4"</span>,</a>
<a class="sourceLine" id="cb41-16" data-line-number="16">            method_prefix+<span class="st">" Random Gauss"</span>,</a>
<a class="sourceLine" id="cb41-17" data-line-number="17">            nbins,<span class="dv">-4</span>,<span class="dv">4</span>);</a>
<a class="sourceLine" id="cb41-18" data-line-number="18">    h4.SetMarkerStyle(<span class="dv">21</span>);</a>
<a class="sourceLine" id="cb41-19" data-line-number="19">    h4.SetMarkerSize(<span class="fl">0.8</span>);</a>
<a class="sourceLine" id="cb41-20" data-line-number="20">    h4.SetMarkerColor(kRed);</a>
<a class="sourceLine" id="cb41-21" data-line-number="21"></a>
<a class="sourceLine" id="cb41-22" data-line-number="22">    <span class="co">// Histogram for sigma and pull</span></a>
<a class="sourceLine" id="cb41-23" data-line-number="23">    TH1F sigma(method_prefix+<span class="st">"sigma"</span>,</a>
<a class="sourceLine" id="cb41-24" data-line-number="24">               method_prefix+<span class="st">"sigma from gaus fit"</span>,</a>
<a class="sourceLine" id="cb41-25" data-line-number="25">               <span class="dv">50</span>,<span class="fl">0.5</span>,<span class="fl">1.5</span>);</a>
<a class="sourceLine" id="cb41-26" data-line-number="26">    TH1F pull(method_prefix+<span class="st">"pull"</span>,</a>
<a class="sourceLine" id="cb41-27" data-line-number="27">              method_prefix+<span class="st">"pull from gaus fit"</span>,</a>
<a class="sourceLine" id="cb41-28" data-line-number="28">              <span class="dv">50</span>,<span class="dv">-4</span>.,<span class="fl">4.</span>);</a>
<a class="sourceLine" id="cb41-29" data-line-number="29"></a>
<a class="sourceLine" id="cb41-30" data-line-number="30">    <span class="co">// Make nice canvases</span></a>
<a class="sourceLine" id="cb41-31" data-line-number="31">    <span class="kw">auto</span> c0 = <span class="kw">new</span> TCanvas(method_prefix+<span class="st">"Gauss"</span>,</a>
<a class="sourceLine" id="cb41-32" data-line-number="32">                          method_prefix+<span class="st">"Gauss"</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">320</span>,<span class="dv">240</span>);</a>
<a class="sourceLine" id="cb41-33" data-line-number="33">    c0-&gt;SetGrid();</a>
<a class="sourceLine" id="cb41-34" data-line-number="34"></a>
<a class="sourceLine" id="cb41-35" data-line-number="35">    <span class="co">// Make nice canvases</span></a>
<a class="sourceLine" id="cb41-36" data-line-number="36">    <span class="kw">auto</span> c1 = <span class="kw">new</span> TCanvas(method_prefix+<span class="st">"Result"</span>,</a>
<a class="sourceLine" id="cb41-37" data-line-number="37">                          method_prefix+<span class="st">"Sigma-Distribution"</span>,</a>
<a class="sourceLine" id="cb41-38" data-line-number="38">                          <span class="dv">0</span>,<span class="dv">300</span>,<span class="dv">600</span>,<span class="dv">400</span>);</a>
<a class="sourceLine" id="cb41-39" data-line-number="39">    c0-&gt;cd();</a>
<a class="sourceLine" id="cb41-40" data-line-number="40"></a>
<a class="sourceLine" id="cb41-41" data-line-number="41">    <span class="dt">float</span> sig, mean;</a>
<a class="sourceLine" id="cb41-42" data-line-number="42">    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;n_toys; i++){</a>
<a class="sourceLine" id="cb41-43" data-line-number="43">     <span class="co">// Reset histo contents</span></a>
<a class="sourceLine" id="cb41-44" data-line-number="44">        h4.Reset();</a>
<a class="sourceLine" id="cb41-45" data-line-number="45">     <span class="co">// Fill histo</span></a>
<a class="sourceLine" id="cb41-46" data-line-number="46">        <span class="cf">for</span> ( <span class="dt">int</span> j = <span class="dv">0</span>; j&lt;n_tot_entries; j++ )</a>
<a class="sourceLine" id="cb41-47" data-line-number="47">        h4.Fill(gRandom-&gt;Gaus());</a>
<a class="sourceLine" id="cb41-48" data-line-number="48">     <span class="co">// perform fit</span></a>
<a class="sourceLine" id="cb41-49" data-line-number="49">        <span class="cf">if</span> (do_chi2) h4.Fit(<span class="st">"gaus"</span>,<span class="st">"q"</span>); <span class="co">// Chi2 fit</span></a>
<a class="sourceLine" id="cb41-50" data-line-number="50">        <span class="cf">else</span> h4.Fit(<span class="st">"gaus"</span>,<span class="st">"lq"</span>); <span class="co">// Likelihood fit</span></a>
<a class="sourceLine" id="cb41-51" data-line-number="51">     <span class="co">// some control output on the way</span></a>
<a class="sourceLine" id="cb41-52" data-line-number="52">        <span class="cf">if</span> (!(i%<span class="dv">100</span>)){</a>
<a class="sourceLine" id="cb41-53" data-line-number="53">            h4.Draw(<span class="st">"ep"</span>);</a>
<a class="sourceLine" id="cb41-54" data-line-number="54">            c0-&gt;Update();}</a>
<a class="sourceLine" id="cb41-55" data-line-number="55"></a>
<a class="sourceLine" id="cb41-56" data-line-number="56">     <span class="co">// Get sigma from fit</span></a>
<a class="sourceLine" id="cb41-57" data-line-number="57">        TF1 *fit = h4.GetFunction(<span class="st">"gaus"</span>);</a>
<a class="sourceLine" id="cb41-58" data-line-number="58">        sig = fit-&gt;GetParameter(<span class="dv">2</span>);</a>
<a class="sourceLine" id="cb41-59" data-line-number="59">        mean= fit-&gt;GetParameter(<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb41-60" data-line-number="60">        sigma.Fill(sig);</a>
<a class="sourceLine" id="cb41-61" data-line-number="61">        pull.Fill(mean/sig * sqrt(n_tot_entries));</a>
<a class="sourceLine" id="cb41-62" data-line-number="62">       } <span class="co">// end of toy MC loop</span></a>
<a class="sourceLine" id="cb41-63" data-line-number="63">     <span class="co">// print result</span></a>
<a class="sourceLine" id="cb41-64" data-line-number="64">        c1-&gt;cd();</a>
<a class="sourceLine" id="cb41-65" data-line-number="65">        pull.DrawClone();</a>
<a class="sourceLine" id="cb41-66" data-line-number="66">}</a>
<a class="sourceLine" id="cb41-67" data-line-number="67"></a>
<a class="sourceLine" id="cb41-68" data-line-number="68"><span class="dt">void</span> macro9(){</a>
<a class="sourceLine" id="cb41-69" data-line-number="69">    <span class="dt">int</span> n_toys=<span class="dv">10000</span>;</a>
<a class="sourceLine" id="cb41-70" data-line-number="70">    <span class="dt">int</span> n_tot_entries=<span class="dv">100</span>;</a>
<a class="sourceLine" id="cb41-71" data-line-number="71">    <span class="dt">int</span> n_bins=<span class="dv">40</span>;</a>
<a class="sourceLine" id="cb41-72" data-line-number="72">    cout &lt;&lt; <span class="st">"Performing Pull Experiment with chi2 </span><span class="sc">\n</span><span class="st">"</span>;</a>
<a class="sourceLine" id="cb41-73" data-line-number="73">    pull(n_toys,n_tot_entries,n_bins,<span class="kw">true</span>);</a>
<a class="sourceLine" id="cb41-74" data-line-number="74">    cout &lt;&lt; <span class="st">"Performing Pull Experiment with Log Likelihood</span><span class="sc">\n</span><span class="st">"</span>;</a>
<a class="sourceLine" id="cb41-75" data-line-number="75">    pull(n_toys,n_tot_entries,n_bins,<span class="kw">false</span>);</a>
<a class="sourceLine" id="cb41-76" data-line-number="76">}</a></code></pre></div>
<p>Your present knowledge of ROOT should be enough to understand all the technicalities behind the macro. Note that the variable <code>pull</code> in line <em>61</em> is different from the definition above: instead of the parameter error on <code>mean</code>, the fitted standard deviation of the distribution divided by the square root of the number of entries, <code>sig/sqrt(n_tot_entries)</code>, is used.</p>
<ul>
<li><p>What method exhibits the better performance with the default parameters ?</p></li>
<li><p>What happens if you increase the number of entries per histogram by a factor of ten ? Why ?</p></li>
</ul>
<p>The answers to these questions are well beyond the scope of this guide. Basically all books about statistical methods provide a complete treatment of the aforementioned topics.</p>
<h1 id="file-io-and-parallel-analysis"><span class="header-section-number">7</span> File I/O and Parallel Analysis</h1>
<h2 id="storing-root-objects"><span class="header-section-number">7.1</span> Storing ROOT Objects</h2>
<p>ROOT offers the possibility to write instances of classes on disk, into a <em>ROOT-file</em> (see the <code>TFile</code> class for more details). One says that the object is made “persistent” by storing it on disk. When reading the file back, the object is reconstructed in memory. The requirement to be satisfied to perform I/O of instances of a certain class is that the ROOT type system is aware of the layout in memory of that class. This topic is beyond the scope of this document: it is worth to mention that I/O can be performed out of the box for the almost complete set of ROOT classes.</p>
<p>We can explore this functionality with histograms and two simple macros.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="dt">void</span> write_to_file(){</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"></a>
<a class="sourceLine" id="cb42-3" data-line-number="3">    <span class="co">// Instance of our histogram</span></a>
<a class="sourceLine" id="cb42-4" data-line-number="4">    TH1F h(<span class="st">"my_histogram"</span>,<span class="st">"My Title;X;# of entries"</span>,<span class="dv">100</span>,<span class="dv">-5</span>,<span class="dv">5</span>);</a>
<a class="sourceLine" id="cb42-5" data-line-number="5"></a>
<a class="sourceLine" id="cb42-6" data-line-number="6">    <span class="co">// Let's fill it randomly</span></a>
<a class="sourceLine" id="cb42-7" data-line-number="7">    h.FillRandom(<span class="st">"gaus"</span>);</a>
<a class="sourceLine" id="cb42-8" data-line-number="8"></a>
<a class="sourceLine" id="cb42-9" data-line-number="9">    <span class="co">// Let's open a TFile</span></a>
<a class="sourceLine" id="cb42-10" data-line-number="10">    TFile out_file(<span class="st">"my_rootfile.root"</span>,<span class="st">"RECREATE"</span>);</a>
<a class="sourceLine" id="cb42-11" data-line-number="11"></a>
<a class="sourceLine" id="cb42-12" data-line-number="12">    <span class="co">// Write the histogram in the file</span></a>
<a class="sourceLine" id="cb42-13" data-line-number="13">    h.Write();</a>
<a class="sourceLine" id="cb42-14" data-line-number="14"></a>
<a class="sourceLine" id="cb42-15" data-line-number="15">    <span class="co">// Close the file</span></a>
<a class="sourceLine" id="cb42-16" data-line-number="16">    out_file.Close();</a>
<a class="sourceLine" id="cb42-17" data-line-number="17">}</a></code></pre></div>
<p>Not bad, eh ? Especially for a language that does not foresees persistency natively like C++. The <em>RECREATE</em> option forces ROOT to create a new file even if a file with the same name exists on disk.</p>
<p>Now, you may use the Cling command line to access information in the file and draw the previously written histogram:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb43-1" data-line-number="1">&gt;  root my_rootfile.root</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">root [<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">Attaching file my_rootfile.root as _file0...</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">root [<span class="dv">1</span>] _file0-&gt;ls()</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">TFile**     my_rootfile.root</a>
<a class="sourceLine" id="cb43-6" data-line-number="6"> TFile*     my_rootfile.root</a>
<a class="sourceLine" id="cb43-7" data-line-number="7">  KEY: TH1F my_histogram;<span class="dv">1</span> My Title</a>
<a class="sourceLine" id="cb43-8" data-line-number="8">root [<span class="dv">2</span>] my_histogram-&gt;Draw()</a></code></pre></div>

<p>Alternatively, you can use a simple macro to carry out the job:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="dt">void</span> read_from_file(){</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"></a>
<a class="sourceLine" id="cb44-3" data-line-number="3">    <span class="co">// Let's open the TFile</span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4">    TFile in_file(<span class="st">"my_rootfile.root"</span>);</a>
<a class="sourceLine" id="cb44-5" data-line-number="5"></a>
<a class="sourceLine" id="cb44-6" data-line-number="6">    <span class="co">// Get the Histogram out</span></a>
<a class="sourceLine" id="cb44-7" data-line-number="7">    TH1F* h;</a>
<a class="sourceLine" id="cb44-8" data-line-number="8">    in_file.GetObject(<span class="st">"my_histogram"</span>,h);</a>
<a class="sourceLine" id="cb44-9" data-line-number="9"></a>
<a class="sourceLine" id="cb44-10" data-line-number="10">    <span class="co">// Draw it</span></a>
<a class="sourceLine" id="cb44-11" data-line-number="11">    <span class="kw">auto</span> myCanvas = <span class="kw">new</span> TCanvas();</a>
<a class="sourceLine" id="cb44-12" data-line-number="12">    h-&gt;DrawClone();</a>
<a class="sourceLine" id="cb44-13" data-line-number="13">}</a></code></pre></div>
<h2 id="n-tuples-in-root"><span class="header-section-number">7.2</span> N-tuples in ROOT</h2>
<h3 id="storing-simple-n-tuples"><span class="header-section-number">7.2.1</span> Storing simple N-tuples</h3>
<p>Up to now we have seen how to manipulate input read from ASCII files. ROOT offers the possibility to do much better than that, with its own n-tuple classes. Among the many advantages provided by these classes one could cite</p>
<ul>
<li><p>Optimised disk I/O.</p></li>
<li><p>Possibility to store many n-tuple rows.</p></li>
<li><p>Write the n-tuples in ROOT files.</p></li>
<li><p>Interactive inspection with <code>TBrowser</code>.</p></li>
<li><p>Store not only numbers, but also <em>objects</em> in the columns.</p></li>
</ul>
<p>In this section we will discuss briefly the <code>TNtuple</code> class, which is a simplified version of the <code>TTree</code> class. A ROOT <code>TNtuple</code> object can store rows of float entries. Let’s tackle the problem according to the usual strategy commenting a minimal example</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="co">// Fill an n-tuple and write it to a file simulating measurement of</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="co">// conductivity of a material in different conditions of pressure</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="co">// and temperature.</span></a>
<a class="sourceLine" id="cb45-4" data-line-number="4"></a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="dt">void</span> write_ntuple_to_file(){</a>
<a class="sourceLine" id="cb45-6" data-line-number="6"></a>
<a class="sourceLine" id="cb45-7" data-line-number="7">   TFile ofile(<span class="st">"conductivity_experiment.root"</span>,<span class="st">"RECREATE"</span>);</a>
<a class="sourceLine" id="cb45-8" data-line-number="8"></a>
<a class="sourceLine" id="cb45-9" data-line-number="9">   <span class="co">// Initialise the TNtuple</span></a>
<a class="sourceLine" id="cb45-10" data-line-number="10">   TNtuple cond_data(<span class="st">"cond_data"</span>,</a>
<a class="sourceLine" id="cb45-11" data-line-number="11">                     <span class="st">"Example N-Tuple"</span>,</a>
<a class="sourceLine" id="cb45-12" data-line-number="12">                     <span class="st">"Potential:Current:Temperature:Pressure"</span>);</a>
<a class="sourceLine" id="cb45-13" data-line-number="13"></a>
<a class="sourceLine" id="cb45-14" data-line-number="14">   <span class="co">// Fill it randomly to fake the acquired data</span></a>
<a class="sourceLine" id="cb45-15" data-line-number="15">   TRandom3 rndm;</a>
<a class="sourceLine" id="cb45-16" data-line-number="16">   <span class="dt">float</span> pot,cur,temp,pres;</a>
<a class="sourceLine" id="cb45-17" data-line-number="17">   <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;<span class="dv">10000</span>;++i){</a>
<a class="sourceLine" id="cb45-18" data-line-number="18">      pot=rndm.Uniform(<span class="fl">0.</span>,<span class="fl">10.</span>);      <span class="co">// get voltage</span></a>
<a class="sourceLine" id="cb45-19" data-line-number="19">      temp=rndm.Uniform(<span class="fl">250.</span>,<span class="fl">350.</span>);  <span class="co">// get temperature</span></a>
<a class="sourceLine" id="cb45-20" data-line-number="20">      pres=rndm.Uniform(<span class="fl">0.5</span>,<span class="fl">1.5</span>);    <span class="co">// get pressure</span></a>
<a class="sourceLine" id="cb45-21" data-line-number="21">      cur=pot/(<span class="fl">10.</span><span class="dv">+0</span><span class="fl">.05</span>*(temp<span class="fl">-300.</span>)<span class="dv">-0</span><span class="fl">.2</span>*(pres<span class="fl">-1.</span>)); <span class="co">// current</span></a>
<a class="sourceLine" id="cb45-22" data-line-number="22">                                                    <span class="co">// add some random smearing (measurement errors)</span></a>
<a class="sourceLine" id="cb45-23" data-line-number="23">      pot*=rndm.Gaus(<span class="fl">1.</span>,<span class="fl">0.01</span>); <span class="co">// 1% error on voltage</span></a>
<a class="sourceLine" id="cb45-24" data-line-number="24">      temp+=rndm.Gaus(<span class="fl">0.</span>,<span class="fl">0.3</span>); <span class="co">// 0.3 abs. error on temp.</span></a>
<a class="sourceLine" id="cb45-25" data-line-number="25">      pres*=rndm.Gaus(<span class="fl">1.</span>,<span class="fl">0.02</span>);<span class="co">// 1% error on pressure</span></a>
<a class="sourceLine" id="cb45-26" data-line-number="26">      cur*=rndm.Gaus(<span class="fl">1.</span>,<span class="fl">0.01</span>); <span class="co">// 1% error on current</span></a>
<a class="sourceLine" id="cb45-27" data-line-number="27">                               <span class="co">// write to ntuple</span></a>
<a class="sourceLine" id="cb45-28" data-line-number="28">      cond_data.Fill(pot,cur,temp,pres);</a>
<a class="sourceLine" id="cb45-29" data-line-number="29">   }</a>
<a class="sourceLine" id="cb45-30" data-line-number="30"></a>
<a class="sourceLine" id="cb45-31" data-line-number="31">   <span class="co">// Save the ntuple and close the file</span></a>
<a class="sourceLine" id="cb45-32" data-line-number="32">   cond_data.Write();</a>
<a class="sourceLine" id="cb45-33" data-line-number="33">   ofile.Close();</a>
<a class="sourceLine" id="cb45-34" data-line-number="34">}</a></code></pre></div>
<p>This data written to this example n-tuple represents, in the statistical sense, three independent variables (Potential or Voltage, Pressure and Temperature), and one variable (Current) which depends on the others according to very simple laws, and an additional Gaussian smearing. This set of variables mimics a measurement of an electrical resistance while varying pressure and temperature.</p>
<p>Imagine your task now consists in finding the relations among the variables – of course without knowing the code used to generate them. You will see that the possibilities of the <code>NTuple</code> class enable you to perform this analysis task. Open the ROOT file (<code>cond_data.root</code>) written by the macro above in an interactive session and use a <code>TBrowser</code> to interactively inspect it:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb46-1" data-line-number="1">root[<span class="dv">0</span>] TBrowser b</a></code></pre></div>
<p>You find the columns of your n-tuple written as <em>leafs</em>. Simply clicking on them you can obtain histograms of the variables!</p>
<p>Next, try the following commands at the shell prompt and in the interactive ROOT shell, respectively:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb47-1" data-line-number="1">&gt; root conductivity_experiment.root</a>
<a class="sourceLine" id="cb47-2" data-line-number="2">Attaching file conductivity_experiment.root as _file0...</a>
<a class="sourceLine" id="cb47-3" data-line-number="3">root [<span class="dv">0</span>] cond_data-&gt;Draw(<span class="st">"Current:Potential"</span>)</a></code></pre></div>
<p>You just produced a correlation plot with one single line of code!</p>
<p>Try to extend the syntax typing for example</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb48-1" data-line-number="1">root [<span class="dv">1</span>] cond_data-&gt;Draw(<span class="st">"Current:Potential"</span>,<span class="st">"Temperature&lt;270"</span>)</a></code></pre></div>
<p>What do you obtain ?</p>
<p>Now try</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb49-1" data-line-number="1">root [<span class="dv">2</span>] cond_data-&gt;Draw(<span class="st">"Current/Potential:Temperature"</span>)</a></code></pre></div>
<p>It should have become clear from these examples how to navigate in such a multi-dimensional space of variables and unveil relations between variables using n-tuples.</p>
<h3 id="reading-n-tuples"><span class="header-section-number">7.2.2</span> Reading N-tuples</h3>
<p>For completeness, you find here a small macro to read the data back from a ROOT n-tuple</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co">// Read the previously produced N-Tuple and print on screen</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="co">// its content</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="dt">void</span> read_ntuple_from_file(){</a>
<a class="sourceLine" id="cb50-5" data-line-number="5"></a>
<a class="sourceLine" id="cb50-6" data-line-number="6">    <span class="co">// Open a file, save the ntuple and close the file</span></a>
<a class="sourceLine" id="cb50-7" data-line-number="7">    TFile in_file(<span class="st">"conductivity_experiment.root"</span>);</a>
<a class="sourceLine" id="cb50-8" data-line-number="8">    TNtuple* my_tuple;in_file.GetObject(<span class="st">"cond_data"</span>,my_tuple);</a>
<a class="sourceLine" id="cb50-9" data-line-number="9">    <span class="dt">float</span> pot,cur,temp,pres; <span class="dt">float</span>* row_content;</a>
<a class="sourceLine" id="cb50-10" data-line-number="10"></a>
<a class="sourceLine" id="cb50-11" data-line-number="11">    cout &lt;&lt; <span class="st">"Potential</span><span class="sc">\t</span><span class="st">Current</span><span class="sc">\t</span><span class="st">Temperature</span><span class="sc">\t</span><span class="st">Pressure</span><span class="sc">\n</span><span class="st">"</span>;</a>
<a class="sourceLine" id="cb50-12" data-line-number="12">    <span class="cf">for</span> (<span class="dt">int</span> irow=<span class="dv">0</span>;irow&lt;my_tuple-&gt;GetEntries();++irow){</a>
<a class="sourceLine" id="cb50-13" data-line-number="13">        my_tuple-&gt;GetEntry(irow);</a>
<a class="sourceLine" id="cb50-14" data-line-number="14">        row_content = my_tuple-&gt;GetArgs();</a>
<a class="sourceLine" id="cb50-15" data-line-number="15">        pot = row_content[<span class="dv">0</span>];</a>
<a class="sourceLine" id="cb50-16" data-line-number="16">        cur = row_content[<span class="dv">1</span>];</a>
<a class="sourceLine" id="cb50-17" data-line-number="17">        temp = row_content[<span class="dv">2</span>];</a>
<a class="sourceLine" id="cb50-18" data-line-number="18">        pres = row_content[<span class="dv">3</span>];</a>
<a class="sourceLine" id="cb50-19" data-line-number="19">        cout &lt;&lt; pot &lt;&lt; <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; cur &lt;&lt; <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; temp</a>
<a class="sourceLine" id="cb50-20" data-line-number="20">             &lt;&lt; <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; pres &lt;&lt; endl;</a>
<a class="sourceLine" id="cb50-21" data-line-number="21">        }</a>
<a class="sourceLine" id="cb50-22" data-line-number="22"></a>
<a class="sourceLine" id="cb50-23" data-line-number="23">    }</a></code></pre></div>
<p>The macro shows the easiest way of accessing the content of a n-tuple: after loading the n-tuple, its branches are assigned to variables and <code>GetEntry(long)</code> automatically fills them with the content for a specific row. By doing so, the logic for reading the n-tuple and the code to process it can be split and the source code remains clear.</p>
<h3 id="storing-arbitrary-n-tuples"><span class="header-section-number">7.2.3</span> Storing Arbitrary N-tuples</h3>
<p>It is also possible to write n-tuples of arbitrary type by using ROOT’s <code>TBranch</code> class. This is especially important as <code>TNtuple::Fill()</code> accepts only floats. The following macro creates the same n-tuple as before but the branches are booked directly. The <code>Fill()</code> function then fills the current values of the connected variables to the tree.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="co">// Fill an n-tuple and write it to a file simulating measurement of</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="co">// conductivity of a material in different conditions of pressure</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="co">// and temperature using branches.</span></a>
<a class="sourceLine" id="cb51-4" data-line-number="4"></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="dt">void</span> write_ntuple_to_file_advanced(</a>
<a class="sourceLine" id="cb51-6" data-line-number="6">   <span class="at">const</span> <span class="bu">std::</span>string&amp; outputFileName=<span class="st">"conductivity_experiment.root"</span></a>
<a class="sourceLine" id="cb51-7" data-line-number="7">   ,<span class="dt">unsigned</span> <span class="dt">int</span> numDataPoints=<span class="dv">1000000</span>){</a>
<a class="sourceLine" id="cb51-8" data-line-number="8"></a>
<a class="sourceLine" id="cb51-9" data-line-number="9">   TFile ofile(outputFileName.c_str(),<span class="st">"RECREATE"</span>);</a>
<a class="sourceLine" id="cb51-10" data-line-number="10"></a>
<a class="sourceLine" id="cb51-11" data-line-number="11">   <span class="co">// Initialise the TNtuple</span></a>
<a class="sourceLine" id="cb51-12" data-line-number="12">   TTree cond_data(<span class="st">"cond_data"</span>, <span class="st">"Example N-Tuple"</span>);</a>
<a class="sourceLine" id="cb51-13" data-line-number="13"></a>
<a class="sourceLine" id="cb51-14" data-line-number="14">   <span class="co">// define the variables and book them for the ntuple</span></a>
<a class="sourceLine" id="cb51-15" data-line-number="15">   <span class="dt">float</span> pot,cur,temp,pres;</a>
<a class="sourceLine" id="cb51-16" data-line-number="16">   cond_data.Branch(<span class="st">"Potential"</span>, &amp;pot, <span class="st">"Potential/F"</span>);</a>
<a class="sourceLine" id="cb51-17" data-line-number="17">   cond_data.Branch(<span class="st">"Current"</span>, &amp;cur, <span class="st">"Current/F"</span>);</a>
<a class="sourceLine" id="cb51-18" data-line-number="18">   cond_data.Branch(<span class="st">"Temperature"</span>, &amp;temp, <span class="st">"Temperature/F"</span>);</a>
<a class="sourceLine" id="cb51-19" data-line-number="19">   cond_data.Branch(<span class="st">"Pressure"</span>, &amp;pres, <span class="st">"Pressure/F"</span>);</a>
<a class="sourceLine" id="cb51-20" data-line-number="20"></a>
<a class="sourceLine" id="cb51-21" data-line-number="21">   <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;numDataPoints;++i){</a>
<a class="sourceLine" id="cb51-22" data-line-number="22">      <span class="co">// Fill it randomly to fake the acquired data</span></a>
<a class="sourceLine" id="cb51-23" data-line-number="23">      pot=gRandom-&gt;Uniform(<span class="fl">0.</span>,<span class="fl">10.</span>)*gRandom-&gt;Gaus(<span class="fl">1.</span>,<span class="fl">0.01</span>);</a>
<a class="sourceLine" id="cb51-24" data-line-number="24">      temp=gRandom-&gt;Uniform(<span class="fl">250.</span>,<span class="fl">350.</span>)+gRandom-&gt;Gaus(<span class="fl">0.</span>,<span class="fl">0.3</span>);</a>
<a class="sourceLine" id="cb51-25" data-line-number="25">      pres=gRandom-&gt;Uniform(<span class="fl">0.5</span>,<span class="fl">1.5</span>)*gRandom-&gt;Gaus(<span class="fl">1.</span>,<span class="fl">0.02</span>);</a>
<a class="sourceLine" id="cb51-26" data-line-number="26">      cur=pot/(<span class="fl">10.</span><span class="dv">+0</span><span class="fl">.05</span>*(temp<span class="fl">-300.</span>)<span class="dv">-0</span><span class="fl">.2</span>*(pres<span class="fl">-1.</span>))*</a>
<a class="sourceLine" id="cb51-27" data-line-number="27">                    gRandom-&gt;Gaus(<span class="fl">1.</span>,<span class="fl">0.01</span>);</a>
<a class="sourceLine" id="cb51-28" data-line-number="28">      <span class="co">// write to ntuple</span></a>
<a class="sourceLine" id="cb51-29" data-line-number="29">      cond_data.Fill();}</a>
<a class="sourceLine" id="cb51-30" data-line-number="30"></a>
<a class="sourceLine" id="cb51-31" data-line-number="31">   <span class="co">// Save the ntuple and close the file</span></a>
<a class="sourceLine" id="cb51-32" data-line-number="32">   cond_data.Write();</a>
<a class="sourceLine" id="cb51-33" data-line-number="33">   ofile.Close();</a>
<a class="sourceLine" id="cb51-34" data-line-number="34">}</a></code></pre></div>
<p>The <code>Branch()</code> function requires a pointer to a variable and a definition of the variable type. The following table lists some of the possible values. Please note that ROOT is not checking the input and mistakes are likely to result in serious problems. This holds especially if values are read as another type than they have been written, e.g.&nbsp;when storing a variable as float and reading it as double.</p>
<p>List of variable types that can be used to define the type of a branch in ROOT:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">type</th>
<th style="text-align: left;">size</th>
<th style="text-align: left;">C++</th>
<th style="text-align: left;">identifier</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">signed integer</td>
<td style="text-align: left;">32 bit</td>
<td style="text-align: left;">int</td>
<td style="text-align: left;">I</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">64 bit</td>
<td style="text-align: left;">long</td>
<td style="text-align: left;">L</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unsigned integer</td>
<td style="text-align: left;">32 bit</td>
<td style="text-align: left;">unsigned int</td>
<td style="text-align: left;">i</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">64 bit</td>
<td style="text-align: left;">unsigned long</td>
<td style="text-align: left;">l</td>
</tr>
<tr class="odd">
<td style="text-align: left;">floating point</td>
<td style="text-align: left;">32 bit</td>
<td style="text-align: left;">float</td>
<td style="text-align: left;">F</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">64 bit</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">D</td>
</tr>
<tr class="odd">
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">bool</td>
<td style="text-align: left;">O</td>
</tr>
</tbody>
</table>
<h3 id="processing-n-tuples-spanning-over-several-files"><span class="header-section-number">7.2.4</span> Processing N-tuples Spanning over Several Files</h3>
<p>Usually n-tuples or trees span over many files and it would be difficult to add them manually. ROOT thus kindly provides a helper class in the form of <code>TChain</code>. Its usage is shown in the following macro which is very similar to the previous example. The constructor of a <code>TChain</code> takes the name of the <code>TTree</code> (or <code>TNuple</code>) as an argument. The files are added with the function <code>Add(fileName)</code>, where one can also use wild-cards as shown in the example.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co">// Read several previously produced N-Tuples and print on screen its</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="co">// content.</span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="co">//</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="co">// you can easily create some files with the following statement:</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="co">//</span></a>
<a class="sourceLine" id="cb52-6" data-line-number="6"><span class="co">// for i in 0 1 2 3 4 5; \\</span></a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="co">// do root -l -x -b -q \\</span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8"><span class="co">// "write_ntuple_to_file.cxx \\</span></a>
<a class="sourceLine" id="cb52-9" data-line-number="9"><span class="co">// (\"conductivity_experiment_${i}.root\", 100)"; \\</span></a>
<a class="sourceLine" id="cb52-10" data-line-number="10"><span class="co">//  done</span></a>
<a class="sourceLine" id="cb52-11" data-line-number="11"></a>
<a class="sourceLine" id="cb52-12" data-line-number="12"><span class="dt">void</span> read_ntuple_with_chain(){</a>
<a class="sourceLine" id="cb52-13" data-line-number="13">   <span class="co">// initiate a TChain with the name of the TTree to be processed</span></a>
<a class="sourceLine" id="cb52-14" data-line-number="14">   TChain in_chain(<span class="st">"cond_data"</span>);</a>
<a class="sourceLine" id="cb52-15" data-line-number="15">   in_chain.Add(<span class="st">"conductivity_experiment*.root"</span>); <span class="co">// add files,</span></a>
<a class="sourceLine" id="cb52-16" data-line-number="16">                                                  <span class="co">// wildcards work</span></a>
<a class="sourceLine" id="cb52-17" data-line-number="17"></a>
<a class="sourceLine" id="cb52-18" data-line-number="18">   <span class="co">// define variables and assign them to the corresponding branches</span></a>
<a class="sourceLine" id="cb52-19" data-line-number="19">   <span class="dt">float</span> pot, cur, temp, pres;</a>
<a class="sourceLine" id="cb52-20" data-line-number="20">   in_chain.SetBranchAddress(<span class="st">"Potential"</span>, &amp;pot);</a>
<a class="sourceLine" id="cb52-21" data-line-number="21">   in_chain.SetBranchAddress(<span class="st">"Current"</span>, &amp;cur);</a>
<a class="sourceLine" id="cb52-22" data-line-number="22">   in_chain.SetBranchAddress(<span class="st">"Temperature"</span>, &amp;temp);</a>
<a class="sourceLine" id="cb52-23" data-line-number="23">   in_chain.SetBranchAddress(<span class="st">"Pressure"</span>, &amp;pres);</a>
<a class="sourceLine" id="cb52-24" data-line-number="24"></a>
<a class="sourceLine" id="cb52-25" data-line-number="25">   cout &lt;&lt; <span class="st">"Potential</span><span class="sc">\t</span><span class="st">Current</span><span class="sc">\t</span><span class="st">Temperature</span><span class="sc">\t</span><span class="st">Pressure</span><span class="sc">\n</span><span class="st">"</span>;</a>
<a class="sourceLine" id="cb52-26" data-line-number="26">   <span class="cf">for</span> (<span class="dt">size_t</span> irow=<span class="dv">0</span>; irow&lt;in_chain.GetEntries(); ++irow){</a>
<a class="sourceLine" id="cb52-27" data-line-number="27">      in_chain.GetEntry(irow); <span class="co">// loads all variables that have</span></a>
<a class="sourceLine" id="cb52-28" data-line-number="28">                                    <span class="co">// been connected to branches</span></a>
<a class="sourceLine" id="cb52-29" data-line-number="29">      cout &lt;&lt; pot &lt;&lt; <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; cur &lt;&lt; <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; temp &lt;&lt;</a>
<a class="sourceLine" id="cb52-30" data-line-number="30">                          <span class="st">"</span><span class="sc">\t</span><span class="st">"</span> &lt;&lt; pres &lt;&lt; endl;</a>
<a class="sourceLine" id="cb52-31" data-line-number="31">   }</a>
<a class="sourceLine" id="cb52-32" data-line-number="32">}</a></code></pre></div>
<h3 id="for-the-advanced-user-processing-trees-with-a-selector-script"><span class="header-section-number">7.2.5</span> <em>For the advanced user:</em> Processing trees with a selector script</h3>
<p>Another very general and powerful way of processing a <code>TChain</code> is provided via the method <code>TChain::Process()</code>. This method takes as arguments an instance of a – user-implemented– class of type <code>TSelector</code>, and – optionally – the number of entries and the first entry to be processed. A template for the class <code>TSelector</code> is provided by the method <code>TTree::MakeSelector</code>, as is shown in the little macro <code>makeSelector.C</code> below.</p>
<p>It opens the n-tuple <code>conductivity_experiment.root</code> from the example above and creates from it the header file <code>MySelector.h</code> and a template to insert your own analysis code, <code>MySelector.C</code>. </p>
<div class="sourceCode" id="cb53"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb53-1" data-line-number="1">{</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="co">// create template class for Selector to run on a tree</span></a>
<a class="sourceLine" id="cb53-3" data-line-number="3"><span class="co">//////////////////////////////////////////////////////</span></a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="co">//</span></a>
<a class="sourceLine" id="cb53-5" data-line-number="5"><span class="co">// open root file containing the Tree</span></a>
<a class="sourceLine" id="cb53-6" data-line-number="6">    TFile f(<span class="st">"conductivity_experiment.root"</span>);</a>
<a class="sourceLine" id="cb53-7" data-line-number="7"><span class="co">// create TTree object from it</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8">    TTree *t; f.GetObject(<span class="st">"cond_data"</span>,t);</a>
<a class="sourceLine" id="cb53-9" data-line-number="9"><span class="co">// this generates the files MySelector.h and MySelector.C</span></a>
<a class="sourceLine" id="cb53-10" data-line-number="10">    t-&gt;MakeSelector(<span class="st">"MySelector"</span>);</a>
<a class="sourceLine" id="cb53-11" data-line-number="11">}</a></code></pre></div>
<p>The template contains the entry points <code>Begin()</code> and <code>SlaveBegin()</code> called before processing of the <code>TChain</code> starts, <code>Process()</code> called for every entry of the chain, and <code>SlaveTerminate()</code> and <code>Terminate()</code> called after the last entry has been processed. Typically, initialization like booking of histograms is performed in <code>SlaveBegin()</code>, the analysis, i.e.&nbsp;the selection of entries, calculations and filling of histograms, is done in <code>Process()</code>, and final operations like plotting and storing of results happen in <code>SlaveTerminate()</code> or <code>Terminate()</code>.</p>
<p>The entry points <code>SlaveBegin()</code> and <code>SlaveTerminate()</code> are called on so-called slave nodes only if parallel processing via <code>PROOF</code> or <code>PROOF lite</code> is enabled, as will be explained below.</p>
<p>A simple example of a selector class is shown in the macro <code>MySelector.C</code>. The example is executed with the following sequence of commands:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb54-1" data-line-number="1">&gt; TChain *ch=<span class="kw">new</span> TChain(<span class="st">"cond_data"</span>, <span class="st">"Chain for Example N-Tuple"</span>);</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">&gt; ch-&gt;Add(<span class="st">"conductivity_experiment*.root"</span>);</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">&gt; ch-&gt;Process(<span class="st">"MySelector.C+"</span>);</a></code></pre></div>
<p>As usual, the “<code>+</code>” appended to the name of the macro to be executed initiates the compilation of the <code>MySelector.C</code> with the system compiler in order to improve performance.</p>
<p>The code in <code>MySelector.C</code>, shown in the listing below, books some histograms in <code>SlaveBegin()</code> and adds them to the instance <code>fOutput</code>, which is of the class <code>TList</code>.<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> The final processing in <code>Terminate()</code> allows to access histograms and store, display or save them as pictures. This is shown in the example via the <code>TList</code> <code>fOutput</code>. See the commented listing below for more details; most of the text is actually comments generated automatically by <code>TTree::MakeSelector</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="pp">#define MySelector_cxx</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="co">// The class definition in MySelector.h has been generated automatically</span></a>
<a class="sourceLine" id="cb55-3" data-line-number="3"><span class="co">// by the ROOT utility TTree::MakeSelector(). This class is derived</span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="co">// from the ROOT class TSelector. For more information on the TSelector</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5"><span class="co">// framework see $ROOTSYS/README/README.SELECTOR or the ROOT User Manual.</span></a>
<a class="sourceLine" id="cb55-6" data-line-number="6"></a>
<a class="sourceLine" id="cb55-7" data-line-number="7"><span class="co">// The following methods are defined in this file:</span></a>
<a class="sourceLine" id="cb55-8" data-line-number="8"><span class="co">//    Begin():        called every time a loop on the tree starts,</span></a>
<a class="sourceLine" id="cb55-9" data-line-number="9"><span class="co">//                    a convenient place to create your histograms.</span></a>
<a class="sourceLine" id="cb55-10" data-line-number="10"><span class="co">//    SlaveBegin():   called after Begin(), when on PROOF called only on the</span></a>
<a class="sourceLine" id="cb55-11" data-line-number="11"><span class="co">//                    slave servers.</span></a>
<a class="sourceLine" id="cb55-12" data-line-number="12"><span class="co">//    Process():      called for each event, in this function you decide what</span></a>
<a class="sourceLine" id="cb55-13" data-line-number="13"><span class="co">//                    to read and fill your histograms.</span></a>
<a class="sourceLine" id="cb55-14" data-line-number="14"><span class="co">//    SlaveTerminate: called at the end of the loop on the tree, when on PROOF</span></a>
<a class="sourceLine" id="cb55-15" data-line-number="15"><span class="co">//                    called only on the slave servers.</span></a>
<a class="sourceLine" id="cb55-16" data-line-number="16"><span class="co">//    Terminate():    called at the end of the loop on the tree,</span></a>
<a class="sourceLine" id="cb55-17" data-line-number="17"><span class="co">//                    a convenient place to draw/fit your histograms.</span></a>
<a class="sourceLine" id="cb55-18" data-line-number="18"><span class="co">//</span></a>
<a class="sourceLine" id="cb55-19" data-line-number="19"><span class="co">// To use this file, try the following session on your Tree T:</span></a>
<a class="sourceLine" id="cb55-20" data-line-number="20"><span class="co">//</span></a>
<a class="sourceLine" id="cb55-21" data-line-number="21"><span class="co">// root&gt; T-&gt;Process("MySelector.C")</span></a>
<a class="sourceLine" id="cb55-22" data-line-number="22"><span class="co">// root&gt; T-&gt;Process("MySelector.C","some options")</span></a>
<a class="sourceLine" id="cb55-23" data-line-number="23"><span class="co">// root&gt; T-&gt;Process("MySelector.C+")</span></a>
<a class="sourceLine" id="cb55-24" data-line-number="24"><span class="co">//</span></a>
<a class="sourceLine" id="cb55-25" data-line-number="25"></a>
<a class="sourceLine" id="cb55-26" data-line-number="26"><span class="pp">#include </span><span class="im">"MySelector.h"</span></a>
<a class="sourceLine" id="cb55-27" data-line-number="27"><span class="pp">#include </span><span class="im">&lt;TH2.h&gt;</span></a>
<a class="sourceLine" id="cb55-28" data-line-number="28"><span class="pp">#include </span><span class="im">&lt;TStyle.h&gt;</span></a>
<a class="sourceLine" id="cb55-29" data-line-number="29"></a>
<a class="sourceLine" id="cb55-30" data-line-number="30"></a>
<a class="sourceLine" id="cb55-31" data-line-number="31"><span class="dt">void</span> MySelector::Begin(TTree * <span class="co">/*tree*/</span>)</a>
<a class="sourceLine" id="cb55-32" data-line-number="32">{</a>
<a class="sourceLine" id="cb55-33" data-line-number="33">   <span class="co">// The Begin() function is called at the start of the query.</span></a>
<a class="sourceLine" id="cb55-34" data-line-number="34">   <span class="co">// When running with PROOF Begin() is only called on the client.</span></a>
<a class="sourceLine" id="cb55-35" data-line-number="35">   <span class="co">// The tree argument is deprecated (on PROOF 0 is passed).</span></a>
<a class="sourceLine" id="cb55-36" data-line-number="36"></a>
<a class="sourceLine" id="cb55-37" data-line-number="37">   TString option = GetOption();</a>
<a class="sourceLine" id="cb55-38" data-line-number="38"></a>
<a class="sourceLine" id="cb55-39" data-line-number="39">}</a>
<a class="sourceLine" id="cb55-40" data-line-number="40"></a>
<a class="sourceLine" id="cb55-41" data-line-number="41"><span class="dt">void</span> MySelector::SlaveBegin(TTree * <span class="co">/*tree*/</span>)</a>
<a class="sourceLine" id="cb55-42" data-line-number="42">{</a>
<a class="sourceLine" id="cb55-43" data-line-number="43">   <span class="co">// The SlaveBegin() function is called after the Begin() function.</span></a>
<a class="sourceLine" id="cb55-44" data-line-number="44">   <span class="co">// When running with PROOF SlaveBegin() is called on each slave server.</span></a>
<a class="sourceLine" id="cb55-45" data-line-number="45">   <span class="co">// The tree argument is deprecated (on PROOF 0 is passed).</span></a>
<a class="sourceLine" id="cb55-46" data-line-number="46"></a>
<a class="sourceLine" id="cb55-47" data-line-number="47">   TString option = GetOption();</a>
<a class="sourceLine" id="cb55-48" data-line-number="48"></a>
<a class="sourceLine" id="cb55-49" data-line-number="49">}</a>
<a class="sourceLine" id="cb55-50" data-line-number="50"></a>
<a class="sourceLine" id="cb55-51" data-line-number="51"><span class="dt">Bool_t</span> MySelector::Process(<span class="dt">Long64_t</span> entry)</a>
<a class="sourceLine" id="cb55-52" data-line-number="52">{</a>
<a class="sourceLine" id="cb55-53" data-line-number="53">   <span class="co">// The Process() function is called for each entry in the tree (or possibly</span></a>
<a class="sourceLine" id="cb55-54" data-line-number="54">   <span class="co">// keyed object in the case of PROOF) to be processed. The entry argument</span></a>
<a class="sourceLine" id="cb55-55" data-line-number="55">   <span class="co">// specifies which entry in the currently loaded tree is to be processed.</span></a>
<a class="sourceLine" id="cb55-56" data-line-number="56">   <span class="co">// It can be passed to either MySelector::GetEntry() or TBranch::GetEntry()</span></a>
<a class="sourceLine" id="cb55-57" data-line-number="57">   <span class="co">// to read either all or the required parts of the data. When processing</span></a>
<a class="sourceLine" id="cb55-58" data-line-number="58">   <span class="co">// keyed objects with PROOF, the object is already loaded and is available</span></a>
<a class="sourceLine" id="cb55-59" data-line-number="59">   <span class="co">// via the fObject pointer.</span></a>
<a class="sourceLine" id="cb55-60" data-line-number="60">   <span class="co">//</span></a>
<a class="sourceLine" id="cb55-61" data-line-number="61">   <span class="co">// This function should contain the "body" of the analysis. It can contain</span></a>
<a class="sourceLine" id="cb55-62" data-line-number="62">   <span class="co">// simple or elaborate selection criteria, run algorithms on the data</span></a>
<a class="sourceLine" id="cb55-63" data-line-number="63">   <span class="co">// of the event and typically fill histograms.</span></a>
<a class="sourceLine" id="cb55-64" data-line-number="64">   <span class="co">//</span></a>
<a class="sourceLine" id="cb55-65" data-line-number="65">   <span class="co">// The processing can be stopped by calling Abort().</span></a>
<a class="sourceLine" id="cb55-66" data-line-number="66">   <span class="co">//</span></a>
<a class="sourceLine" id="cb55-67" data-line-number="67">   <span class="co">// Use fStatus to set the return value of TTree::Process().</span></a>
<a class="sourceLine" id="cb55-68" data-line-number="68">   <span class="co">//</span></a>
<a class="sourceLine" id="cb55-69" data-line-number="69">   <span class="co">// The return value is currently not used.</span></a>
<a class="sourceLine" id="cb55-70" data-line-number="70"></a>
<a class="sourceLine" id="cb55-71" data-line-number="71">   <span class="cf">return</span> kTRUE;</a>
<a class="sourceLine" id="cb55-72" data-line-number="72">}</a>
<a class="sourceLine" id="cb55-73" data-line-number="73"></a>
<a class="sourceLine" id="cb55-74" data-line-number="74"><span class="dt">void</span> MySelector::SlaveTerminate()</a>
<a class="sourceLine" id="cb55-75" data-line-number="75">{</a>
<a class="sourceLine" id="cb55-76" data-line-number="76">   <span class="co">// The SlaveTerminate() function is called after all entries or objects</span></a>
<a class="sourceLine" id="cb55-77" data-line-number="77">   <span class="co">// have been processed. When running with PROOF SlaveTerminate() is called</span></a>
<a class="sourceLine" id="cb55-78" data-line-number="78">   <span class="co">// on each slave server.</span></a>
<a class="sourceLine" id="cb55-79" data-line-number="79"></a>
<a class="sourceLine" id="cb55-80" data-line-number="80">}</a>
<a class="sourceLine" id="cb55-81" data-line-number="81"></a>
<a class="sourceLine" id="cb55-82" data-line-number="82"><span class="dt">void</span> MySelector::Terminate()</a>
<a class="sourceLine" id="cb55-83" data-line-number="83">{</a>
<a class="sourceLine" id="cb55-84" data-line-number="84">   <span class="co">// The Terminate() function is the last function to be called during</span></a>
<a class="sourceLine" id="cb55-85" data-line-number="85">   <span class="co">// a query. It always runs on the client, it can be used to present</span></a>
<a class="sourceLine" id="cb55-86" data-line-number="86">   <span class="co">// the results graphically or save the results to file.</span></a>
<a class="sourceLine" id="cb55-87" data-line-number="87"></a>
<a class="sourceLine" id="cb55-88" data-line-number="88">}</a></code></pre></div>
<h3 id="for-power-users-multi-core-processing-with-proof-lite"><span class="header-section-number">7.2.6</span> <em>For power-users:</em> Multi-core processing with <code>PROOF lite</code></h3>
<p>The processing of n-tuples via a selector function of type <code>TSelector</code> through <code>TChain::Process()</code>, as described at the end of the previous section, offers an additional advantage in particular for very large data sets: on distributed systems or multi-core architectures, portions of data can be processed in parallel, thus significantly reducing the execution time. On modern computers with multi-core CPUs or hardware-threading enabled, this allows a much faster turnaround of analyses, since all the available CPU power is used.</p>
<p>On distributed systems, a PROOF server and worker nodes have to be set up, as described in detail in the ROOT documentation. On a single computer with multiple cores, <code>PROOF lite</code> can be used instead. Try the following little macro, <code>RunMySelector.C</code>, which contains two extra lines compared to the example above (adjust the number of workers according to the number of CPU cores):</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb56-1" data-line-number="1">{<span class="co">// set up a TChain</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">TChain *ch=<span class="kw">new</span> TChain(<span class="st">"cond_data"</span>, <span class="st">"My Chain for Example N-Tuple"</span>);</a>
<a class="sourceLine" id="cb56-3" data-line-number="3"> ch-&gt;Add(<span class="st">"conductivity_experiment*.root"</span>);</a>
<a class="sourceLine" id="cb56-4" data-line-number="4"><span class="co">// eventually, start Proof Lite on cores</span></a>
<a class="sourceLine" id="cb56-5" data-line-number="5">TProof::Open(<span class="st">"workers=4"</span>);</a>
<a class="sourceLine" id="cb56-6" data-line-number="6">ch-&gt;SetProof();</a>
<a class="sourceLine" id="cb56-7" data-line-number="7">ch-&gt;Process(<span class="st">"MySelector.C+"</span>);}</a></code></pre></div>
<p>The first command, <code>TProof::Open(const char*)</code> starts a local PROOF server (if no arguments are specified, all cores will be used), and the command <code>ch-&gt;SetProof();</code> enables processing of the chain using PROOF. Now, when issuing the command <code>ch-&gt;Process("MySelector.C+);</code>, the code in <code>MySelector.C</code> is compiled and executed on each slave node. The methods <code>Begin()</code> and <code>Terminate()</code> are executed on the master only. The list of n-tuple files is analysed, and portions of the data are assigned to the available slave processes. Histograms booked in <code>SlaveBegin()</code> exist in the processes on the slave nodes, and are filled accordingly. Upon termination, the PROOF master collects the histograms from the slaves and merges them. In <code>Terminate()</code> all merged histograms are available and can be inspected, analysed or stored. The histograms are handled via the instances <code>fOutput</code> of class <code>TList</code> in each slave process, and can be retrieved from this list after merging in <code>Terminate</code>.</p>
<p>To explore the power of this mechanism, generate some very large n-tuples using the script from the section <a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#storing-arbitrary-n-tuples">Storing Arbitrary N-tuples</a> - you could try 10 000 000 events (this results in a large n-tuple of about 160 MByte in size). You could also generate a large number of files and use wildcards to add the to the <code>TChain</code>. Now execute: <code>&gt; root -l RunMySelector.C</code> and watch what happens:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb57-1" data-line-number="1">Processing RunMySelector.C...</a>
<a class="sourceLine" id="cb57-2" data-line-number="2"> +++ Starting PROOF-Lite with <span class="dv">4</span> workers +++</a>
<a class="sourceLine" id="cb57-3" data-line-number="3">Opening connections to workers: OK (<span class="dv">4</span> workers)</a>
<a class="sourceLine" id="cb57-4" data-line-number="4">Setting up worker servers: OK (<span class="dv">4</span> workers)</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">PROOF set to parallel mode (<span class="dv">4</span> workers)</a>
<a class="sourceLine" id="cb57-6" data-line-number="6"></a>
<a class="sourceLine" id="cb57-7" data-line-number="7">Info in &lt;TProofLite::SetQueryRunning&gt;: starting query: <span class="dv">1</span></a>
<a class="sourceLine" id="cb57-8" data-line-number="8">Info in &lt;TProofQueryResult::SetRunning&gt;: nwrks: <span class="dv">4</span></a>
<a class="sourceLine" id="cb57-9" data-line-number="9">Info in &lt;TUnixSystem::ACLiC&gt;: creating shared library</a>
<a class="sourceLine" id="cb57-10" data-line-number="10">                             ~/DivingROOT/macros/MySelector_C.so</a>
<a class="sourceLine" id="cb57-11" data-line-number="11">*==* ----- Begin of Job ----- Date/Time = Wed Feb <span class="dv">15</span> <span class="dv">23</span>:<span class="bn">00</span>:<span class="bn">04</span> <span class="dv">2012</span></a>
<a class="sourceLine" id="cb57-12" data-line-number="12">Looking up <span class="cf">for</span> exact location of files: OK (<span class="dv">4</span> files)</a>
<a class="sourceLine" id="cb57-13" data-line-number="13">Looking up <span class="cf">for</span> exact location of files: OK (<span class="dv">4</span> files)</a>
<a class="sourceLine" id="cb57-14" data-line-number="14">Info in &lt;TPacketizerAdaptive::TPacketizerAdaptive&gt;:</a>
<a class="sourceLine" id="cb57-15" data-line-number="15">                      Setting max number of workers per node to <span class="dv">4</span></a>
<a class="sourceLine" id="cb57-16" data-line-number="16">Validating files: OK (<span class="dv">4</span> files)</a>
<a class="sourceLine" id="cb57-17" data-line-number="17">Info in &lt;TPacketizerAdaptive::InitStats&gt;:</a>
<a class="sourceLine" id="cb57-18" data-line-number="18">                      fraction of remote files <span class="fl">1.000000</span></a>
<a class="sourceLine" id="cb57-19" data-line-number="19">Info in &lt;TCanvas::Print&gt;:</a>
<a class="sourceLine" id="cb57-20" data-line-number="20">       file ResistanceDistribution.png has been created</a>
<a class="sourceLine" id="cb57-21" data-line-number="21">*==* ----- End of Job ----- Date/Time = Wed Feb <span class="dv">15</span> <span class="dv">23</span>:<span class="bn">00</span>:<span class="er">08</span> <span class="dv">2012</span></a>
<a class="sourceLine" id="cb57-22" data-line-number="22">Lite<span class="dv">-0</span>: all output objects have been merged</a></code></pre></div>
<p>Log files of the whole processing chain are kept in the directory <code>~.proof</code> for each worker node. This is very helpful for debugging or if something goes wrong. As the method described here also works without using PROOF, the development work on an analysis script can be done in the standard way on a small subset of the data, and only for the full processing one would use parallelism via PROOF.</p>
<p>It is worth to remind the reader that the speed of typical data analysis programs limited by the I/O speed (for example the latencies implied by reading data from a hard drive). It is therefore expected that this limitation cannot be eliminated with the usage of any parallel analysis toolkit.</p>
<h3 id="optimisation-regarding-n-tuples"><span class="header-section-number">7.2.7</span> Optimisation Regarding N-tuples</h3>
<p>ROOT automatically applies compression algorithms on n-tuples to reduce the memory consumption. A value that is in most cases the same will consume only small space on your disk (but it has to be decompressed on reading). Nevertheless, you should think about the design of your n-tuples and your analyses as soon as the processing time exceeds some minutes.</p>
<ul>
<li><p>Try to keep your n-tuples simple and use appropriate variable types. If your measurement has only a limited precision, it is needless to store it with double precision.</p></li>
<li><p>Experimental conditions that do not change with every single measurement should be stored in a separate tree. Although the compression can handle redundant values, the processing time increase with every variable that has to be filled.</p></li>
<li><p>The function <code>SetCacheSize(long)</code> specifies the size of the cache for reading a <code>TTree</code> object from a file. The default value is 30MB. A manual increase may help in certain situations. Please note that the caching mechanism can cover only one <code>TTree</code> object per <code>TFile</code> object.</p></li>
<li><p>You can select the branches to be covered by the caching algorithm with <code>AddBranchToCache</code> and deactivate unneeded branches with <code>SetBranchStatus</code>. This mechanism can result in a significant speed-up for simple operations on trees with many branches.</p></li>
<li><p>You can measure the performance easily with <code>TTreePerfStats</code>. The ROOT documentation on this class also includes an introductory example. For example, <code>TTreePerfStats</code> can show you that it is beneficial to store meta data and payload data separately, i.e.&nbsp;write the meta data tree in a bulk to a file at the end of your job instead of writing both trees interleaved.</p></li>
</ul>
<h1 id="root-in-python"><span class="header-section-number">8</span> ROOT in Python</h1>
<p>ROOT offers the possibility to interface to Python via a set of bindings called PyROOT. Python is used in a wide variety of application areas and one of the most used scripting languages today. With the help of PyROOT it becomes possible to combine the power of a scripting language with ROOT tools. Introductory material to Python is available from many sources on the web, see e. g. http://docs.python.org.</p>
<h2 id="pyroot"><span class="header-section-number">8.1</span> PyROOT</h2>
<p>The access to ROOT classes and their methods in PyROOT is almost identical to C++ macros, except for the special language features of Python, most importantly dynamic type declaration at the time of assignment. Coming back to our first example, simply plotting a function in ROOT, the following C++ code:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb58-1" data-line-number="1">TF1 *f1 = <span class="kw">new</span> TF1(<span class="st">"f2"</span>,<span class="st">"[0]*sin([1]*x)/x"</span>,<span class="fl">0.</span>,<span class="fl">10.</span>);</a>
<a class="sourceLine" id="cb58-2" data-line-number="2">f1-&gt;SetParameter(<span class="dv">0</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb58-3" data-line-number="3">f1-&gt;SetParameter(<span class="dv">1</span>,<span class="dv">1</span>);</a>
<a class="sourceLine" id="cb58-4" data-line-number="4">f1-&gt;Draw();</a></code></pre></div>
<p>in Python becomes:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="im">import</span> ROOT</a>
<a class="sourceLine" id="cb59-2" data-line-number="2">f1 <span class="op">=</span> ROOT.TF1(<span class="st">"f2"</span>,<span class="st">"[0]*sin([1]*x)/x"</span>,<span class="fl">0.</span>,<span class="fl">10.</span>)</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">f1.SetParameter(<span class="dv">0</span>,<span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb59-4" data-line-number="4">f1.SetParameter(<span class="dv">1</span>,<span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5">f1.Draw()<span class="op">;</span></a></code></pre></div>
<p>A slightly more advanced example hands over data defined in the macro to the ROOT class <code>TGraphErrors</code>. Note that a Python array can be used to pass data between Python and ROOT. The first line in the Python script allows it to be executed directly from the operating system, without the need to start the script from python or the highly recommended powerful interactive shell ipython. The last line in the python script is there to allow you to have a look at the graphical output in the ROOT canvas before it disappears upon termination of the script.</p>
<p>Here is the C++ version:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="dt">void</span> TGraphFit(){</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">   <span class="co">//</span></a>
<a class="sourceLine" id="cb60-3" data-line-number="3">   <span class="co">// Draw a graph with error bars and fit a function to it</span></a>
<a class="sourceLine" id="cb60-4" data-line-number="4">   <span class="co">//</span></a>
<a class="sourceLine" id="cb60-5" data-line-number="5">   gStyle-&gt;SetOptFit(<span class="dv">111</span>) ; <span class="co">//superimpose fit results</span></a>
<a class="sourceLine" id="cb60-6" data-line-number="6">   <span class="co">// make nice Canvas</span></a>
<a class="sourceLine" id="cb60-7" data-line-number="7">   TCanvas *c1 = <span class="kw">new</span> TCanvas(<span class="st">"c1"</span> ,<span class="st">"Daten"</span> ,<span class="dv">200</span> ,<span class="dv">10</span> ,<span class="dv">700</span> ,<span class="dv">500</span>) ;</a>
<a class="sourceLine" id="cb60-8" data-line-number="8">   c1-&gt;SetGrid( ) ;</a>
<a class="sourceLine" id="cb60-9" data-line-number="9">   <span class="co">//define some data points ...</span></a>
<a class="sourceLine" id="cb60-10" data-line-number="10">   <span class="at">const</span> <span class="dt">Int_t</span> n = <span class="dv">10</span>;</a>
<a class="sourceLine" id="cb60-11" data-line-number="11">   <span class="dt">Float_t</span> x[n] = {<span class="dv">-0</span><span class="fl">.22</span>, <span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.61</span>, <span class="fl">0.7</span>, <span class="fl">0.85</span>, <span class="fl">0.89</span>, <span class="fl">1.1</span>};</a>
<a class="sourceLine" id="cb60-12" data-line-number="12">   <span class="dt">Float_t</span> y[n] = {<span class="fl">0.7</span>, <span class="fl">2.9</span>, <span class="fl">5.6</span>, <span class="fl">7.4</span>, <span class="fl">9.</span>, <span class="fl">9.6</span>, <span class="fl">8.7</span>, <span class="fl">6.3</span>, <span class="fl">4.5</span>, <span class="fl">1.1</span>};</a>
<a class="sourceLine" id="cb60-13" data-line-number="13">   <span class="dt">Float_t</span> ey[n] = {.<span class="dv">8</span> ,.<span class="dv">7</span> ,.<span class="dv">6</span> ,.<span class="dv">5</span> ,.<span class="dv">4</span> ,.<span class="dv">4</span> ,.<span class="dv">5</span> ,.<span class="dv">6</span> ,.<span class="dv">7</span> ,.<span class="dv">8</span>};</a>
<a class="sourceLine" id="cb60-14" data-line-number="14">   <span class="dt">Float_t</span> ex[n] = {.<span class="bn">05</span> ,.<span class="dv">1</span> ,.<span class="bn">07</span> ,.<span class="bn">07</span> ,.<span class="bn">04</span> ,.<span class="bn">05</span> ,.<span class="bn">06</span> ,.<span class="bn">07</span> ,.<span class="er">08</span> ,.<span class="bn">05</span>};</a>
<a class="sourceLine" id="cb60-15" data-line-number="15">   <span class="co">// and hand over to TGraphErros object</span></a>
<a class="sourceLine" id="cb60-16" data-line-number="16">   TGraphErrors *gr = <span class="kw">new</span> TGraphErrors(n,x,y,ex,ey);</a>
<a class="sourceLine" id="cb60-17" data-line-number="17">   gr-&gt;SetTitle(<span class="st">"TGraphErrors with Fit"</span>) ;</a>
<a class="sourceLine" id="cb60-18" data-line-number="18">   gr-&gt;Draw(<span class="st">"AP"</span>);</a>
<a class="sourceLine" id="cb60-19" data-line-number="19">   <span class="co">// now perform a fit (with errors in x and y!)</span></a>
<a class="sourceLine" id="cb60-20" data-line-number="20">   gr-&gt;Fit(<span class="st">"gaus"</span>);</a>
<a class="sourceLine" id="cb60-21" data-line-number="21">   c1-&gt;Update();</a>
<a class="sourceLine" id="cb60-22" data-line-number="22">}</a></code></pre></div>
<p>In Python it looks like this:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="co">#</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="co"># Draw a graph with error bars and fit a function to it</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="co">#</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="im">from</span> ROOT <span class="im">import</span> gStyle, TCanvas, TGraphErrors</a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="im">from</span> array <span class="im">import</span> array</a>
<a class="sourceLine" id="cb61-6" data-line-number="6">gStyle.SetOptFit (<span class="dv">111</span>) <span class="co"># superimpose fit results</span></a>
<a class="sourceLine" id="cb61-7" data-line-number="7">c1<span class="op">=</span>TCanvas(<span class="st">"c1"</span> ,<span class="st">"Data"</span> ,<span class="dv">200</span> ,<span class="dv">10</span> ,<span class="dv">700</span> ,<span class="dv">500</span>) <span class="co">#make nice</span></a>
<a class="sourceLine" id="cb61-8" data-line-number="8">c1.SetGrid ()</a>
<a class="sourceLine" id="cb61-9" data-line-number="9"><span class="co">#define some data points . . .</span></a>
<a class="sourceLine" id="cb61-10" data-line-number="10">x <span class="op">=</span> array(<span class="st">'f'</span>, (<span class="op">-</span><span class="fl">0.22</span>, <span class="fl">0.1</span>, <span class="fl">0.25</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.61</span>, <span class="fl">0.7</span>, <span class="fl">0.85</span>, <span class="fl">0.89</span>, <span class="fl">1.1</span>) )</a>
<a class="sourceLine" id="cb61-11" data-line-number="11">y <span class="op">=</span> array(<span class="st">'f'</span>, (<span class="fl">0.7</span>, <span class="fl">2.9</span>, <span class="fl">5.6</span>, <span class="fl">7.4</span>, <span class="fl">9.</span>, <span class="fl">9.6</span>, <span class="fl">8.7</span>, <span class="fl">6.3</span>, <span class="fl">4.5</span>, <span class="fl">1.1</span>) )</a>
<a class="sourceLine" id="cb61-12" data-line-number="12">ey <span class="op">=</span> array(<span class="st">'f'</span>, (.<span class="dv">8</span> ,.<span class="dv">7</span> ,.<span class="dv">6</span> ,.<span class="dv">5</span> ,.<span class="dv">4</span> ,.<span class="dv">4</span> ,.<span class="dv">5</span> ,.<span class="dv">6</span> ,.<span class="dv">7</span> ,.<span class="dv">8</span>) )</a>
<a class="sourceLine" id="cb61-13" data-line-number="13">ex <span class="op">=</span> array(<span class="st">'f'</span>, (.<span class="dv">05</span> ,.<span class="dv">1</span> ,.<span class="dv">07</span> ,.<span class="dv">07</span> ,.<span class="dv">04</span> ,.<span class="dv">05</span> ,.<span class="dv">06</span> ,.<span class="dv">07</span> ,.<span class="dv">08</span> ,.<span class="dv">05</span>) )</a>
<a class="sourceLine" id="cb61-14" data-line-number="14">nPoints<span class="op">=</span><span class="bu">len</span> ( x )</a>
<a class="sourceLine" id="cb61-15" data-line-number="15"><span class="co"># . . . and hand over to TGraphErros object</span></a>
<a class="sourceLine" id="cb61-16" data-line-number="16">gr<span class="op">=</span>TGraphErrors ( nPoints , x , y , ex , ey )</a>
<a class="sourceLine" id="cb61-17" data-line-number="17">gr.SetTitle(<span class="st">"TGraphErrors with Fit"</span>)</a>
<a class="sourceLine" id="cb61-18" data-line-number="18">gr.Draw ( <span class="st">"AP"</span> ) <span class="op">;</span></a>
<a class="sourceLine" id="cb61-19" data-line-number="19">gr.Fit(<span class="st">"gaus"</span>)</a>
<a class="sourceLine" id="cb61-20" data-line-number="20">c1.Update ()</a>
<a class="sourceLine" id="cb61-21" data-line-number="21"><span class="co"># request user action before ending (and deleting graphics window)</span></a>
<a class="sourceLine" id="cb61-22" data-line-number="22"><span class="bu">raw_input</span>(<span class="st">'Press &lt;ret&gt; to end -&gt; '</span>)</a></code></pre></div>
<p>Comparing the C++ and Python versions in these two examples, it now should be clear how easy it is to convert any ROOT Macro in C++ to a Python version.</p>
<p>As another example, let us revisit macro3 from Chapter 4. A straight-forward Python version relying on the ROOT class <code>TMath</code>:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># Builds a polar graph in a square Canvas.</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"></a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="im">from</span> ROOT <span class="im">import</span> TGraphPolar, TCanvas, TMath</a>
<a class="sourceLine" id="cb62-4" data-line-number="4"><span class="im">from</span> array <span class="im">import</span> array</a>
<a class="sourceLine" id="cb62-5" data-line-number="5"></a>
<a class="sourceLine" id="cb62-6" data-line-number="6">c <span class="op">=</span> TCanvas(<span class="st">"myCanvas"</span>,<span class="st">"myCanvas"</span>,<span class="dv">600</span>,<span class="dv">600</span>)</a>
<a class="sourceLine" id="cb62-7" data-line-number="7">rmin <span class="op">=</span> <span class="fl">0.</span></a>
<a class="sourceLine" id="cb62-8" data-line-number="8">rmax <span class="op">=</span> TMath.Pi()<span class="op">*</span><span class="fl">6.</span></a>
<a class="sourceLine" id="cb62-9" data-line-number="9">npoints <span class="op">=</span> <span class="dv">300</span></a>
<a class="sourceLine" id="cb62-10" data-line-number="10">r <span class="op">=</span> array(<span class="st">'d'</span>,[<span class="dv">0</span>]<span class="op">*</span>npoints)</a>
<a class="sourceLine" id="cb62-11" data-line-number="11">theta  <span class="op">=</span> array(<span class="st">'d'</span>,[<span class="dv">0</span>]<span class="op">*</span>npoints)</a>
<a class="sourceLine" id="cb62-12" data-line-number="12"><span class="cf">for</span> ipt <span class="kw">in</span> <span class="bu">xrange</span>(<span class="dv">0</span>,npoints):</a>
<a class="sourceLine" id="cb62-13" data-line-number="13">    r[ipt] <span class="op">=</span> ipt<span class="op">*</span>(rmax<span class="op">-</span>rmin)<span class="op">/</span>npoints<span class="op">+</span>rmin</a>
<a class="sourceLine" id="cb62-14" data-line-number="14">    theta[ipt] <span class="op">=</span> TMath.Sin(r[ipt])</a>
<a class="sourceLine" id="cb62-15" data-line-number="15"></a>
<a class="sourceLine" id="cb62-16" data-line-number="16">grP1 <span class="op">=</span> TGraphPolar(npoints,r,theta)</a>
<a class="sourceLine" id="cb62-17" data-line-number="17">grP1.SetTitle(<span class="st">"A Fan"</span>)</a>
<a class="sourceLine" id="cb62-18" data-line-number="18">grP1.SetLineWidth(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb62-19" data-line-number="19">grP1.SetLineColor(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb62-20" data-line-number="20">grP1.DrawClone(<span class="st">"L"</span>)</a>
<a class="sourceLine" id="cb62-21" data-line-number="21"><span class="bu">raw_input</span>(<span class="st">"Press enter to exit."</span>)</a></code></pre></div>
<h3 id="more-python--less-c"><span class="header-section-number">8.1.1</span> More Python- less C++</h3>
<p>You may have noticed already that there are some Python modules providing functionality similar to ROOT classes, which fit more seamlessly into your Python code.</p>
<p>A more “pythonic” version of the above macro3 would use a replacement of the ROOT class TMath for the provisioning of data to TGraphPolar. With the math package, the part of the code becomes</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb63-1" data-line-number="1">import math</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">from array import array</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">from ROOT import TCanvas , TGraphPolar</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">...</a>
<a class="sourceLine" id="cb63-5" data-line-number="5">ipt=range(<span class="dv">0</span>,npoints)</a>
<a class="sourceLine" id="cb63-6" data-line-number="6">r=array(<span class="ch">'d'</span>,map(lambda x: x*(rmax-rmin)/(npoints<span class="fl">-1.</span>)+rmin,ipt))</a>
<a class="sourceLine" id="cb63-7" data-line-number="7">theta=array(<span class="ch">'d'</span>,map(math.sin,r))</a>
<a class="sourceLine" id="cb63-8" data-line-number="8">e=array(<span class="ch">'d'</span>,npoints*[<span class="fl">0.</span>])</a>
<a class="sourceLine" id="cb63-9" data-line-number="9">...</a></code></pre></div>
<h4 id="customised-binning"><span class="header-section-number">8.1.1.1</span> Customised Binning</h4>
<p>This example combines comfortable handling of arrays in Python to define variable bin sizes of a ROOT histogram. All we need to know is the interface of the relevant ROOT class and its methods (from the ROOT documentation):</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb64-1" data-line-number="1">TH1F(<span class="at">const</span> <span class="dt">char</span>* name , <span class="at">const</span> <span class="dt">char</span>* title , <span class="dt">Int_t</span> nbinsx , <span class="at">const</span> <span class="dt">Double_t</span>* xbins)</a></code></pre></div>
<p>Here is the Python code:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="im">import</span> ROOT</a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="im">from</span> array <span class="im">import</span> array</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">arrBins <span class="op">=</span> array(<span class="st">'d'</span> ,(<span class="dv">1</span> ,<span class="dv">4</span> ,<span class="dv">9</span> ,<span class="dv">16</span>) ) <span class="co"># array of bin edges</span></a>
<a class="sourceLine" id="cb65-4" data-line-number="4">histo <span class="op">=</span> ROOT.TH1F(<span class="st">"hist"</span>, <span class="st">"hist"</span>, <span class="bu">len</span>(arrBins)<span class="op">-</span><span class="dv">1</span>, arrBins)</a>
<a class="sourceLine" id="cb65-5" data-line-number="5"><span class="co"># fill it with equally spaced numbers</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span> (<span class="dv">1</span> ,<span class="dv">16</span>) :</a>
<a class="sourceLine" id="cb65-7" data-line-number="7">   histo.Fill(i)</a>
<a class="sourceLine" id="cb65-8" data-line-number="8">histo.Draw ()</a></code></pre></div>
<h2 id="custom-code-from-c-to-python"><span class="header-section-number">8.2</span> Custom code: from C++ to Python</h2>
<p>The ROOT interpreter and type sytem offer interesting possibilities when it comes to JITting of C++ code. Take for example this header file, containing a class and a function.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode cpp"><code class="sourceCode cpp"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="co">// file cpp2pythonExample.h</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="pp">#include </span><span class="im">"stdio.h"</span></a>
<a class="sourceLine" id="cb66-3" data-line-number="3"></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="kw">class</span> A{</a>
<a class="sourceLine" id="cb66-5" data-line-number="5"><span class="kw">public</span>:</a>
<a class="sourceLine" id="cb66-6" data-line-number="6"> A(<span class="dt">int</span> i):<span class="va">m_i</span>(i){}</a>
<a class="sourceLine" id="cb66-7" data-line-number="7"> <span class="dt">int</span> getI() <span class="at">const</span> {<span class="cf">return</span> <span class="va">m_i</span>;}</a>
<a class="sourceLine" id="cb66-8" data-line-number="8"><span class="kw">private</span>:</a>
<a class="sourceLine" id="cb66-9" data-line-number="9"> <span class="dt">int</span> <span class="va">m_i</span>=<span class="dv">0</span>;</a>
<a class="sourceLine" id="cb66-10" data-line-number="10">};</a>
<a class="sourceLine" id="cb66-11" data-line-number="11"></a>
<a class="sourceLine" id="cb66-12" data-line-number="12"><span class="dt">void</span> printA(<span class="at">const</span> A&amp; a ){</a>
<a class="sourceLine" id="cb66-13" data-line-number="13">  printf (<span class="st">"The value of A instance is </span><span class="sc">%i</span><span class="st">.</span><span class="sc">\n</span><span class="st">"</span>,a.getI());</a>
<a class="sourceLine" id="cb66-14" data-line-number="14">}</a></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> ROOT</a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="op">&gt;&gt;&gt;</span> ROOT.gInterpreter.ProcessLine(<span class="st">'#include "cpp2pythonExample.h"'</span>)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> ROOT.A(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="op">&gt;&gt;&gt;</span> ROOT.printA(a)</a>
<a class="sourceLine" id="cb67-5" data-line-number="5">The value of A instance <span class="kw">is</span> <span class="fl">123.</span></a></code></pre></div>
<p>This example might seem trivial, but it shows a powerful ROOT feature. C++ code can be JITted within PyROOT and the entities defined in C++ can be transparently used in Python!</p>
<h1 id="concluding-remarks"><span class="header-section-number">9</span> Concluding Remarks</h1>
<p>This is the end of our guided tour for beginners through ROOT. There is still a lot coming to mind to be said, but by now you are experienced enough to use the ROOT documentation, most importantly the <strong><a href="http://root.cern.ch/">ROOT home page</a></strong> and the <strong><a href="http://root.cern.ch/drupal/content/reference-guide">ROOT reference guide</a></strong> with the documentation of all ROOT classes, or the <strong><a href="http://root.cern.ch/drupal/content/users-guide">ROOT users guide</a></strong>.</p>
<p>A very useful way for you to continue exploring ROOT is to study the examples in the sub-directory <code>tutorials/</code> of any ROOT installation.</p>
<p>There are some powerful features of ROOT which were not treated in this document, e.g.&nbsp;packages named RooFit and RooStats providing an advanced framework for model building, fitting and statistical analysis. The ROOT namespace <code>TMVA</code> offers multi-variate analysis tools including an artificial neural network and many other advanced tools for classification problems. The remarkable ability of ROOT to handle large data volumes was already mentioned in this guide, implemented through the class <code>TTree</code>. But there is still much more for you to explore!</p>
<p><strong>End of this guide … but hopefully not of your interaction with ROOT !</strong></p>
<h1 id="references" class="unnumbered">References</h1>
<div id="refs" class="references">
<div id="ref-MersenneTwister">
<p>Matsumoto, Makoto. 1997. “Mersenne Twister Home Page.” <a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html" class="uri">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html</a>.</p>
</div>
<div id="ref-Fumili">
<p>Silin, I.N. 1983. “FUMILI.” <em>CERN Program Library</em> d510.</p>
</div>
<div id="ref-ROOT_Class_Reference">
<p><em>The Root Reference Guide</em>. 2013. <a href="http://root.cern.ch/drupal/content/reference-guide" class="uri">http://root.cern.ch/drupal/content/reference-guide</a>.</p>
</div>
<div id="ref-ROOT_Users_Guide">
<p><em>The Root Users Guide</em>. 2015. <a href="http://root.cern.ch/drupal/content/users-guide" class="uri">http://root.cern.ch/drupal/content/users-guide</a>.</p>
</div>
<div id="ref-Cling">
<p>“What is Cling.” 2015. <a href="https://root.cern.ch/drupal/content/cling" class="uri">https://root.cern.ch/drupal/content/cling</a>.</p>
</div>
</div>
<section class="footnotes">
<hr>
<ol>
<li id="fn1"><p>All ROOT classes’ names start with the letter T. A notable exception is RooFit. In this context all classes’ names are of the form Roo*.<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>To optimise the memory usage you might go for one byte (TH1C), short (TH1S), integer (TH1I) or double-precision (TH1D) bin-content.<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>“Monte Carlo” simulation means that random numbers play a role here which is as crucial as in games of pure chance in the Casino of Monte Carlo.<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>The usage of <code>fOutput</code> is not really needed for this simple example, but it allows re-usage of the exact code in parallel processing with <code>PROOF</code> (see next section).<a href="http://root.cern.ch/root/htmldoc/guides/primer/ROOTPrimer.html#fnref4" class="footnote-back">↩</a></p></li>
</ol>
</section>


</body></html>